(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){"use strict";module.exports=function(){try{return!!new Blob}catch(e){return false}}()},{}],2:[function(require,module,exports){"use strict";var EventEmitter=require("events").EventEmitter;function Emitter(){EventEmitter.call(this);this.setMaxListeners(20)}Emitter.prototype=Object.create(EventEmitter.prototype);Emitter.prototype.constructor=Emitter;Emitter.prototype.off=function(type,listener){if(listener){return this.removeListener(type,listener)}if(type){return this.removeAllListeners(type)}return this.removeAllListeners()};module.exports=Emitter},{events:9}],3:[function(require,module,exports){"use strict";var Emitter=require("./emitter.js");var createLoader=require("./loader");var autoId=0;module.exports=function createGroup(config){var group;var map={};var assets=[];var queue=[];var numLoaded=0;var numTotal=0;var loaders={};var add=function(options){if(Array.isArray(options)){options.forEach(add);return group}var isGroup=!!options.assets&&Array.isArray(options.assets);var loader;if(isGroup){loader=createGroup(configure(options,config))}else{loader=createLoader(configure(options,config))}loader.once("destroy",destroyHandler);queue.push(loader);loaders[loader.id]=loader;return group};var get=function(id){if(!arguments.length){return assets}if(map[id]){return map[id]}return loaders[id]};var find=function(id){if(get(id)){return get(id)}var found=null;Object.keys(loaders).some(function(key){found=loaders[key].find&&loaders[key].find(id);return!!found});return found};var getExtension=function(url){return url&&url.split("?")[0].split(".").pop().toLowerCase()};var configure=function(options,defaults){if(typeof options==="string"){var url=options;options={url:url}}if(options.isTouchLocked===undefined){options.isTouchLocked=defaults.isTouchLocked}if(options.blob===undefined){options.blob=defaults.blob}if(options.basePath===undefined){options.basePath=defaults.basePath}options.id=options.id||options.url||String(++autoId);options.type=options.type||getExtension(options.url);options.crossOrigin=options.crossOrigin||defaults.crossOrigin;options.webAudioContext=options.webAudioContext||defaults.webAudioContext;options.log=defaults.log;return options};var start=function(){numTotal=queue.length;queue.forEach(function(loader){loader.on("progress",progressHandler).once("complete",completeHandler).once("error",errorHandler).start()});queue=[];return group};var progressHandler=function(progress){var loaded=numLoaded+progress;group.emit("progress",loaded/numTotal)};var completeHandler=function(asset,id,type){if(Array.isArray(asset)){asset={id:id,file:asset,type:type}}numLoaded++;group.emit("progress",numLoaded/numTotal);map[asset.id]=asset.file;assets.push(asset);group.emit("childcomplete",asset);checkComplete()};var errorHandler=function(err){numTotal--;if(group.listeners("error").length){group.emit("error",err)}else{console.error(err)}checkComplete()};var destroyHandler=function(id){loaders[id]=null;delete loaders[id];map[id]=null;delete map[id];assets.some(function(asset,i){if(asset.id===id){assets.splice(i,1);return true}})};var checkComplete=function(){if(numLoaded>=numTotal){group.emit("complete",assets,map,config.id,"group")}};var destroy=function(){while(queue.length){queue.pop().destroy()}group.off("error");group.off("progress");group.off("complete");assets=[];map={};config.webAudioContext=null;numTotal=0;numLoaded=0;Object.keys(loaders).forEach(function(key){loaders[key].destroy()});loaders={};group.emit("destroy",group.id);return group};group=Object.create(Emitter.prototype,{_events:{value:{}},id:{get:function(){return config.id}},add:{value:add},start:{value:start},get:{value:get},find:{value:find},getLoader:{value:function(id){return loaders[id]}},loaded:{get:function(){return numLoaded>=numTotal}},file:{get:function(){return assets}},destroy:{value:destroy}});config=configure(config||{},{basePath:"",blob:false,touchLocked:false,crossOrigin:null,webAudioContext:null,log:false});if(Array.isArray(config.assets)){add(config.assets)}return Object.freeze(group)}},{"./emitter.js":2,"./loader":5}],4:[function(require,module,exports){"use strict";var assetsLoader=require("./group");assetsLoader.stats=require("./stats");module.exports=assetsLoader},{"./group":3,"./stats":6}],5:[function(require,module,exports){"use strict";var Emitter=require("./emitter.js");var browserHasBlob=require("./browser-has-blob.js");var stats=require("./stats");module.exports=function(options){var id=options.id;var basePath=options.basePath||"";var url=options.url;var type=options.type;var crossOrigin=options.crossOrigin;var isTouchLocked=options.isTouchLocked;var blob=options.blob&&browserHasBlob;var webAudioContext=options.webAudioContext;var log=options.log;var loader;var loadHandler;var request;var startTime;var timeout;var file;var start=function(){startTime=Date.now();switch(type){case"json":loadJSON();break;case"jpg":case"png":case"gif":case"webp":loadImage();break;case"mp3":case"ogg":case"opus":case"wav":case"m4a":loadAudio();break;case"ogv":case"mp4":case"webm":case"hls":loadVideo();break;case"bin":case"binary":loadXHR("arraybuffer");break;case"txt":case"text":loadXHR("text");break;default:throw"AssetsLoader ERROR: Unknown type for file with URL: "+basePath+url+" ("+type+")"}};var dispatchComplete=function(data){if(!data){return}file={id:id,file:data,type:type};loader.emit("progress",1);loader.emit("complete",file,id,type);removeListeners()};var loadXHR=function(responseType,customLoadHandler){loadHandler=customLoadHandler||completeHandler;request=new XMLHttpRequest;request.open("GET",basePath+url,true);request.responseType=responseType;request.addEventListener("progress",progressHandler);request.addEventListener("load",loadHandler);request.addEventListener("error",errorHandler);request.send()};var progressHandler=function(event){if(event.lengthComputable){loader.emit("progress",event.loaded/event.total)}};var completeHandler=function(){if(success()){dispatchComplete(request.response)}};var success=function(){if(request&&request.status<400){stats.update(request,startTime,url,log);return true}errorHandler(request&&request.statusText);return false};var loadJSON=function(){loadXHR("json",function(){if(success()){var data=request.response;if(typeof data==="string"){data=JSON.parse(data)}dispatchComplete(data)}})};var loadImage=function(){if(blob){loadImageBlob()}else{loadImageElement()}};var loadImageElement=function(){request=new Image;if(crossOrigin){request.crossOrigin="anonymous"}request.addEventListener("error",errorHandler,false);request.addEventListener("load",elementLoadHandler,false);request.src=basePath+url};var elementLoadHandler=function(event){window.clearTimeout(timeout);if(!event&&(request.error||!request.readyState)){errorHandler();return}dispatchComplete(request)};var loadImageBlob=function(){loadXHR("blob",function(){if(success()){request=new Image;request.addEventListener("error",errorHandler,false);request.addEventListener("load",imageBlobHandler,false);request.src=window.URL.createObjectURL(request.response)}})};var imageBlobHandler=function(){window.URL.revokeObjectURL(request.src);dispatchComplete(request)};var loadAudio=function(){if(webAudioContext){loadAudioBuffer()}else{loadMediaElement("audio")}};var loadVideo=function(){if(blob){loadXHR("blob")}else{loadMediaElement("video")}};var loadAudioBuffer=function(){loadXHR("arraybuffer",function(){if(success()){webAudioContext.decodeAudioData(request.response,function(buffer){request=null;dispatchComplete(buffer)},function(e){errorHandler(e)})}})};var loadMediaElement=function(tagName){request=document.createElement(tagName);if(!isTouchLocked){window.clearTimeout(timeout);timeout=window.setTimeout(elementLoadHandler,2e3);request.addEventListener("canplaythrough",elementLoadHandler,false)}request.addEventListener("error",errorHandler,false);request.preload="auto";request.src=basePath+url;request.load();if(isTouchLocked){dispatchComplete(request)}};var errorHandler=function(err){window.clearTimeout(timeout);var message=err;if(request&&request.tagName&&request.error){var ERROR_STATE=["","ABORTED","NETWORK","DECODE","SRC_NOT_SUPPORTED"];message="MediaError: "+ERROR_STATE[request.error.code]+" "+request.src}else if(request&&request.statusText){message=request.statusText}else if(err&&err.message){message=err.message}else if(err&&err.type){message=err.type}loader.emit("error",'Error loading "'+basePath+url+'" '+message);destroy()};var removeListeners=function(){loader.off("error");loader.off("progress");loader.off("complete");if(request){request.removeEventListener("progress",progressHandler);request.removeEventListener("load",loadHandler);request.removeEventListener("error",errorHandler);request.removeEventListener("load",elementLoadHandler);request.removeEventListener("canplaythrough",elementLoadHandler);request.removeEventListener("load",imageBlobHandler)}};var destroy=function(){removeListeners();if(request&&request.abort&&request.readyState<4){request.abort()}request=null;webAudioContext=null;file=null;window.clearTimeout(timeout);loader.emit("destroy",id)};loader=Object.create(Emitter.prototype,{_events:{value:{}},id:{value:options.id},start:{value:start},loaded:{get:function(){return!!file}},file:{get:function(){return file}},destroy:{value:destroy}});return Object.freeze(loader)}},{"./browser-has-blob.js":1,"./emitter.js":2,"./stats":6}],6:[function(require,module,exports){"use strict";module.exports={mbs:0,secs:0,update:function(request,startTime,url,log){var length;var headers=request.getAllResponseHeaders();if(headers){var match=headers.match(/content-length: (\d+)/i);if(match&&match.length){length=match[1]}}if(length){length=parseInt(length,10);var mbs=length/1024/1024;var secs=(Date.now()-startTime)/1e3;this.secs+=secs;this.mbs+=mbs;if(log){this.log(url,mbs,secs)}}else if(log){console.warn.call(console,"Can't get Content-Length:",url)}},log:function(url,mbs,secs){if(url){var file="File loaded: "+url.substr(url.lastIndexOf("/")+1)+" size:"+mbs.toFixed(2)+"mb"+" time:"+secs.toFixed(2)+"s"+" speed:"+(mbs/secs).toFixed(2)+"mbps";console.log.call(console,file)}var total="Total loaded: "+this.mbs.toFixed(2)+"mb"+" time:"+this.secs.toFixed(2)+"s"+" speed:"+this.getMbps().toFixed(2)+"mbps";console.log.call(console,total)},getMbps:function(){return this.mbs/this.secs}}},{}],7:[function(require,module,exports){!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):"object"==typeof exports?exports.dat=t():e.dat=t()}(this,function(){return function(e){function t(o){if(n[o])return n[o].exports;var i=n[o]={exports:{},id:o,loaded:!1};return e[o].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";e.exports=n(1)},function(e,t,n){"use strict";e.exports={color:{Color:n(2),math:n(6),interpret:n(3)},controllers:{Controller:n(7),BooleanController:n(8),OptionController:n(10),StringController:n(11),NumberController:n(12),NumberControllerBox:n(13),NumberControllerSlider:n(14),FunctionController:n(20),ColorController:n(21)},dom:{dom:n(9)},gui:{GUI:n(22)},GUI:n(22)}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t,n){Object.defineProperty(e,t,{get:function(){return"RGB"===this.__state.space?this.__state[t]:(_.recalculateRGB(this,t,n),this.__state[t])},set:function(e){"RGB"!==this.__state.space&&(_.recalculateRGB(this,t,n),this.__state.space="RGB"),this.__state[t]=e}})}function a(e,t){Object.defineProperty(e,t,{get:function(){return"HSV"===this.__state.space?this.__state[t]:(_.recalculateHSV(this),this.__state[t])},set:function(e){"HSV"!==this.__state.space&&(_.recalculateHSV(this),this.__state.space="HSV"),this.__state[t]=e}})}t.__esModule=!0;var s=n(3),l=o(s),u=n(6),d=o(u),c=n(4),f=o(c),h=n(5),p=o(h),_=function(){function e(){if(i(this,e),this.__state=l["default"].apply(this,arguments),this.__state===!1)throw"Failed to interpret color arguments";this.__state.a=this.__state.a||1}return e.prototype.toString=function(){return f["default"](this)},e.prototype.toOriginal=function(){return this.__state.conversion.write(this)},e}();_.recalculateRGB=function(e,t,n){if("HEX"===e.__state.space)e.__state[t]=d["default"].component_from_hex(e.__state.hex,n);else{if("HSV"!==e.__state.space)throw"Corrupted color state";p["default"].extend(e.__state,d["default"].hsv_to_rgb(e.__state.h,e.__state.s,e.__state.v))}},_.recalculateHSV=function(e){var t=d["default"].rgb_to_hsv(e.r,e.g,e.b);p["default"].extend(e.__state,{s:t.s,v:t.v}),p["default"].isNaN(t.h)?p["default"].isUndefined(e.__state.h)&&(e.__state.h=0):e.__state.h=t.h},_.COMPONENTS=["r","g","b","h","s","v","hex","a"],r(_.prototype,"r",2),r(_.prototype,"g",1),r(_.prototype,"b",0),a(_.prototype,"h"),a(_.prototype,"s"),a(_.prototype,"v"),Object.defineProperty(_.prototype,"a",{get:function(){return this.__state.a},set:function(e){this.__state.a=e}}),Object.defineProperty(_.prototype,"hex",{get:function(){return"HEX"!==!this.__state.space&&(this.__state.hex=d["default"].rgb_to_hex(this.r,this.g,this.b)),this.__state.hex},set:function(e){this.__state.space="HEX",this.__state.hex=e}}),t["default"]=_,e.exports=t["default"]},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var i=n(4),r=o(i),a=n(5),s=o(a),l=[{litmus:s["default"].isString,conversions:{THREE_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null===t?!1:{space:"HEX",hex:parseInt("0x"+t[1].toString()+t[1].toString()+t[2].toString()+t[2].toString()+t[3].toString()+t[3].toString(),0)}},write:r["default"]},SIX_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9]{6})$/i);return null===t?!1:{space:"HEX",hex:parseInt("0x"+t[1].toString(),0)}},write:r["default"]},CSS_RGB:{read:function(e){var t=e.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null===t?!1:{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3])}},write:r["default"]},CSS_RGBA:{read:function(e){var t=e.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\,\s*(.+)\s*\)/);return null===t?!1:{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3]),a:parseFloat(t[4])}},write:r["default"]}}},{litmus:s["default"].isNumber,conversions:{HEX:{read:function(e){return{space:"HEX",hex:e,conversionName:"HEX"}},write:function(e){return e.hex}}}},{litmus:s["default"].isArray,conversions:{RGB_ARRAY:{read:function(e){return 3!==e.length?!1:{space:"RGB",r:e[0],g:e[1],b:e[2]}},write:function(e){return[e.r,e.g,e.b]}},RGBA_ARRAY:{read:function(e){return 4!==e.length?!1:{space:"RGB",r:e[0],g:e[1],b:e[2],a:e[3]}},write:function(e){return[e.r,e.g,e.b,e.a]}}}},{litmus:s["default"].isObject,conversions:{RGBA_OBJ:{read:function(e){return s["default"].isNumber(e.r)&&s["default"].isNumber(e.g)&&s["default"].isNumber(e.b)&&s["default"].isNumber(e.a)?{space:"RGB",r:e.r,g:e.g,b:e.b,a:e.a}:!1},write:function(e){return{r:e.r,g:e.g,b:e.b,a:e.a}}},RGB_OBJ:{read:function(e){return s["default"].isNumber(e.r)&&s["default"].isNumber(e.g)&&s["default"].isNumber(e.b)?{space:"RGB",r:e.r,g:e.g,b:e.b}:!1},write:function(e){return{r:e.r,g:e.g,b:e.b}}},HSVA_OBJ:{read:function(e){return s["default"].isNumber(e.h)&&s["default"].isNumber(e.s)&&s["default"].isNumber(e.v)&&s["default"].isNumber(e.a)?{space:"HSV",h:e.h,s:e.s,v:e.v,a:e.a}:!1},write:function(e){return{h:e.h,s:e.s,v:e.v,a:e.a}}},HSV_OBJ:{read:function(e){return s["default"].isNumber(e.h)&&s["default"].isNumber(e.s)&&s["default"].isNumber(e.v)?{space:"HSV",h:e.h,s:e.s,v:e.v}:!1},write:function(e){return{h:e.h,s:e.s,v:e.v}}}}}],u=void 0,d=void 0,c=function(){d=!1;var e=arguments.length>1?s["default"].toArray(arguments):arguments[0];return s["default"].each(l,function(t){return t.litmus(e)?(s["default"].each(t.conversions,function(t,n){return u=t.read(e),d===!1&&u!==!1?(d=u,u.conversionName=n,u.conversion=t,s["default"].BREAK):void 0}),s["default"].BREAK):void 0}),d};t["default"]=c,e.exports=t["default"]},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var i=n(5),r=o(i);t["default"]=function(e){if(1===e.a||r["default"].isUndefined(e.a)){for(var t=e.hex.toString(16);t.length<6;)t="0"+t;return"#"+t}return"rgba("+Math.round(e.r)+","+Math.round(e.g)+","+Math.round(e.b)+","+e.a+")"},e.exports=t["default"]},function(e,t){"use strict";t.__esModule=!0;var n=Array.prototype.forEach,o=Array.prototype.slice,i={BREAK:{},extend:function(e){return this.each(o.call(arguments,1),function(t){for(var n in t)this.isUndefined(t[n])||(e[n]=t[n])},this),e},defaults:function(e){return this.each(o.call(arguments,1),function(t){for(var n in t)this.isUndefined(e[n])&&(e[n]=t[n])},this),e},compose:function(){var e=o.call(arguments);return function(){for(var t=o.call(arguments),n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},each:function(e,t,o){if(e)if(n&&e.forEach&&e.forEach===n)e.forEach(t,o);else if(e.length===e.length+0){var i=void 0,r=void 0;for(i=0,r=e.length;r>i;i++)if(i in e&&t.call(o,e[i],i)===this.BREAK)return}else for(var i in e)if(t.call(o,e[i],i)===this.BREAK)return},defer:function(e){setTimeout(e,0)},toArray:function(e){return e.toArray?e.toArray():o.call(e)},isUndefined:function(e){return void 0===e},isNull:function(e){return null===e},isNaN:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return isNaN(e)}),isArray:Array.isArray||function(e){return e.constructor===Array},isObject:function(e){return e===Object(e)},isNumber:function(e){return e===e+0},isString:function(e){return e===e+""},isBoolean:function(e){return e===!1||e===!0},isFunction:function(e){return"[object Function]"===Object.prototype.toString.call(e)}};t["default"]=i,e.exports=t["default"]},function(e,t){"use strict";t.__esModule=!0;var n,o={hsv_to_rgb:function(e,t,n){var o=Math.floor(e/60)%6,i=e/60-Math.floor(e/60),r=n*(1-t),a=n*(1-i*t),s=n*(1-(1-i)*t),l=[[n,s,r],[a,n,r],[r,n,s],[r,a,n],[s,r,n],[n,r,a]][o];return{r:255*l[0],g:255*l[1],b:255*l[2]}},rgb_to_hsv:function(e,t,n){var o,i,r=Math.min(e,t,n),a=Math.max(e,t,n),s=a-r;return 0==a?{h:NaN,s:0,v:0}:(i=s/a,o=e==a?(t-n)/s:t==a?2+(n-e)/s:4+(e-t)/s,o/=6,0>o&&(o+=1),{h:360*o,s:i,v:a/255})},rgb_to_hex:function(e,t,n){var o=this.hex_with_component(0,2,e);return o=this.hex_with_component(o,1,t),o=this.hex_with_component(o,0,n)},component_from_hex:function(e,t){return e>>8*t&255},hex_with_component:function(e,t,o){return o<<(n=8*t)|e&~(255<<n)}};t["default"]=o,e.exports=t["default"]},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var r=n(5),a=(o(r),function(){function e(t,n){i(this,e),this.initialValue=t[n],this.domElement=document.createElement("div"),this.object=t,this.property=n,this.__onChange=void 0,this.__onFinishChange=void 0}return e.prototype.onChange=function(e){return this.__onChange=e,this},e.prototype.onFinishChange=function(e){return this.__onFinishChange=e,this},e.prototype.setValue=function(e){return this.object[this.property]=e,this.__onChange&&this.__onChange.call(this,e),this.updateDisplay(),this},e.prototype.getValue=function(){return this.object[this.property]},e.prototype.updateDisplay=function(){return this},e.prototype.isModified=function(){return this.initialValue!==this.getValue()},e}());t["default"]=a,e.exports=t["default"]},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var a=n(7),s=o(a),l=n(9),u=o(l),d=n(5),c=(o(d),function(e){function t(n,o){function r(){a.setValue(!a.__prev)}i(this,t),e.call(this,n,o);var a=this;this.__prev=this.getValue(),this.__checkbox=document.createElement("input"),this.__checkbox.setAttribute("type","checkbox"),u["default"].bind(this.__checkbox,"change",r,!1),this.domElement.appendChild(this.__checkbox),this.updateDisplay()}return r(t,e),t.prototype.setValue=function(t){var n=e.prototype.setValue.call(this,t);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),n},t.prototype.updateDisplay=function(){return this.getValue()===!0?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0):this.__checkbox.checked=!1,e.prototype.updateDisplay.call(this)},t}(s["default"]));t["default"]=c,e.exports=t["default"]},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function i(e){if("0"===e||a["default"].isUndefined(e))return 0;var t=e.match(u);return a["default"].isNull(t)?0:parseFloat(t[1])}t.__esModule=!0;var r=n(5),a=o(r),s={HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},l={};a["default"].each(s,function(e,t){a["default"].each(e,function(e){l[e]=t})});var u=/(\d+(\.\d+)?)px/,d={makeSelectable:function(e,t){void 0!==e&&void 0!==e.style&&(e.onselectstart=t?function(){return!1}:function(){},e.style.MozUserSelect=t?"auto":"none",e.style.KhtmlUserSelect=t?"auto":"none",e.unselectable=t?"on":"off")},makeFullscreen:function(e,t,n){a["default"].isUndefined(t)&&(t=!0),a["default"].isUndefined(n)&&(n=!0),e.style.position="absolute",t&&(e.style.left=0,e.style.right=0),n&&(e.style.top=0,e.style.bottom=0)},fakeEvent:function(e,t,n,o){n=n||{};var i=l[t];if(!i)throw new Error("Event type "+t+" not supported.");var r=document.createEvent(i);switch(i){case"MouseEvents":var s=n.x||n.clientX||0,u=n.y||n.clientY||0;r.initMouseEvent(t,n.bubbles||!1,n.cancelable||!0,window,n.clickCount||1,0,0,s,u,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":var d=r.initKeyboardEvent||r.initKeyEvent;a["default"].defaults(n,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),d(t,n.bubbles||!1,n.cancelable,window,n.ctrlKey,n.altKey,n.shiftKey,n.metaKey,n.keyCode,n.charCode);break;default:r.initEvent(t,n.bubbles||!1,n.cancelable||!0)}a["default"].defaults(r,o),e.dispatchEvent(r)},bind:function(e,t,n,o){return o=o||!1,e.addEventListener?e.addEventListener(t,n,o):e.attachEvent&&e.attachEvent("on"+t,n),d},unbind:function(e,t,n,o){return o=o||!1,e.removeEventListener?e.removeEventListener(t,n,o):e.detachEvent&&e.detachEvent("on"+t,n),d},addClass:function(e,t){if(void 0===e.className)e.className=t;else if(e.className!==t){var n=e.className.split(/ +/);-1==n.indexOf(t)&&(n.push(t),e.className=n.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return d},removeClass:function(e,t){if(t)if(void 0===e.className);else if(e.className===t)e.removeAttribute("class");else{var n=e.className.split(/ +/),o=n.indexOf(t);-1!=o&&(n.splice(o,1),e.className=n.join(" "))}else e.className=void 0;return d},hasClass:function(e,t){return new RegExp("(?:^|\\s+)"+t+"(?:\\s+|$)").test(e.className)||!1},getWidth:function(e){var t=getComputedStyle(e);return i(t["border-left-width"])+i(t["border-right-width"])+i(t["padding-left"])+i(t["padding-right"])+i(t.width)},getHeight:function(e){var t=getComputedStyle(e);return i(t["border-top-width"])+i(t["border-bottom-width"])+i(t["padding-top"])+i(t["padding-bottom"])+i(t.height)},getOffset:function(e){var t={left:0,top:0};if(e.offsetParent)do t.left+=e.offsetLeft,t.top+=e.offsetTop;while(e=e.offsetParent);return t},isActive:function(e){return e===document.activeElement&&(e.type||e.href)}};t["default"]=d,e.exports=t["default"]},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var a=n(7),s=o(a),l=n(9),u=o(l),d=n(5),c=o(d),f=function(e){function t(n,o,r){i(this,t),e.call(this,n,o);var a=this;if(this.__select=document.createElement("select"),c["default"].isArray(r)){var s={};c["default"].each(r,function(e){s[e]=e}),r=s}c["default"].each(r,function(e,t){var n=document.createElement("option");n.innerHTML=t,n.setAttribute("value",e),a.__select.appendChild(n)}),this.updateDisplay(),u["default"].bind(this.__select,"change",function(){var e=this.options[this.selectedIndex].value;a.setValue(e)}),this.domElement.appendChild(this.__select)}return r(t,e),t.prototype.setValue=function(t){var n=e.prototype.setValue.call(this,t);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),n},t.prototype.updateDisplay=function(){return this.__select.value=this.getValue(),e.prototype.updateDisplay.call(this)},t}(s["default"]);t["default"]=f,e.exports=t["default"]},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var a=n(7),s=o(a),l=n(9),u=o(l),d=n(5),c=(o(d),function(e){function t(n,o){function r(){s.setValue(s.__input.value)}function a(){s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}i(this,t),e.call(this,n,o);var s=this;this.__input=document.createElement("input"),this.__input.setAttribute("type","text"),u["default"].bind(this.__input,"keyup",r),u["default"].bind(this.__input,"change",r),u["default"].bind(this.__input,"blur",a),u["default"].bind(this.__input,"keydown",function(e){13===e.keyCode&&this.blur()}),this.updateDisplay(),this.domElement.appendChild(this.__input)}return r(t,e),t.prototype.updateDisplay=function(){return u["default"].isActive(this.__input)||(this.__input.value=this.getValue()),e.prototype.updateDisplay.call(this)},t}(s["default"]));t["default"]=c,e.exports=t["default"]},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){return e=e.toString(),e.indexOf(".")>-1?e.length-e.indexOf(".")-1:0}t.__esModule=!0;var s=n(7),l=o(s),u=n(5),d=o(u),c=function(e){function t(n,o,r){i(this,t),e.call(this,n,o),r=r||{},this.__min=r.min,this.__max=r.max,this.__step=r.step,d["default"].isUndefined(this.__step)?0==this.initialValue?this.__impliedStep=1:this.__impliedStep=Math.pow(10,Math.floor(Math.log(Math.abs(this.initialValue))/Math.LN10))/10:this.__impliedStep=this.__step,this.__precision=a(this.__impliedStep)}return r(t,e),t.prototype.setValue=function(t){return void 0!==this.__min&&t<this.__min?t=this.__min:void 0!==this.__max&&t>this.__max&&(t=this.__max),void 0!==this.__step&&t%this.__step!=0&&(t=Math.round(t/this.__step)*this.__step),e.prototype.setValue.call(this,t)},t.prototype.min=function(e){return this.__min=e,this},t.prototype.max=function(e){return this.__max=e,this},t.prototype.step=function(e){return this.__step=e,this.__impliedStep=e,this.__precision=a(e),this},t}(l["default"]);t["default"]=c,e.exports=t["default"]},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n}t.__esModule=!0;var s=n(12),l=o(s),u=n(9),d=o(u),c=n(5),f=o(c),h=function(e){function t(n,o,r){function a(){var e=parseFloat(p.__input.value);f["default"].isNaN(e)||p.setValue(e)}function s(){a(),p.__onFinishChange&&p.__onFinishChange.call(p,p.getValue())}function l(e){d["default"].bind(window,"mousemove",u),d["default"].bind(window,"mouseup",c),h=e.clientY}function u(e){var t=h-e.clientY;p.setValue(p.getValue()+t*p.__impliedStep),h=e.clientY}function c(){d["default"].unbind(window,"mousemove",u),d["default"].unbind(window,"mouseup",c)}i(this,t),e.call(this,n,o,r),this.__truncationSuspended=!1;var h,p=this;this.__input=document.createElement("input"),this.__input.setAttribute("type","text"),d["default"].bind(this.__input,"change",a),d["default"].bind(this.__input,"blur",s),d["default"].bind(this.__input,"mousedown",l),d["default"].bind(this.__input,"keydown",function(e){13===e.keyCode&&(p.__truncationSuspended=!0,this.blur(),p.__truncationSuspended=!1)}),this.updateDisplay(),this.domElement.appendChild(this.__input)}return r(t,e),t.prototype.updateDisplay=function(){return this.__input.value=this.__truncationSuspended?this.getValue():a(this.getValue(),this.__precision),e.prototype.updateDisplay.call(this)},t}(l["default"]);t["default"]=h,e.exports=t["default"]},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t,n,o,i){return o+(i-o)*((e-t)/(n-t))}t.__esModule=!0;var s=n(12),l=o(s),u=n(9),d=o(u),c=n(15),f=o(c),h=n(5),p=(o(h),n(16)),_=o(p),m=function(e){function t(n,o,r,s,l){function u(e){d["default"].bind(window,"mousemove",c),d["default"].bind(window,"mouseup",f),c(e)}function c(e){e.preventDefault();var t=d["default"].getOffset(h.__background),n=d["default"].getWidth(h.__background);return h.setValue(a(e.clientX,t.left,t.left+n,h.__min,h.__max)),!1}function f(){d["default"].unbind(window,"mousemove",c),d["default"].unbind(window,"mouseup",f),h.__onFinishChange&&h.__onFinishChange.call(h,h.getValue())}i(this,t),e.call(this,n,o,{min:r,max:s,step:l});var h=this;this.__background=document.createElement("div"),this.__foreground=document.createElement("div"),d["default"].bind(this.__background,"mousedown",u),d["default"].addClass(this.__background,"slider"),d["default"].addClass(this.__foreground,"slider-fg"),this.updateDisplay(),this.__background.appendChild(this.__foreground),this.domElement.appendChild(this.__background);
}return r(t,e),t.prototype.updateDisplay=function(){var t=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*t+"%",e.prototype.updateDisplay.call(this)},t}(l["default"]);m.useDefaultStyles=function(){f["default"].inject(_["default"])},t["default"]=m,e.exports=t["default"]},function(e,t){"use strict";e.exports={load:function(e,t){var n=t||document,o=n.createElement("link");o.type="text/css",o.rel="stylesheet",o.href=e,n.getElementsByTagName("head")[0].appendChild(o)},inject:function(e,t){var n=t||document,o=document.createElement("style");o.type="text/css",o.innerHTML=e,n.getElementsByTagName("head")[0].appendChild(o)}}},function(e,t,n){var o=n(17);"string"==typeof o&&(o=[[e.id,o,""]]);n(19)(o,{});o.locals&&(e.exports=o.locals)},function(e,t,n){t=e.exports=n(18)(),t.push([e.id,".slider{box-shadow:inset 0 2px 4px rgba(0,0,0,.15);height:1em;border-radius:1em;background-color:#eee;padding:0 .5em;overflow:hidden}.slider-fg{padding:1px 0 2px;background-color:#aaa;height:1em;margin-left:-.5em;padding-right:.5em;border-radius:1em 0 0 1em}.slider-fg:after{display:inline-block;border-radius:1em;background-color:#fff;border:1px solid #aaa;content:'';float:right;margin-right:-1em;margin-top:-1px;height:.9em;width:.9em}",""])},function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t];n[2]?e.push("@media "+n[2]+"{"+n[1]+"}"):e.push(n[1])}return e.join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var o={},i=0;i<this.length;i++){var r=this[i][0];"number"==typeof r&&(o[r]=!0)}for(i=0;i<t.length;i++){var a=t[i];"number"==typeof a[0]&&o[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),e.push(a))}},e}},function(e,t,n){function o(e,t){for(var n=0;n<e.length;n++){var o=e[n],i=c[o.id];if(i){i.refs++;for(var r=0;r<i.parts.length;r++)i.parts[r](o.parts[r]);for(;r<o.parts.length;r++)i.parts.push(s(o.parts[r],t))}else{for(var a=[],r=0;r<o.parts.length;r++)a.push(s(o.parts[r],t));c[o.id]={id:o.id,refs:1,parts:a}}}}function i(e){for(var t=[],n={},o=0;o<e.length;o++){var i=e[o],r=i[0],a=i[1],s=i[2],l=i[3],u={css:a,media:s,sourceMap:l};n[r]?n[r].parts.push(u):t.push(n[r]={id:r,parts:[u]})}return t}function r(){var e=document.createElement("style"),t=p();return e.type="text/css",t.appendChild(e),e}function a(){var e=document.createElement("link"),t=p();return e.rel="stylesheet",t.appendChild(e),e}function s(e,t){var n,o,i;if(t.singleton){var s=m++;n=_||(_=r()),o=l.bind(null,n,s,!1),i=l.bind(null,n,s,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=a(),o=d.bind(null,n),i=function(){n.parentNode.removeChild(n),n.href&&URL.revokeObjectURL(n.href)}):(n=r(),o=u.bind(null,n),i=function(){n.parentNode.removeChild(n)});return o(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;o(e=t)}else i()}}function l(e,t,n,o){var i=n?"":o.css;if(e.styleSheet)e.styleSheet.cssText=g(t,i);else{var r=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(r,a[t]):e.appendChild(r)}}function u(e,t){var n=t.css,o=t.media;t.sourceMap;if(o&&e.setAttribute("media",o),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function d(e,t){var n=t.css,o=(t.media,t.sourceMap);o&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var i=new Blob([n],{type:"text/css"}),r=e.href;e.href=URL.createObjectURL(i),r&&URL.revokeObjectURL(r)}var c={},f=function(e){var t;return function(){return"undefined"==typeof t&&(t=e.apply(this,arguments)),t}},h=f(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),p=f(function(){return document.head||document.getElementsByTagName("head")[0]}),_=null,m=0;e.exports=function(e,t){t=t||{},"undefined"==typeof t.singleton&&(t.singleton=h());var n=i(e);return o(n,t),function(e){for(var r=[],a=0;a<n.length;a++){var s=n[a],l=c[s.id];l.refs--,r.push(l)}if(e){var u=i(e);o(u,t)}for(var a=0;a<r.length;a++){var l=r[a];if(0===l.refs){for(var d=0;d<l.parts.length;d++)l.parts[d]();delete c[l.id]}}}};var g=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var a=n(7),s=o(a),l=n(9),u=o(l),d=n(5),c=(o(d),function(e){function t(n,o,r){i(this,t),e.call(this,n,o);var a=this;this.__button=document.createElement("div"),this.__button.innerHTML=void 0===r?"Fire":r,u["default"].bind(this.__button,"click",function(e){return e.preventDefault(),a.fire(),!1}),u["default"].addClass(this.__button,"button"),this.domElement.appendChild(this.__button)}return r(t,e),t.prototype.fire=function(){this.__onChange&&this.__onChange.call(this),this.getValue().call(this.object),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue())},t}(s["default"]));t["default"]=c,e.exports=t["default"]},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t,n,o){e.style.background="",g["default"].each(v,function(i){e.style.cssText+="background: "+i+"linear-gradient("+t+", "+n+" 0%, "+o+" 100%); "})}function s(e){e.style.background="",e.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",e.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",e.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",e.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",e.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"}t.__esModule=!0;var l=n(7),u=o(l),d=n(9),c=o(d),f=n(2),h=o(f),p=n(3),_=o(p),m=n(5),g=o(m),b=function(e){function t(n,o){function r(e){f(e),c["default"].bind(window,"mousemove",f),c["default"].bind(window,"mouseup",l)}function l(){c["default"].unbind(window,"mousemove",f),c["default"].unbind(window,"mouseup",l)}function u(){var e=_["default"](this.value);e!==!1?(m.__color.__state=e,m.setValue(m.__color.toOriginal())):this.value=m.__color.toString()}function d(){c["default"].unbind(window,"mousemove",p),c["default"].unbind(window,"mouseup",d)}function f(e){e.preventDefault();var t=c["default"].getWidth(m.__saturation_field),n=c["default"].getOffset(m.__saturation_field),o=(e.clientX-n.left+document.body.scrollLeft)/t,i=1-(e.clientY-n.top+document.body.scrollTop)/t;return i>1?i=1:0>i&&(i=0),o>1?o=1:0>o&&(o=0),m.__color.v=i,m.__color.s=o,m.setValue(m.__color.toOriginal()),!1}function p(e){e.preventDefault();var t=c["default"].getHeight(m.__hue_field),n=c["default"].getOffset(m.__hue_field),o=1-(e.clientY-n.top+document.body.scrollTop)/t;return o>1?o=1:0>o&&(o=0),m.__color.h=360*o,m.setValue(m.__color.toOriginal()),!1}i(this,t),e.call(this,n,o),this.__color=new h["default"](this.getValue()),this.__temp=new h["default"](0);var m=this;this.domElement=document.createElement("div"),c["default"].makeSelectable(this.domElement,!1),this.__selector=document.createElement("div"),this.__selector.className="selector",this.__saturation_field=document.createElement("div"),this.__saturation_field.className="saturation-field",this.__field_knob=document.createElement("div"),this.__field_knob.className="field-knob",this.__field_knob_border="2px solid ",this.__hue_knob=document.createElement("div"),this.__hue_knob.className="hue-knob",this.__hue_field=document.createElement("div"),this.__hue_field.className="hue-field",this.__input=document.createElement("input"),this.__input.type="text",this.__input_textShadow="0 1px 1px ",c["default"].bind(this.__input,"keydown",function(e){13===e.keyCode&&u.call(this)}),c["default"].bind(this.__input,"blur",u),c["default"].bind(this.__selector,"mousedown",function(e){c["default"].addClass(this,"drag").bind(window,"mouseup",function(e){c["default"].removeClass(m.__selector,"drag")})});var b=document.createElement("div");g["default"].extend(this.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),g["default"].extend(this.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:this.__field_knob_border+(this.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),g["default"].extend(this.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),g["default"].extend(this.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),g["default"].extend(b.style,{width:"100%",height:"100%",background:"none"}),a(b,"top","rgba(0,0,0,0)","#000"),g["default"].extend(this.__hue_field.style,{width:"15px",height:"100px",display:"inline-block",border:"1px solid #555",cursor:"ns-resize"}),s(this.__hue_field),g["default"].extend(this.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:this.__input_textShadow+"rgba(0,0,0,0.7)"}),c["default"].bind(this.__saturation_field,"mousedown",r),c["default"].bind(this.__field_knob,"mousedown",r),c["default"].bind(this.__hue_field,"mousedown",function(e){p(e),c["default"].bind(window,"mousemove",p),c["default"].bind(window,"mouseup",d)}),this.__saturation_field.appendChild(b),this.__selector.appendChild(this.__field_knob),this.__selector.appendChild(this.__saturation_field),this.__selector.appendChild(this.__hue_field),this.__hue_field.appendChild(this.__hue_knob),this.domElement.appendChild(this.__input),this.domElement.appendChild(this.__selector),this.updateDisplay()}return r(t,e),t.prototype.updateDisplay=function(){var e=_["default"](this.getValue());if(e!==!1){var t=!1;g["default"].each(h["default"].COMPONENTS,function(n){return g["default"].isUndefined(e[n])||g["default"].isUndefined(this.__color.__state[n])||e[n]===this.__color.__state[n]?void 0:(t=!0,{})},this),t&&g["default"].extend(this.__color.__state,e)}g["default"].extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var n=this.__color.v<.5||this.__color.s>.5?255:0,o=255-n;g["default"].extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toString(),border:this.__field_knob_border+"rgb("+n+","+n+","+n+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,a(this.__saturation_field,"left","#fff",this.__temp.toString()),g["default"].extend(this.__input.style,{backgroundColor:this.__input.value=this.__color.toString(),color:"rgb("+n+","+n+","+n+")",textShadow:this.__input_textShadow+"rgba("+o+","+o+","+o+",.7)"})},t}(u["default"]),v=["-moz-","-o-","-webkit-","-ms-",""];t["default"]=b,e.exports=t["default"]},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t,n){var o=document.createElement("li");return t&&o.appendChild(t),n?e.__ul.insertBefore(o,params.before):e.__ul.appendChild(o),e.onResize(),o}function r(e,t){var n=e.__preset_select[e.__preset_select.selectedIndex];t?n.innerHTML=n.value+"*":n.innerHTML=n.value}function a(e,t,n){if(n.__li=t,n.__gui=e,K["default"].extend(n,{options:function(t){return arguments.length>1?(n.remove(),l(e,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[K["default"].toArray(arguments)]})):K["default"].isArray(t)||K["default"].isObject(t)?(n.remove(),l(e,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[t]})):void 0},name:function(e){return n.__li.firstElementChild.firstElementChild.innerHTML=e,n},listen:function(){return n.__gui.listen(n),n},remove:function(){return n.__gui.remove(n),n}}),n instanceof j["default"])!function(){var e=new M["default"](n.object,n.property,{min:n.__min,max:n.__max,step:n.__step});K["default"].each(["updateDisplay","onChange","onFinishChange"],function(t){var o=n[t],i=e[t];n[t]=e[t]=function(){var t=Array.prototype.slice.call(arguments);return o.apply(n,t),i.apply(e,t)}}),G["default"].addClass(t,"has-slider"),n.domElement.insertBefore(e.domElement,n.domElement.firstElementChild)}();else if(n instanceof M["default"]){var o=function(t){return K["default"].isNumber(n.__min)&&K["default"].isNumber(n.__max)?(n.remove(),l(e,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[n.__min,n.__max,n.__step]})):t};n.min=K["default"].compose(o,n.min),n.max=K["default"].compose(o,n.max)}else n instanceof T["default"]?(G["default"].bind(t,"click",function(){G["default"].fakeEvent(n.__checkbox,"click")}),G["default"].bind(n.__checkbox,"click",function(e){e.stopPropagation()})):n instanceof R["default"]?(G["default"].bind(t,"click",function(){G["default"].fakeEvent(n.__button,"click")}),G["default"].bind(t,"mouseover",function(){G["default"].addClass(n.__button,"hover")}),G["default"].bind(t,"mouseout",function(){G["default"].removeClass(n.__button,"hover")})):n instanceof D["default"]&&(G["default"].addClass(t,"color"),n.updateDisplay=K["default"].compose(function(e){return t.style.borderLeftColor=n.__color.toString(),e},n.updateDisplay),n.updateDisplay());n.setValue=K["default"].compose(function(t){return e.getRoot().__preset_select&&n.isModified()&&r(e.getRoot(),!0),t},n.setValue)}function s(e,t){var n=e.getRoot(),o=n.__rememberedObjects.indexOf(t.object);if(-1!==o){var i=n.__rememberedObjectIndecesToControllers[o];if(void 0===i&&(i={},n.__rememberedObjectIndecesToControllers[o]=i),i[t.property]=t,n.load&&n.load.remembered){var r=n.load.remembered,a=void 0;if(r[e.preset])a=r[e.preset];else{if(!r[Z])return;a=r[Z]}if(a[o]&&void 0!==a[o][t.property]){var s=a[o][t.property];t.initialValue=s,t.setValue(s)}}}}function l(e,t,n,o){if(void 0===t[n])throw new Error('Object "'+t+'" has no property "'+n+'"');var r=void 0;if(o.color)r=new D["default"](t,n);else{var l=[t,n].concat(o.factoryArgs);r=A["default"].apply(e,l)}o.before instanceof k["default"]&&(o.before=o.before.__li),s(e,r),G["default"].addClass(r.domElement,"c");var u=document.createElement("span");G["default"].addClass(u,"property-name"),u.innerHTML=r.property;var d=document.createElement("div");d.appendChild(u),d.appendChild(r.domElement);var c=i(e,d,o.before);return G["default"].addClass(c,oe.CLASS_CONTROLLER_ROW),r instanceof D["default"]?G["default"].addClass(c,"color"):G["default"].addClass(c,typeof r.getValue()),a(e,c,r),e.__controllers.push(r),r}function u(e,t){return document.location.href+"."+t}function d(e,t,n){var o=document.createElement("option");o.innerHTML=t,o.value=t,e.__preset_select.appendChild(o),n&&(e.__preset_select.selectedIndex=e.__preset_select.length-1)}function c(e){e.style.display=gui.useLocalStorage?"block":"none"}function f(e){var t=e.__save_row=document.createElement("li");G["default"].addClass(e.domElement,"has-save"),e.__ul.insertBefore(t,e.__ul.firstChild),G["default"].addClass(t,"save-row");var n=document.createElement("span");n.innerHTML="&nbsp;",G["default"].addClass(n,"button gears");var o=document.createElement("span");o.innerHTML="Save",G["default"].addClass(o,"button"),G["default"].addClass(o,"save");var i=document.createElement("span");i.innerHTML="New",G["default"].addClass(i,"button"),G["default"].addClass(i,"save-as");var r=document.createElement("span");r.innerHTML="Revert",G["default"].addClass(r,"button"),G["default"].addClass(r,"revert");var a=e.__preset_select=document.createElement("select");e.load&&e.load.remembered?K["default"].each(e.load.remembered,function(t,n){d(e,n,n===e.preset)}):d(e,Z,!1),G["default"].bind(a,"change",function(){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].innerHTML=e.__preset_select[t].value;e.preset=this.value}),t.appendChild(a),t.appendChild(n),t.appendChild(o),t.appendChild(i),t.appendChild(r),$&&!function(){var t=document.getElementById("dg-local-explain"),n=document.getElementById("dg-local-storage"),o=document.getElementById("dg-save-locally");o.style.display="block","true"===localStorage.getItem(u(e,"isLocal"))&&n.setAttribute("checked","checked"),c(t),G["default"].bind(n,"change",function(){e.useLocalStorage=!e.useLocalStorage,c(t)})}();var s=document.getElementById("dg-new-constructor");G["default"].bind(s,"keydown",function(e){!e.metaKey||67!==e.which&&67!==e.keyCode||W.hide()}),G["default"].bind(n,"click",function(){s.innerHTML=JSON.stringify(e.getSaveObject(),void 0,2),W.show(),s.focus(),s.select()}),G["default"].bind(o,"click",function(){e.save()}),G["default"].bind(i,"click",function(){var t=prompt("Enter a new preset name.");t&&e.saveAs(t)}),G["default"].bind(r,"click",function(){e.revert()})}function h(e){function t(t){return t.preventDefault(),e.width+=i-t.clientX,e.onResize(),i=t.clientX,!1}function n(){G["default"].removeClass(e.__closeButton,oe.CLASS_DRAG),G["default"].unbind(window,"mousemove",t),G["default"].unbind(window,"mouseup",n)}function o(o){return o.preventDefault(),i=o.clientX,G["default"].addClass(e.__closeButton,oe.CLASS_DRAG),G["default"].bind(window,"mousemove",t),G["default"].bind(window,"mouseup",n),!1}var i=void 0;e.__resize_handle=document.createElement("div"),K["default"].extend(e.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"}),G["default"].bind(e.__resize_handle,"mousedown",o),G["default"].bind(e.__closeButton,"mousedown",o),e.domElement.insertBefore(e.__resize_handle,e.domElement.firstElementChild)}function p(e,t){e.domElement.style.width=t+"px",e.__save_row&&e.autoPlace&&(e.__save_row.style.width=t+"px"),e.__closeButton&&(e.__closeButton.style.width=t+"px")}function _(e,t){var n={};return K["default"].each(e.__rememberedObjects,function(o,i){var r={},a=e.__rememberedObjectIndecesToControllers[i];K["default"].each(a,function(e,n){r[n]=t?e.initialValue:e.getValue()}),n[i]=r}),n}function m(e){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].value===e.preset&&(e.__preset_select.selectedIndex=t)}function g(e){0!==e.length&&F["default"](function(){g(e)}),K["default"].each(e,function(e){e.updateDisplay()})}var b=n(15),v=o(b),y=n(23),x=o(y),w=n(24),E=o(w),C=n(26),A=o(C),S=n(7),k=o(S),O=n(8),T=o(O),L=n(20),R=o(L),N=n(13),M=o(N),B=n(14),j=o(B),P=n(10),V=(o(P),n(21)),D=o(V),H=n(27),F=o(H),I=n(28),U=o(I),z=n(9),G=o(z),X=n(5),K=o(X);v["default"].inject(E["default"]);var W,Y,J="dg",Q=72,q=20,Z="Default",$=function(){try{return"localStorage"in window&&null!==window.localStorage}catch(e){return!1}}(),ee=!0,te=!1,ne=[],oe=function ie(e){function t(){var e=n.getRoot();e.width+=1,K["default"].defer(function(){e.width-=1})}var n=this;this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),G["default"].addClass(this.domElement,J),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],e=e||{},e=K["default"].defaults(e,{autoPlace:!0,width:ie.DEFAULT_WIDTH}),e=K["default"].defaults(e,{resizable:e.autoPlace,hideable:e.autoPlace}),K["default"].isUndefined(e.load)?e.load={preset:Z}:e.preset&&(e.load.preset=e.preset),K["default"].isUndefined(e.parent)&&e.hideable&&ne.push(this),e.resizable=K["default"].isUndefined(e.parent)&&e.resizable,e.autoPlace&&K["default"].isUndefined(e.scrollable)&&(e.scrollable=!0);var o,r=$&&"true"===localStorage.getItem(u(this,"isLocal"));if(Object.defineProperties(this,{parent:{get:function(){return e.parent}},scrollable:{get:function(){return e.scrollable}},autoPlace:{get:function(){return e.autoPlace}},preset:{get:function(){return n.parent?n.getRoot().preset:e.load.preset},set:function(t){n.parent?n.getRoot().preset=t:e.load.preset=t,m(this),n.revert()}},width:{get:function(){return e.width},set:function(t){e.width=t,p(n,t)}},name:{get:function(){return e.name},set:function(t){e.name=t,s&&(s.innerHTML=e.name)}},closed:{get:function(){return e.closed},set:function(t){e.closed=t,e.closed?G["default"].addClass(n.__ul,ie.CLASS_CLOSED):G["default"].removeClass(n.__ul,ie.CLASS_CLOSED),this.onResize(),n.__closeButton&&(n.__closeButton.innerHTML=t?ie.TEXT_OPEN:ie.TEXT_CLOSED)}},load:{get:function(){return e.load}},useLocalStorage:{get:function(){return r},set:function(e){$&&(r=e,e?G["default"].bind(window,"unload",o):G["default"].unbind(window,"unload",o),localStorage.setItem(u(n,"isLocal"),e))}}}),K["default"].isUndefined(e.parent)){if(e.closed=!1,G["default"].addClass(this.domElement,ie.CLASS_MAIN),G["default"].makeSelectable(this.domElement,!1),$&&r){n.useLocalStorage=!0;var a=localStorage.getItem(u(this,"gui"));a&&(e.load=JSON.parse(a))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=ie.TEXT_CLOSED,G["default"].addClass(this.__closeButton,ie.CLASS_CLOSE_BUTTON),this.domElement.appendChild(this.__closeButton),G["default"].bind(this.__closeButton,"click",function(){n.closed=!n.closed})}else{void 0===e.closed&&(e.closed=!0);var s=document.createTextNode(e.name);G["default"].addClass(s,"controller-name");var l=i(n,s),d=function(e){return e.preventDefault(),n.closed=!n.closed,!1};G["default"].addClass(this.__ul,ie.CLASS_CLOSED),G["default"].addClass(l,"title"),G["default"].bind(l,"click",d),e.closed||(this.closed=!1)}e.autoPlace&&(K["default"].isUndefined(e.parent)&&(ee&&(Y=document.createElement("div"),G["default"].addClass(Y,J),G["default"].addClass(Y,ie.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(Y),ee=!1),Y.appendChild(this.domElement),G["default"].addClass(this.domElement,ie.CLASS_AUTO_PLACE)),this.parent||p(n,e.width)),G["default"].bind(window,"resize",function(){n.onResize()}),G["default"].bind(this.__ul,"webkitTransitionEnd",function(){n.onResize()}),G["default"].bind(this.__ul,"transitionend",function(){n.onResize()}),G["default"].bind(this.__ul,"oTransitionEnd",function(){n.onResize()}),this.onResize(),e.resizable&&h(this),o=function(){$&&"true"===localStorage.getItem(u(n,"isLocal"))&&localStorage.setItem(u(n,"gui"),JSON.stringify(n.getSaveObject()))},this.saveToLocalStorageIfPossible=o;n.getRoot();e.parent||t()};oe.toggleHide=function(){te=!te,K["default"].each(ne,function(e){e.domElement.style.zIndex=te?-999:999,e.domElement.style.opacity=te?0:1})},oe.CLASS_AUTO_PLACE="a",oe.CLASS_AUTO_PLACE_CONTAINER="ac",oe.CLASS_MAIN="main",oe.CLASS_CONTROLLER_ROW="cr",oe.CLASS_TOO_TALL="taller-than-window",oe.CLASS_CLOSED="closed",oe.CLASS_CLOSE_BUTTON="close-button",oe.CLASS_DRAG="drag",oe.DEFAULT_WIDTH=245,oe.TEXT_CLOSED="Close Controls",oe.TEXT_OPEN="Open Controls",G["default"].bind(window,"keydown",function(e){"text"===document.activeElement.type||e.which!==Q&&e.keyCode!=Q||oe.toggleHide()},!1),K["default"].extend(oe.prototype,{add:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,t){return l(this,e,t,{factoryArgs:Array.prototype.slice.call(arguments,2)})}),addColor:function(e,t){return l(this,e,t,{color:!0})},remove:function(e){this.__ul.removeChild(e.__li),this.__controllers.splice(this.__controllers.indexOf(e),1);var t=this;K["default"].defer(function(){t.onResize()})},destroy:function(){this.autoPlace&&Y.removeChild(this.domElement)},addFolder:function(e){if(void 0!==this.__folders[e])throw new Error('You already have a folder in this GUI by the name "'+e+'"');var t={name:e,parent:this};t.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[e]&&(t.closed=this.load.folders[e].closed,t.load=this.load.folders[e]);var n=new oe(t);this.__folders[e]=n;var o=i(this,n.domElement);return G["default"].addClass(o,"folder"),n},open:function(){this.closed=!1},close:function(){this.closed=!0},onResize:function(){var e=this.getRoot();if(e.scrollable){var t=G["default"].getOffset(e.__ul).top,n=0;K["default"].each(e.__ul.childNodes,function(t){e.autoPlace&&t===e.__save_row||(n+=G["default"].getHeight(t))}),window.innerHeight-t-q<n?(G["default"].addClass(e.domElement,oe.CLASS_TOO_TALL),e.__ul.style.height=window.innerHeight-t-q+"px"):(G["default"].removeClass(e.domElement,oe.CLASS_TOO_TALL),e.__ul.style.height="auto")}e.__resize_handle&&K["default"].defer(function(){e.__resize_handle.style.height=e.__ul.offsetHeight+"px"}),e.__closeButton&&(e.__closeButton.style.width=e.width+"px")},remember:function(){if(K["default"].isUndefined(W)&&(W=new U["default"],W.domElement.innerHTML=x["default"]),this.parent)throw new Error("You can only call remember on a top level GUI.");var e=this;K["default"].each(Array.prototype.slice.call(arguments),function(t){0==e.__rememberedObjects.length&&f(e),-1==e.__rememberedObjects.indexOf(t)&&e.__rememberedObjects.push(t)}),this.autoPlace&&p(this,this.width)},getRoot:function(){for(var e=this;e.parent;)e=e.parent;return e},getSaveObject:function(){var e=this.load;return e.closed=this.closed,this.__rememberedObjects.length>0&&(e.preset=this.preset,e.remembered||(e.remembered={}),e.remembered[this.preset]=_(this)),e.folders={},K["default"].each(this.__folders,function(t,n){e.folders[n]=t.getSaveObject()}),e},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=_(this),r(this,!1),this.saveToLocalStorageIfPossible()},saveAs:function(e){this.load.remembered||(this.load.remembered={},this.load.remembered[Z]=_(this,!0)),this.load.remembered[e]=_(this),this.preset=e,d(this,e,!0),this.saveToLocalStorageIfPossible()},revert:function(e){K["default"].each(this.__controllers,function(t){this.getRoot().load.remembered?s(e||this.getRoot(),t):t.setValue(t.initialValue)},this),K["default"].each(this.__folders,function(e){e.revert(e)}),e||r(this.getRoot(),!1)},listen:function(e){var t=0==this.__listening.length;this.__listening.push(e),t&&g(this.__listening)}}),e.exports=oe},function(e,t){e.exports='<div id=dg-save class="dg dialogue">Here\'s the new load parameter for your <code>GUI</code>\'s constructor:<textarea id=dg-new-constructor></textarea><div id=dg-save-locally><input id=dg-local-storage type="checkbox"> Automatically save values to <code>localStorage</code> on exit.<div id=dg-local-explain>The values saved to <code>localStorage</code> will override those passed to <code>dat.GUI</code>\'s constructor. This makes it easier to work incrementally, but <code>localStorage</code> is fragile, and your friends may not see the same values you do.</div></div></div>'},function(e,t,n){var o=n(25);"string"==typeof o&&(o=[[e.id,o,""]]);n(19)(o,{});o.locals&&(e.exports=o.locals)},function(e,t,n){t=e.exports=n(18)(),t.push([e.id,".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1!important}.dg.main .close-button.drag,.dg.main:hover .close-button{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;transition:opacity .1s linear;border:0;position:absolute;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-x:hidden}.dg.a.has-save>ul{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{position:fixed;top:0;z-index:1002}.dg li{-webkit-transition:height .1s ease-out;transition:height .1s ease-out}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;overflow:hidden;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid transparent}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:9px}.dg .c select{margin-top:5px}.dg .cr.boolean,.dg .cr.boolean *,.dg .cr.function,.dg .cr.function *,.dg .cr.function .property-name{cursor:pointer}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco,monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:9pt 0;display:block;width:440px;overflow-y:scroll;height:75pt;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande',sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:81pt}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:1pc;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid hsla(0,0%,100%,.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2fa1d6}.dg .cr.number input[type=text]{color:#2fa1d6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.boolean:hover,.dg .cr.function:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:0}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2fa1d6}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}",""]);
},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var i=n(10),r=o(i),a=n(13),s=o(a),l=n(14),u=o(l),d=n(11),c=o(d),f=n(20),h=o(f),p=n(8),_=o(p),m=n(5),g=o(m),b=function(e,t){var n=e[t];return g["default"].isArray(arguments[2])||g["default"].isObject(arguments[2])?new r["default"](e,t,arguments[2]):g["default"].isNumber(n)?g["default"].isNumber(arguments[2])&&g["default"].isNumber(arguments[3])?g["default"].isNumber(arguments[4])?new u["default"](e,t,arguments[2],arguments[3],arguments[4]):new u["default"](e,t,arguments[2],arguments[3]):new s["default"](e,t,{min:arguments[2],max:arguments[3]}):g["default"].isString(n)?new c["default"](e,t):g["default"].isFunction(n)?new h["default"](e,t,""):g["default"].isBoolean(n)?new _["default"](e,t):void 0};t["default"]=b,e.exports=t["default"]},function(e,t){"use strict";t.__esModule=!0,t["default"]=function(){function e(e){window.setTimeout(e,1e3/60)}return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||e},e.exports=t["default"]},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var r=n(9),a=o(r),s=n(5),l=o(s),u=function(){function e(){i(this,e),this.backgroundElement=document.createElement("div"),l["default"].extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear",transition:"opacity 0.2s linear"}),a["default"].makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),l["default"].extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear",transition:"transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var t=this;a["default"].bind(this.backgroundElement,"click",function(){t.hide()})}return e.prototype.show=function(){var e=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),l["default"].defer(function(){e.backgroundElement.style.opacity=1,e.domElement.style.opacity=1,e.domElement.style.webkitTransform="scale(1)"})},e.prototype.hide=function t(){var e=this,t=function n(){e.domElement.style.display="none",e.backgroundElement.style.display="none",a["default"].unbind(e.domElement,"webkitTransitionEnd",n),a["default"].unbind(e.domElement,"transitionend",n),a["default"].unbind(e.domElement,"oTransitionEnd",n)};a["default"].bind(this.domElement,"webkitTransitionEnd",t),a["default"].bind(this.domElement,"transitionend",t),a["default"].bind(this.domElement,"oTransitionEnd",t),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"},e.prototype.layout=function(){this.domElement.style.left=window.innerWidth/2-a["default"].getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-a["default"].getHeight(this.domElement)/2+"px"},e}();t["default"]=u,e.exports=t["default"]}])})},{}],8:[function(require,module,exports){!function(name,definition){if(typeof module!="undefined")module.exports=definition();else if(typeof define=="function"&&typeof define.amd=="object")define(definition);else this[name]=definition()}("domready",function(){var fns=[],listener,doc=document,hack=doc.documentElement.doScroll,domContentLoaded="DOMContentLoaded",loaded=(hack?/^loaded|^c/:/^loaded|^i|^c/).test(doc.readyState);if(!loaded)doc.addEventListener(domContentLoaded,listener=function(){doc.removeEventListener(domContentLoaded,listener);loaded=1;while(listener=fns.shift())listener()});return function(fn){loaded?setTimeout(fn,0):fns.push(fn)}})},{}],9:[function(require,module,exports){function EventEmitter(){this._events=this._events||{};this._maxListeners=this._maxListeners||undefined}module.exports=EventEmitter;EventEmitter.EventEmitter=EventEmitter;EventEmitter.prototype._events=undefined;EventEmitter.prototype._maxListeners=undefined;EventEmitter.defaultMaxListeners=10;EventEmitter.prototype.setMaxListeners=function(n){if(!isNumber(n)||n<0||isNaN(n))throw TypeError("n must be a positive number");this._maxListeners=n;return this};EventEmitter.prototype.emit=function(type){var er,handler,len,args,i,listeners;if(!this._events)this._events={};if(type==="error"){if(!this._events.error||isObject(this._events.error)&&!this._events.error.length){er=arguments[1];if(er instanceof Error){throw er}else{var err=new Error('Uncaught, unspecified "error" event. ('+er+")");err.context=er;throw err}}}handler=this._events[type];if(isUndefined(handler))return false;if(isFunction(handler)){switch(arguments.length){case 1:handler.call(this);break;case 2:handler.call(this,arguments[1]);break;case 3:handler.call(this,arguments[1],arguments[2]);break;default:args=Array.prototype.slice.call(arguments,1);handler.apply(this,args)}}else if(isObject(handler)){args=Array.prototype.slice.call(arguments,1);listeners=handler.slice();len=listeners.length;for(i=0;i<len;i++)listeners[i].apply(this,args)}return true};EventEmitter.prototype.addListener=function(type,listener){var m;if(!isFunction(listener))throw TypeError("listener must be a function");if(!this._events)this._events={};if(this._events.newListener)this.emit("newListener",type,isFunction(listener.listener)?listener.listener:listener);if(!this._events[type])this._events[type]=listener;else if(isObject(this._events[type]))this._events[type].push(listener);else this._events[type]=[this._events[type],listener];if(isObject(this._events[type])&&!this._events[type].warned){if(!isUndefined(this._maxListeners)){m=this._maxListeners}else{m=EventEmitter.defaultMaxListeners}if(m&&m>0&&this._events[type].length>m){this._events[type].warned=true;console.error("(node) warning: possible EventEmitter memory "+"leak detected. %d listeners added. "+"Use emitter.setMaxListeners() to increase limit.",this._events[type].length);if(typeof console.trace==="function"){console.trace()}}}return this};EventEmitter.prototype.on=EventEmitter.prototype.addListener;EventEmitter.prototype.once=function(type,listener){if(!isFunction(listener))throw TypeError("listener must be a function");var fired=false;function g(){this.removeListener(type,g);if(!fired){fired=true;listener.apply(this,arguments)}}g.listener=listener;this.on(type,g);return this};EventEmitter.prototype.removeListener=function(type,listener){var list,position,length,i;if(!isFunction(listener))throw TypeError("listener must be a function");if(!this._events||!this._events[type])return this;list=this._events[type];length=list.length;position=-1;if(list===listener||isFunction(list.listener)&&list.listener===listener){delete this._events[type];if(this._events.removeListener)this.emit("removeListener",type,listener)}else if(isObject(list)){for(i=length;i-- >0;){if(list[i]===listener||list[i].listener&&list[i].listener===listener){position=i;break}}if(position<0)return this;if(list.length===1){list.length=0;delete this._events[type]}else{list.splice(position,1)}if(this._events.removeListener)this.emit("removeListener",type,listener)}return this};EventEmitter.prototype.removeAllListeners=function(type){var key,listeners;if(!this._events)return this;if(!this._events.removeListener){if(arguments.length===0)this._events={};else if(this._events[type])delete this._events[type];return this}if(arguments.length===0){for(key in this._events){if(key==="removeListener")continue;this.removeAllListeners(key)}this.removeAllListeners("removeListener");this._events={};return this}listeners=this._events[type];if(isFunction(listeners)){this.removeListener(type,listeners)}else if(listeners){while(listeners.length)this.removeListener(type,listeners[listeners.length-1])}delete this._events[type];return this};EventEmitter.prototype.listeners=function(type){var ret;if(!this._events||!this._events[type])ret=[];else if(isFunction(this._events[type]))ret=[this._events[type]];else ret=this._events[type].slice();return ret};EventEmitter.prototype.listenerCount=function(type){if(this._events){var evlistener=this._events[type];if(isFunction(evlistener))return 1;else if(evlistener)return evlistener.length}return 0};EventEmitter.listenerCount=function(emitter,type){return emitter.listenerCount(type)};function isFunction(arg){return typeof arg==="function"}function isNumber(arg){return typeof arg==="number"}function isObject(arg){return typeof arg==="object"&&arg!==null}function isUndefined(arg){return arg===void 0}},{}],10:[function(require,module,exports){"use strict";function Url(){this._protocol=null;this._href="";this._port=-1;this._query=null;this.auth=null;this.slashes=null;this.host=null;this.hostname=null;this.hash=null;this.search=null;this.pathname=null;this._prependSlash=false}var querystring=require("querystring");Url.queryString=querystring;Url.prototype.parse=function Url$parse(str,parseQueryString,hostDenotesSlash,disableAutoEscapeChars){if(typeof str!=="string"){throw new TypeError("Parameter 'url' must be a string, not "+typeof str)}var start=0;var end=str.length-1;while(str.charCodeAt(start)<=32)start++;while(str.charCodeAt(end)<=32)end--;start=this._parseProtocol(str,start,end);if(this._protocol!=="javascript"){start=this._parseHost(str,start,end,hostDenotesSlash);var proto=this._protocol;if(!this.hostname&&(this.slashes||proto&&!slashProtocols[proto])){this.hostname=this.host=""}}if(start<=end){var ch=str.charCodeAt(start);if(ch===47||ch===92){this._parsePath(str,start,end,disableAutoEscapeChars)}else if(ch===63){this._parseQuery(str,start,end,disableAutoEscapeChars)}else if(ch===35){this._parseHash(str,start,end,disableAutoEscapeChars)}else if(this._protocol!=="javascript"){this._parsePath(str,start,end,disableAutoEscapeChars)}else{this.pathname=str.slice(start,end+1)}}if(!this.pathname&&this.hostname&&this._slashProtocols[this._protocol]){this.pathname="/"}if(parseQueryString){var search=this.search;if(search==null){search=this.search=""}if(search.charCodeAt(0)===63){search=search.slice(1)}this.query=Url.queryString.parse(search)}};Url.prototype.resolve=function Url$resolve(relative){return this.resolveObject(Url.parse(relative,false,true)).format()};Url.prototype.format=function Url$format(){var auth=this.auth||"";if(auth){auth=encodeURIComponent(auth);auth=auth.replace(/%3A/i,":");auth+="@"}var protocol=this.protocol||"";var pathname=this.pathname||"";var hash=this.hash||"";var search=this.search||"";var query="";var hostname=this.hostname||"";var port=this.port||"";var host=false;var scheme="";var q=this.query;if(q&&typeof q==="object"){query=Url.queryString.stringify(q)}if(!search){search=query?"?"+query:""}if(protocol&&protocol.charCodeAt(protocol.length-1)!==58)protocol+=":";if(this.host){host=auth+this.host}else if(hostname){var ip6=hostname.indexOf(":")>-1;if(ip6)hostname="["+hostname+"]";host=auth+hostname+(port?":"+port:"")}var slashes=this.slashes||(!protocol||slashProtocols[protocol])&&host!==false;if(protocol)scheme=protocol+(slashes?"//":"");else if(slashes)scheme="//";if(slashes&&pathname&&pathname.charCodeAt(0)!==47){pathname="/"+pathname}if(search&&search.charCodeAt(0)!==63)search="?"+search;if(hash&&hash.charCodeAt(0)!==35)hash="#"+hash;pathname=escapePathName(pathname);search=escapeSearch(search);return scheme+(host===false?"":host)+pathname+search+hash};Url.prototype.resolveObject=function Url$resolveObject(relative){if(typeof relative==="string")relative=Url.parse(relative,false,true);var result=this._clone();result.hash=relative.hash;if(!relative.href){result._href="";return result}if(relative.slashes&&!relative._protocol){relative._copyPropsTo(result,true);if(slashProtocols[result._protocol]&&result.hostname&&!result.pathname){result.pathname="/"}result._href="";return result}if(relative._protocol&&relative._protocol!==result._protocol){if(!slashProtocols[relative._protocol]){relative._copyPropsTo(result,false);result._href="";return result}result._protocol=relative._protocol;if(!relative.host&&relative._protocol!=="javascript"){var relPath=(relative.pathname||"").split("/");while(relPath.length&&!(relative.host=relPath.shift()));if(!relative.host)relative.host="";if(!relative.hostname)relative.hostname="";if(relPath[0]!=="")relPath.unshift("");if(relPath.length<2)relPath.unshift("");result.pathname=relPath.join("/")}else{result.pathname=relative.pathname}result.search=relative.search;result.host=relative.host||"";result.auth=relative.auth;result.hostname=relative.hostname||relative.host;result._port=relative._port;result.slashes=result.slashes||relative.slashes;result._href="";return result}var isSourceAbs=result.pathname&&result.pathname.charCodeAt(0)===47;var isRelAbs=relative.host||relative.pathname&&relative.pathname.charCodeAt(0)===47;var mustEndAbs=isRelAbs||isSourceAbs||result.host&&relative.pathname;var removeAllDots=mustEndAbs;var srcPath=result.pathname&&result.pathname.split("/")||[];var relPath=relative.pathname&&relative.pathname.split("/")||[];var psychotic=result._protocol&&!slashProtocols[result._protocol];if(psychotic){result.hostname="";result._port=-1;if(result.host){if(srcPath[0]==="")srcPath[0]=result.host;else srcPath.unshift(result.host)}result.host="";if(relative._protocol){relative.hostname="";relative._port=-1;if(relative.host){if(relPath[0]==="")relPath[0]=relative.host;else relPath.unshift(relative.host)}relative.host=""}mustEndAbs=mustEndAbs&&(relPath[0]===""||srcPath[0]==="")}if(isRelAbs){result.host=relative.host?relative.host:result.host;result.hostname=relative.hostname?relative.hostname:result.hostname;result.search=relative.search;srcPath=relPath}else if(relPath.length){if(!srcPath)srcPath=[];srcPath.pop();srcPath=srcPath.concat(relPath);result.search=relative.search}else if(relative.search){if(psychotic){result.hostname=result.host=srcPath.shift();var authInHost=result.host&&result.host.indexOf("@")>0?result.host.split("@"):false;if(authInHost){result.auth=authInHost.shift();result.host=result.hostname=authInHost.shift()}}result.search=relative.search;result._href="";return result}if(!srcPath.length){result.pathname=null;result._href="";return result}var last=srcPath.slice(-1)[0];var hasTrailingSlash=(result.host||relative.host)&&(last==="."||last==="..")||last==="";var up=0;for(var i=srcPath.length;i>=0;i--){last=srcPath[i];if(last==="."){srcPath.splice(i,1)}else if(last===".."){srcPath.splice(i,1);up++}else if(up){srcPath.splice(i,1);up--}}if(!mustEndAbs&&!removeAllDots){for(;up--;up){srcPath.unshift("..")}}if(mustEndAbs&&srcPath[0]!==""&&(!srcPath[0]||srcPath[0].charCodeAt(0)!==47)){srcPath.unshift("")}if(hasTrailingSlash&&srcPath.join("/").substr(-1)!=="/"){srcPath.push("")}var isAbsolute=srcPath[0]===""||srcPath[0]&&srcPath[0].charCodeAt(0)===47;if(psychotic){result.hostname=result.host=isAbsolute?"":srcPath.length?srcPath.shift():"";var authInHost=result.host&&result.host.indexOf("@")>0?result.host.split("@"):false;if(authInHost){result.auth=authInHost.shift();result.host=result.hostname=authInHost.shift()}}mustEndAbs=mustEndAbs||result.host&&srcPath.length;if(mustEndAbs&&!isAbsolute){srcPath.unshift("")}result.pathname=srcPath.length===0?null:srcPath.join("/");result.auth=relative.auth||result.auth;result.slashes=result.slashes||relative.slashes;result._href="";return result};var punycode=require("punycode");Url.prototype._hostIdna=function Url$_hostIdna(hostname){return punycode.toASCII(hostname)};var escapePathName=Url.prototype._escapePathName=function Url$_escapePathName(pathname){if(!containsCharacter2(pathname,35,63)){return pathname}return _escapePath(pathname)};var escapeSearch=Url.prototype._escapeSearch=function Url$_escapeSearch(search){if(!containsCharacter2(search,35,-1))return search;return _escapeSearch(search)};Url.prototype._parseProtocol=function Url$_parseProtocol(str,start,end){var doLowerCase=false;var protocolCharacters=this._protocolCharacters;for(var i=start;i<=end;++i){var ch=str.charCodeAt(i);if(ch===58){var protocol=str.slice(start,i);if(doLowerCase)protocol=protocol.toLowerCase();this._protocol=protocol;return i+1}else if(protocolCharacters[ch]===1){if(ch<97)doLowerCase=true}else{return start}}return start};Url.prototype._parseAuth=function Url$_parseAuth(str,start,end,decode){var auth=str.slice(start,end+1);if(decode){auth=decodeURIComponent(auth)}this.auth=auth};Url.prototype._parsePort=function Url$_parsePort(str,start,end){var port=0;var hadChars=false;var validPort=true;for(var i=start;i<=end;++i){var ch=str.charCodeAt(i);if(48<=ch&&ch<=57){port=10*port+(ch-48);hadChars=true}else{validPort=false;if(ch===92||ch===47){validPort=true}break}}if(port===0&&!hadChars||!validPort){if(!validPort){this._port=-2}return 0}this._port=port;return i-start};Url.prototype._parseHost=function Url$_parseHost(str,start,end,slashesDenoteHost){var hostEndingCharacters=this._hostEndingCharacters;var first=str.charCodeAt(start);var second=str.charCodeAt(start+1);if((first===47||first===92)&&(second===47||second===92)){this.slashes=true;if(start===0){if(end<2)return start;var hasAuth=containsCharacter(str,64,2,hostEndingCharacters);if(!hasAuth&&!slashesDenoteHost){this.slashes=null;return start}}start+=2}else if(!this._protocol||slashProtocols[this._protocol]){return start}var doLowerCase=false;var idna=false;var hostNameStart=start;var hostNameEnd=end;var lastCh=-1;var portLength=0;var charsAfterDot=0;var authNeedsDecoding=false;var j=-1;for(var i=start;i<=end;++i){var ch=str.charCodeAt(i);if(ch===64){j=i}else if(ch===37){authNeedsDecoding=true}else if(hostEndingCharacters[ch]===1){break}}if(j>-1){this._parseAuth(str,start,j-1,authNeedsDecoding);start=hostNameStart=j+1}if(str.charCodeAt(start)===91){for(var i=start+1;i<=end;++i){var ch=str.charCodeAt(i);if(ch===93){if(str.charCodeAt(i+1)===58){portLength=this._parsePort(str,i+2,end)+1}var hostname=str.slice(start+1,i).toLowerCase();this.hostname=hostname;this.host=this._port>0?"["+hostname+"]:"+this._port:"["+hostname+"]";this.pathname="/";return i+portLength+1}}return start}for(var i=start;i<=end;++i){if(charsAfterDot>62){this.hostname=this.host=str.slice(start,i);return i}var ch=str.charCodeAt(i);if(ch===58){portLength=this._parsePort(str,i+1,end)+1;hostNameEnd=i-1;break}else if(ch<97){if(ch===46){charsAfterDot=-1}else if(65<=ch&&ch<=90){doLowerCase=true}else if(!(ch===45||ch===95||ch===43||48<=ch&&ch<=57)){if(hostEndingCharacters[ch]===0&&this._noPrependSlashHostEnders[ch]===0){this._prependSlash=true}hostNameEnd=i-1;break}}else if(ch>=123){if(ch<=126){if(this._noPrependSlashHostEnders[ch]===0){this._prependSlash=true}hostNameEnd=i-1;break}idna=true}lastCh=ch;charsAfterDot++}if(hostNameEnd+1!==start&&hostNameEnd-hostNameStart<=256){var hostname=str.slice(hostNameStart,hostNameEnd+1);if(doLowerCase)hostname=hostname.toLowerCase();if(idna)hostname=this._hostIdna(hostname);this.hostname=hostname;this.host=this._port>0?hostname+":"+this._port:hostname}return hostNameEnd+1+portLength};Url.prototype._copyPropsTo=function Url$_copyPropsTo(input,noProtocol){if(!noProtocol){input._protocol=this._protocol}input._href=this._href;input._port=this._port;input._prependSlash=this._prependSlash;input.auth=this.auth;input.slashes=this.slashes;input.host=this.host;input.hostname=this.hostname;input.hash=this.hash;input.search=this.search;input.pathname=this.pathname};Url.prototype._clone=function Url$_clone(){var ret=new Url;ret._protocol=this._protocol;ret._href=this._href;ret._port=this._port;ret._prependSlash=this._prependSlash;ret.auth=this.auth;ret.slashes=this.slashes;ret.host=this.host;ret.hostname=this.hostname;ret.hash=this.hash;ret.search=this.search;ret.pathname=this.pathname;return ret};Url.prototype._getComponentEscaped=function Url$_getComponentEscaped(str,start,end,isAfterQuery){var cur=start;var i=start;var ret="";var autoEscapeMap=isAfterQuery?this._afterQueryAutoEscapeMap:this._autoEscapeMap;for(;i<=end;++i){var ch=str.charCodeAt(i);var escaped=autoEscapeMap[ch];if(escaped!==""&&escaped!==undefined){if(cur<i)ret+=str.slice(cur,i);ret+=escaped;cur=i+1}}if(cur<i+1)ret+=str.slice(cur,i);return ret};Url.prototype._parsePath=function Url$_parsePath(str,start,end,disableAutoEscapeChars){var pathStart=start;var pathEnd=end;var escape=false;var autoEscapeCharacters=this._autoEscapeCharacters;var prePath=this._port===-2?"/:":"";for(var i=start;i<=end;++i){var ch=str.charCodeAt(i);if(ch===35){this._parseHash(str,i,end,disableAutoEscapeChars);pathEnd=i-1;break}else if(ch===63){this._parseQuery(str,i,end,disableAutoEscapeChars);pathEnd=i-1;break}else if(!disableAutoEscapeChars&&!escape&&autoEscapeCharacters[ch]===1){escape=true}}if(pathStart>pathEnd){this.pathname=prePath===""?"/":prePath;return}var path;if(escape){path=this._getComponentEscaped(str,pathStart,pathEnd,false)}else{path=str.slice(pathStart,pathEnd+1)}this.pathname=prePath===""?this._prependSlash?"/"+path:path:prePath+path};Url.prototype._parseQuery=function Url$_parseQuery(str,start,end,disableAutoEscapeChars){var queryStart=start;var queryEnd=end;var escape=false;var autoEscapeCharacters=this._autoEscapeCharacters;for(var i=start;i<=end;++i){var ch=str.charCodeAt(i);if(ch===35){this._parseHash(str,i,end,disableAutoEscapeChars);queryEnd=i-1;break}else if(!disableAutoEscapeChars&&!escape&&autoEscapeCharacters[ch]===1){escape=true}}if(queryStart>queryEnd){this.search="";return}var query;if(escape){query=this._getComponentEscaped(str,queryStart,queryEnd,true)}else{query=str.slice(queryStart,queryEnd+1)}this.search=query};Url.prototype._parseHash=function Url$_parseHash(str,start,end,disableAutoEscapeChars){if(start>end){this.hash="";return}this.hash=disableAutoEscapeChars?str.slice(start,end+1):this._getComponentEscaped(str,start,end,true)};Object.defineProperty(Url.prototype,"port",{get:function(){if(this._port>=0){return""+this._port}return null},set:function(v){if(v==null){this._port=-1}else{this._port=parseInt(v,10)}}});Object.defineProperty(Url.prototype,"query",{get:function(){var query=this._query;if(query!=null){return query}var search=this.search;if(search){if(search.charCodeAt(0)===63){search=search.slice(1)}if(search!==""){this._query=search;return search}}return search},set:function(v){this._query=v}});Object.defineProperty(Url.prototype,"path",{get:function(){var p=this.pathname||"";var s=this.search||"";if(p||s){return p+s}return p==null&&s?"/"+s:null},set:function(){}});Object.defineProperty(Url.prototype,"protocol",{get:function(){var proto=this._protocol;return proto?proto+":":proto},set:function(v){if(typeof v==="string"){var end=v.length-1;if(v.charCodeAt(end)===58){this._protocol=v.slice(0,end)}else{this._protocol=v}}else if(v==null){this._protocol=null}}});Object.defineProperty(Url.prototype,"href",{get:function(){var href=this._href;if(!href){href=this._href=this.format()}return href},set:function(v){this._href=v}});Url.parse=function Url$Parse(str,parseQueryString,hostDenotesSlash,disableAutoEscapeChars){if(str instanceof Url)return str;var ret=new Url;ret.parse(str,!!parseQueryString,!!hostDenotesSlash,!!disableAutoEscapeChars);return ret};Url.format=function Url$Format(obj){if(typeof obj==="string"){obj=Url.parse(obj)}if(!(obj instanceof Url)){return Url.prototype.format.call(obj)}return obj.format()};Url.resolve=function Url$Resolve(source,relative){return Url.parse(source,false,true).resolve(relative)};Url.resolveObject=function Url$ResolveObject(source,relative){if(!source)return relative;return Url.parse(source,false,true).resolveObject(relative)};function _escapePath(pathname){return pathname.replace(/[?#]/g,function(match){return encodeURIComponent(match)})}function _escapeSearch(search){return search.replace(/#/g,function(match){return encodeURIComponent(match)})}function containsCharacter(string,char1,fromIndex,stopCharacterTable){var len=string.length;for(var i=fromIndex;i<len;++i){var ch=string.charCodeAt(i);if(ch===char1){return true}else if(stopCharacterTable[ch]===1){return false}}return false}function containsCharacter2(string,char1,char2){for(var i=0,len=string.length;i<len;++i){var ch=string.charCodeAt(i);if(ch===char1||ch===char2)return true}return false}function makeAsciiTable(spec){var ret=new Uint8Array(128);spec.forEach(function(item){if(typeof item==="number"){ret[item]=1}else{var start=item[0];var end=item[1];for(var j=start;j<=end;++j){ret[j]=1}}});return ret}var autoEscape=["<",">",'"',"`"," ","\r","\n","	","{","}","|","\\","^","`","'"];var autoEscapeMap=new Array(128);for(var i=0,len=autoEscapeMap.length;i<len;++i){autoEscapeMap[i]=""}for(var i=0,len=autoEscape.length;i<len;++i){var c=autoEscape[i];var esc=encodeURIComponent(c);if(esc===c){esc=escape(c)}autoEscapeMap[c.charCodeAt(0)]=esc}var afterQueryAutoEscapeMap=autoEscapeMap.slice();autoEscapeMap[92]="/";var slashProtocols=Url.prototype._slashProtocols={http:true,https:true,gopher:true,file:true,ftp:true,"http:":true,"https:":true,"gopher:":true,"file:":true,"ftp:":true};function f(){}f.prototype=slashProtocols;Url.prototype._protocolCharacters=makeAsciiTable([[97,122],[65,90],46,43,45]);Url.prototype._hostEndingCharacters=makeAsciiTable([35,63,47,92]);Url.prototype._autoEscapeCharacters=makeAsciiTable(autoEscape.map(function(v){return v.charCodeAt(0)}));Url.prototype._noPrependSlashHostEnders=makeAsciiTable(["<",">","'","`"," ","\r","\n","	","{","}","|","^","`",'"',"%",";"].map(function(v){return v.charCodeAt(0)}));Url.prototype._autoEscapeMap=autoEscapeMap;Url.prototype._afterQueryAutoEscapeMap=afterQueryAutoEscapeMap;module.exports=Url;Url.replace=function Url$Replace(){require.cache.url={exports:Url}}},{punycode:32,querystring:35}],11:[function(require,module,exports){module.exports=identity;function identity(out){out[0]=1;out[1]=0;out[2]=0;out[3]=0;out[4]=0;out[5]=1;out[6]=0;out[7]=0;out[8]=0;out[9]=0;out[10]=1;out[11]=0;out[12]=0;out[13]=0;out[14]=0;out[15]=1;return out}},{}],12:[function(require,module,exports){module.exports=rotateY;function rotateY(out,a,rad){var s=Math.sin(rad),c=Math.cos(rad),a00=a[0],a01=a[1],a02=a[2],a03=a[3],a20=a[8],a21=a[9],a22=a[10],a23=a[11];if(a!==out){out[4]=a[4];out[5]=a[5];out[6]=a[6];out[7]=a[7];out[12]=a[12];out[13]=a[13];out[14]=a[14];out[15]=a[15]}out[0]=a00*c-a20*s;out[1]=a01*c-a21*s;out[2]=a02*c-a22*s;out[3]=a03*c-a23*s;out[8]=a00*s+a20*c;out[9]=a01*s+a21*c;out[10]=a02*s+a22*c;out[11]=a03*s+a23*c;return out}},{}],13:[function(require,module,exports){module.exports=rotateZ;function rotateZ(out,a,rad){var s=Math.sin(rad),c=Math.cos(rad),a00=a[0],a01=a[1],a02=a[2],a03=a[3],a10=a[4],a11=a[5],a12=a[6],a13=a[7];if(a!==out){out[8]=a[8];out[9]=a[9];out[10]=a[10];out[11]=a[11];out[12]=a[12];out[13]=a[13];out[14]=a[14];out[15]=a[15]}out[0]=a00*c+a10*s;out[1]=a01*c+a11*s;out[2]=a02*c+a12*s;out[3]=a03*c+a13*s;out[4]=a10*c-a00*s;out[5]=a11*c-a01*s;out[6]=a12*c-a02*s;out[7]=a13*c-a03*s;return out}},{}],14:[function(require,module,exports){exports.glMatrix=require("./gl-matrix/common.js");exports.mat2=require("./gl-matrix/mat2.js");exports.mat2d=require("./gl-matrix/mat2d.js");exports.mat3=require("./gl-matrix/mat3.js");exports.mat4=require("./gl-matrix/mat4.js");exports.quat=require("./gl-matrix/quat.js");exports.vec2=require("./gl-matrix/vec2.js");exports.vec3=require("./gl-matrix/vec3.js");exports.vec4=require("./gl-matrix/vec4.js")},{"./gl-matrix/common.js":15,"./gl-matrix/mat2.js":16,"./gl-matrix/mat2d.js":17,"./gl-matrix/mat3.js":18,"./gl-matrix/mat4.js":19,"./gl-matrix/quat.js":20,"./gl-matrix/vec2.js":21,"./gl-matrix/vec3.js":22,"./gl-matrix/vec4.js":23}],15:[function(require,module,exports){var glMatrix={};glMatrix.EPSILON=1e-6;glMatrix.ARRAY_TYPE=typeof Float32Array!=="undefined"?Float32Array:Array;glMatrix.RANDOM=Math.random;glMatrix.ENABLE_SIMD=false;glMatrix.SIMD_AVAILABLE=glMatrix.ARRAY_TYPE===Float32Array&&"SIMD"in this;glMatrix.USE_SIMD=glMatrix.ENABLE_SIMD&&glMatrix.SIMD_AVAILABLE;glMatrix.setMatrixArrayType=function(type){glMatrix.ARRAY_TYPE=type};var degree=Math.PI/180;glMatrix.toRadian=function(a){return a*degree};glMatrix.equals=function(a,b){return Math.abs(a-b)<=glMatrix.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))};module.exports=glMatrix},{}],16:[function(require,module,exports){var glMatrix=require("./common.js");var mat2={};mat2.create=function(){var out=new glMatrix.ARRAY_TYPE(4);out[0]=1;out[1]=0;out[2]=0;out[3]=1;return out};mat2.clone=function(a){var out=new glMatrix.ARRAY_TYPE(4);out[0]=a[0];out[1]=a[1];out[2]=a[2];out[3]=a[3];return out};mat2.copy=function(out,a){out[0]=a[0];out[1]=a[1];out[2]=a[2];out[3]=a[3];return out};mat2.identity=function(out){out[0]=1;out[1]=0;out[2]=0;out[3]=1;return out};mat2.fromValues=function(m00,m01,m10,m11){var out=new glMatrix.ARRAY_TYPE(4);out[0]=m00;out[1]=m01;out[2]=m10;out[3]=m11;return out};mat2.set=function(out,m00,m01,m10,m11){out[0]=m00;out[1]=m01;out[2]=m10;out[3]=m11;return out};mat2.transpose=function(out,a){if(out===a){var a1=a[1];out[1]=a[2];out[2]=a1}else{out[0]=a[0];out[1]=a[2];out[2]=a[1];out[3]=a[3]}return out};mat2.invert=function(out,a){var a0=a[0],a1=a[1],a2=a[2],a3=a[3],det=a0*a3-a2*a1;if(!det){return null}det=1/det;out[0]=a3*det;out[1]=-a1*det;out[2]=-a2*det;out[3]=a0*det;return out};mat2.adjoint=function(out,a){var a0=a[0];out[0]=a[3];out[1]=-a[1];out[2]=-a[2];out[3]=a0;return out};mat2.determinant=function(a){return a[0]*a[3]-a[2]*a[1]};mat2.multiply=function(out,a,b){var a0=a[0],a1=a[1],a2=a[2],a3=a[3];var b0=b[0],b1=b[1],b2=b[2],b3=b[3];out[0]=a0*b0+a2*b1;out[1]=a1*b0+a3*b1;out[2]=a0*b2+a2*b3;out[3]=a1*b2+a3*b3;return out};mat2.mul=mat2.multiply;mat2.rotate=function(out,a,rad){var a0=a[0],a1=a[1],a2=a[2],a3=a[3],s=Math.sin(rad),c=Math.cos(rad);out[0]=a0*c+a2*s;out[1]=a1*c+a3*s;out[2]=a0*-s+a2*c;out[3]=a1*-s+a3*c;return out};mat2.scale=function(out,a,v){var a0=a[0],a1=a[1],a2=a[2],a3=a[3],v0=v[0],v1=v[1];out[0]=a0*v0;out[1]=a1*v0;out[2]=a2*v1;out[3]=a3*v1;return out};mat2.fromRotation=function(out,rad){var s=Math.sin(rad),c=Math.cos(rad);out[0]=c;out[1]=s;out[2]=-s;out[3]=c;return out};mat2.fromScaling=function(out,v){out[0]=v[0];out[1]=0;out[2]=0;out[3]=v[1];return out};mat2.str=function(a){return"mat2("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"};mat2.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2))};mat2.LDU=function(L,D,U,a){L[2]=a[2]/a[0];U[0]=a[0];U[1]=a[1];U[3]=a[3]-L[2]*U[1];return[L,D,U]};mat2.add=function(out,a,b){out[0]=a[0]+b[0];out[1]=a[1]+b[1];out[2]=a[2]+b[2];out[3]=a[3]+b[3];return out};mat2.subtract=function(out,a,b){out[0]=a[0]-b[0];out[1]=a[1]-b[1];out[2]=a[2]-b[2];out[3]=a[3]-b[3];return out};mat2.sub=mat2.subtract;mat2.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]};mat2.equals=function(a,b){var a0=a[0],a1=a[1],a2=a[2],a3=a[3];var b0=b[0],b1=b[1],b2=b[2],b3=b[3];return Math.abs(a0-b0)<=glMatrix.EPSILON*Math.max(1,Math.abs(a0),Math.abs(b0))&&Math.abs(a1-b1)<=glMatrix.EPSILON*Math.max(1,Math.abs(a1),Math.abs(b1))&&Math.abs(a2-b2)<=glMatrix.EPSILON*Math.max(1,Math.abs(a2),Math.abs(b2))&&Math.abs(a3-b3)<=glMatrix.EPSILON*Math.max(1,Math.abs(a3),Math.abs(b3))};mat2.multiplyScalar=function(out,a,b){out[0]=a[0]*b;out[1]=a[1]*b;out[2]=a[2]*b;out[3]=a[3]*b;return out};mat2.multiplyScalarAndAdd=function(out,a,b,scale){out[0]=a[0]+b[0]*scale;out[1]=a[1]+b[1]*scale;out[2]=a[2]+b[2]*scale;out[3]=a[3]+b[3]*scale;return out};module.exports=mat2},{"./common.js":15}],17:[function(require,module,exports){var glMatrix=require("./common.js");var mat2d={};mat2d.create=function(){var out=new glMatrix.ARRAY_TYPE(6);out[0]=1;out[1]=0;out[2]=0;out[3]=1;out[4]=0;out[5]=0;return out};mat2d.clone=function(a){var out=new glMatrix.ARRAY_TYPE(6);out[0]=a[0];out[1]=a[1];out[2]=a[2];out[3]=a[3];
out[4]=a[4];out[5]=a[5];return out};mat2d.copy=function(out,a){out[0]=a[0];out[1]=a[1];out[2]=a[2];out[3]=a[3];out[4]=a[4];out[5]=a[5];return out};mat2d.identity=function(out){out[0]=1;out[1]=0;out[2]=0;out[3]=1;out[4]=0;out[5]=0;return out};mat2d.fromValues=function(a,b,c,d,tx,ty){var out=new glMatrix.ARRAY_TYPE(6);out[0]=a;out[1]=b;out[2]=c;out[3]=d;out[4]=tx;out[5]=ty;return out};mat2d.set=function(out,a,b,c,d,tx,ty){out[0]=a;out[1]=b;out[2]=c;out[3]=d;out[4]=tx;out[5]=ty;return out};mat2d.invert=function(out,a){var aa=a[0],ab=a[1],ac=a[2],ad=a[3],atx=a[4],aty=a[5];var det=aa*ad-ab*ac;if(!det){return null}det=1/det;out[0]=ad*det;out[1]=-ab*det;out[2]=-ac*det;out[3]=aa*det;out[4]=(ac*aty-ad*atx)*det;out[5]=(ab*atx-aa*aty)*det;return out};mat2d.determinant=function(a){return a[0]*a[3]-a[1]*a[2]};mat2d.multiply=function(out,a,b){var a0=a[0],a1=a[1],a2=a[2],a3=a[3],a4=a[4],a5=a[5],b0=b[0],b1=b[1],b2=b[2],b3=b[3],b4=b[4],b5=b[5];out[0]=a0*b0+a2*b1;out[1]=a1*b0+a3*b1;out[2]=a0*b2+a2*b3;out[3]=a1*b2+a3*b3;out[4]=a0*b4+a2*b5+a4;out[5]=a1*b4+a3*b5+a5;return out};mat2d.mul=mat2d.multiply;mat2d.rotate=function(out,a,rad){var a0=a[0],a1=a[1],a2=a[2],a3=a[3],a4=a[4],a5=a[5],s=Math.sin(rad),c=Math.cos(rad);out[0]=a0*c+a2*s;out[1]=a1*c+a3*s;out[2]=a0*-s+a2*c;out[3]=a1*-s+a3*c;out[4]=a4;out[5]=a5;return out};mat2d.scale=function(out,a,v){var a0=a[0],a1=a[1],a2=a[2],a3=a[3],a4=a[4],a5=a[5],v0=v[0],v1=v[1];out[0]=a0*v0;out[1]=a1*v0;out[2]=a2*v1;out[3]=a3*v1;out[4]=a4;out[5]=a5;return out};mat2d.translate=function(out,a,v){var a0=a[0],a1=a[1],a2=a[2],a3=a[3],a4=a[4],a5=a[5],v0=v[0],v1=v[1];out[0]=a0;out[1]=a1;out[2]=a2;out[3]=a3;out[4]=a0*v0+a2*v1+a4;out[5]=a1*v0+a3*v1+a5;return out};mat2d.fromRotation=function(out,rad){var s=Math.sin(rad),c=Math.cos(rad);out[0]=c;out[1]=s;out[2]=-s;out[3]=c;out[4]=0;out[5]=0;return out};mat2d.fromScaling=function(out,v){out[0]=v[0];out[1]=0;out[2]=0;out[3]=v[1];out[4]=0;out[5]=0;return out};mat2d.fromTranslation=function(out,v){out[0]=1;out[1]=0;out[2]=0;out[3]=1;out[4]=v[0];out[5]=v[1];return out};mat2d.str=function(a){return"mat2d("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+")"};mat2d.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+1)};mat2d.add=function(out,a,b){out[0]=a[0]+b[0];out[1]=a[1]+b[1];out[2]=a[2]+b[2];out[3]=a[3]+b[3];out[4]=a[4]+b[4];out[5]=a[5]+b[5];return out};mat2d.subtract=function(out,a,b){out[0]=a[0]-b[0];out[1]=a[1]-b[1];out[2]=a[2]-b[2];out[3]=a[3]-b[3];out[4]=a[4]-b[4];out[5]=a[5]-b[5];return out};mat2d.sub=mat2d.subtract;mat2d.multiplyScalar=function(out,a,b){out[0]=a[0]*b;out[1]=a[1]*b;out[2]=a[2]*b;out[3]=a[3]*b;out[4]=a[4]*b;out[5]=a[5]*b;return out};mat2d.multiplyScalarAndAdd=function(out,a,b,scale){out[0]=a[0]+b[0]*scale;out[1]=a[1]+b[1]*scale;out[2]=a[2]+b[2]*scale;out[3]=a[3]+b[3]*scale;out[4]=a[4]+b[4]*scale;out[5]=a[5]+b[5]*scale;return out};mat2d.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]};mat2d.equals=function(a,b){var a0=a[0],a1=a[1],a2=a[2],a3=a[3],a4=a[4],a5=a[5];var b0=b[0],b1=b[1],b2=b[2],b3=b[3],b4=b[4],b5=b[5];return Math.abs(a0-b0)<=glMatrix.EPSILON*Math.max(1,Math.abs(a0),Math.abs(b0))&&Math.abs(a1-b1)<=glMatrix.EPSILON*Math.max(1,Math.abs(a1),Math.abs(b1))&&Math.abs(a2-b2)<=glMatrix.EPSILON*Math.max(1,Math.abs(a2),Math.abs(b2))&&Math.abs(a3-b3)<=glMatrix.EPSILON*Math.max(1,Math.abs(a3),Math.abs(b3))&&Math.abs(a4-b4)<=glMatrix.EPSILON*Math.max(1,Math.abs(a4),Math.abs(b4))&&Math.abs(a5-b5)<=glMatrix.EPSILON*Math.max(1,Math.abs(a5),Math.abs(b5))};module.exports=mat2d},{"./common.js":15}],18:[function(require,module,exports){var glMatrix=require("./common.js");var mat3={};mat3.create=function(){var out=new glMatrix.ARRAY_TYPE(9);out[0]=1;out[1]=0;out[2]=0;out[3]=0;out[4]=1;out[5]=0;out[6]=0;out[7]=0;out[8]=1;return out};mat3.fromMat4=function(out,a){out[0]=a[0];out[1]=a[1];out[2]=a[2];out[3]=a[4];out[4]=a[5];out[5]=a[6];out[6]=a[8];out[7]=a[9];out[8]=a[10];return out};mat3.clone=function(a){var out=new glMatrix.ARRAY_TYPE(9);out[0]=a[0];out[1]=a[1];out[2]=a[2];out[3]=a[3];out[4]=a[4];out[5]=a[5];out[6]=a[6];out[7]=a[7];out[8]=a[8];return out};mat3.copy=function(out,a){out[0]=a[0];out[1]=a[1];out[2]=a[2];out[3]=a[3];out[4]=a[4];out[5]=a[5];out[6]=a[6];out[7]=a[7];out[8]=a[8];return out};mat3.fromValues=function(m00,m01,m02,m10,m11,m12,m20,m21,m22){var out=new glMatrix.ARRAY_TYPE(9);out[0]=m00;out[1]=m01;out[2]=m02;out[3]=m10;out[4]=m11;out[5]=m12;out[6]=m20;out[7]=m21;out[8]=m22;return out};mat3.set=function(out,m00,m01,m02,m10,m11,m12,m20,m21,m22){out[0]=m00;out[1]=m01;out[2]=m02;out[3]=m10;out[4]=m11;out[5]=m12;out[6]=m20;out[7]=m21;out[8]=m22;return out};mat3.identity=function(out){out[0]=1;out[1]=0;out[2]=0;out[3]=0;out[4]=1;out[5]=0;out[6]=0;out[7]=0;out[8]=1;return out};mat3.transpose=function(out,a){if(out===a){var a01=a[1],a02=a[2],a12=a[5];out[1]=a[3];out[2]=a[6];out[3]=a01;out[5]=a[7];out[6]=a02;out[7]=a12}else{out[0]=a[0];out[1]=a[3];out[2]=a[6];out[3]=a[1];out[4]=a[4];out[5]=a[7];out[6]=a[2];out[7]=a[5];out[8]=a[8]}return out};mat3.invert=function(out,a){var a00=a[0],a01=a[1],a02=a[2],a10=a[3],a11=a[4],a12=a[5],a20=a[6],a21=a[7],a22=a[8],b01=a22*a11-a12*a21,b11=-a22*a10+a12*a20,b21=a21*a10-a11*a20,det=a00*b01+a01*b11+a02*b21;if(!det){return null}det=1/det;out[0]=b01*det;out[1]=(-a22*a01+a02*a21)*det;out[2]=(a12*a01-a02*a11)*det;out[3]=b11*det;out[4]=(a22*a00-a02*a20)*det;out[5]=(-a12*a00+a02*a10)*det;out[6]=b21*det;out[7]=(-a21*a00+a01*a20)*det;out[8]=(a11*a00-a01*a10)*det;return out};mat3.adjoint=function(out,a){var a00=a[0],a01=a[1],a02=a[2],a10=a[3],a11=a[4],a12=a[5],a20=a[6],a21=a[7],a22=a[8];out[0]=a11*a22-a12*a21;out[1]=a02*a21-a01*a22;out[2]=a01*a12-a02*a11;out[3]=a12*a20-a10*a22;out[4]=a00*a22-a02*a20;out[5]=a02*a10-a00*a12;out[6]=a10*a21-a11*a20;out[7]=a01*a20-a00*a21;out[8]=a00*a11-a01*a10;return out};mat3.determinant=function(a){var a00=a[0],a01=a[1],a02=a[2],a10=a[3],a11=a[4],a12=a[5],a20=a[6],a21=a[7],a22=a[8];return a00*(a22*a11-a12*a21)+a01*(-a22*a10+a12*a20)+a02*(a21*a10-a11*a20)};mat3.multiply=function(out,a,b){var a00=a[0],a01=a[1],a02=a[2],a10=a[3],a11=a[4],a12=a[5],a20=a[6],a21=a[7],a22=a[8],b00=b[0],b01=b[1],b02=b[2],b10=b[3],b11=b[4],b12=b[5],b20=b[6],b21=b[7],b22=b[8];out[0]=b00*a00+b01*a10+b02*a20;out[1]=b00*a01+b01*a11+b02*a21;out[2]=b00*a02+b01*a12+b02*a22;out[3]=b10*a00+b11*a10+b12*a20;out[4]=b10*a01+b11*a11+b12*a21;out[5]=b10*a02+b11*a12+b12*a22;out[6]=b20*a00+b21*a10+b22*a20;out[7]=b20*a01+b21*a11+b22*a21;out[8]=b20*a02+b21*a12+b22*a22;return out};mat3.mul=mat3.multiply;mat3.translate=function(out,a,v){var a00=a[0],a01=a[1],a02=a[2],a10=a[3],a11=a[4],a12=a[5],a20=a[6],a21=a[7],a22=a[8],x=v[0],y=v[1];out[0]=a00;out[1]=a01;out[2]=a02;out[3]=a10;out[4]=a11;out[5]=a12;out[6]=x*a00+y*a10+a20;out[7]=x*a01+y*a11+a21;out[8]=x*a02+y*a12+a22;return out};mat3.rotate=function(out,a,rad){var a00=a[0],a01=a[1],a02=a[2],a10=a[3],a11=a[4],a12=a[5],a20=a[6],a21=a[7],a22=a[8],s=Math.sin(rad),c=Math.cos(rad);out[0]=c*a00+s*a10;out[1]=c*a01+s*a11;out[2]=c*a02+s*a12;out[3]=c*a10-s*a00;out[4]=c*a11-s*a01;out[5]=c*a12-s*a02;out[6]=a20;out[7]=a21;out[8]=a22;return out};mat3.scale=function(out,a,v){var x=v[0],y=v[1];out[0]=x*a[0];out[1]=x*a[1];out[2]=x*a[2];out[3]=y*a[3];out[4]=y*a[4];out[5]=y*a[5];out[6]=a[6];out[7]=a[7];out[8]=a[8];return out};mat3.fromTranslation=function(out,v){out[0]=1;out[1]=0;out[2]=0;out[3]=0;out[4]=1;out[5]=0;out[6]=v[0];out[7]=v[1];out[8]=1;return out};mat3.fromRotation=function(out,rad){var s=Math.sin(rad),c=Math.cos(rad);out[0]=c;out[1]=s;out[2]=0;out[3]=-s;out[4]=c;out[5]=0;out[6]=0;out[7]=0;out[8]=1;return out};mat3.fromScaling=function(out,v){out[0]=v[0];out[1]=0;out[2]=0;out[3]=0;out[4]=v[1];out[5]=0;out[6]=0;out[7]=0;out[8]=1;return out};mat3.fromMat2d=function(out,a){out[0]=a[0];out[1]=a[1];out[2]=0;out[3]=a[2];out[4]=a[3];out[5]=0;out[6]=a[4];out[7]=a[5];out[8]=1;return out};mat3.fromQuat=function(out,q){var x=q[0],y=q[1],z=q[2],w=q[3],x2=x+x,y2=y+y,z2=z+z,xx=x*x2,yx=y*x2,yy=y*y2,zx=z*x2,zy=z*y2,zz=z*z2,wx=w*x2,wy=w*y2,wz=w*z2;out[0]=1-yy-zz;out[3]=yx-wz;out[6]=zx+wy;out[1]=yx+wz;out[4]=1-xx-zz;out[7]=zy-wx;out[2]=zx-wy;out[5]=zy+wx;out[8]=1-xx-yy;return out};mat3.normalFromMat4=function(out,a){var a00=a[0],a01=a[1],a02=a[2],a03=a[3],a10=a[4],a11=a[5],a12=a[6],a13=a[7],a20=a[8],a21=a[9],a22=a[10],a23=a[11],a30=a[12],a31=a[13],a32=a[14],a33=a[15],b00=a00*a11-a01*a10,b01=a00*a12-a02*a10,b02=a00*a13-a03*a10,b03=a01*a12-a02*a11,b04=a01*a13-a03*a11,b05=a02*a13-a03*a12,b06=a20*a31-a21*a30,b07=a20*a32-a22*a30,b08=a20*a33-a23*a30,b09=a21*a32-a22*a31,b10=a21*a33-a23*a31,b11=a22*a33-a23*a32,det=b00*b11-b01*b10+b02*b09+b03*b08-b04*b07+b05*b06;if(!det){return null}det=1/det;out[0]=(a11*b11-a12*b10+a13*b09)*det;out[1]=(a12*b08-a10*b11-a13*b07)*det;out[2]=(a10*b10-a11*b08+a13*b06)*det;out[3]=(a02*b10-a01*b11-a03*b09)*det;out[4]=(a00*b11-a02*b08+a03*b07)*det;out[5]=(a01*b08-a00*b10-a03*b06)*det;out[6]=(a31*b05-a32*b04+a33*b03)*det;out[7]=(a32*b02-a30*b05-a33*b01)*det;out[8]=(a30*b04-a31*b02+a33*b00)*det;return out};mat3.str=function(a){return"mat3("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+")"};mat3.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2))};mat3.add=function(out,a,b){out[0]=a[0]+b[0];out[1]=a[1]+b[1];out[2]=a[2]+b[2];out[3]=a[3]+b[3];out[4]=a[4]+b[4];out[5]=a[5]+b[5];out[6]=a[6]+b[6];out[7]=a[7]+b[7];out[8]=a[8]+b[8];return out};mat3.subtract=function(out,a,b){out[0]=a[0]-b[0];out[1]=a[1]-b[1];out[2]=a[2]-b[2];out[3]=a[3]-b[3];out[4]=a[4]-b[4];out[5]=a[5]-b[5];out[6]=a[6]-b[6];out[7]=a[7]-b[7];out[8]=a[8]-b[8];return out};mat3.sub=mat3.subtract;mat3.multiplyScalar=function(out,a,b){out[0]=a[0]*b;out[1]=a[1]*b;out[2]=a[2]*b;out[3]=a[3]*b;out[4]=a[4]*b;out[5]=a[5]*b;out[6]=a[6]*b;out[7]=a[7]*b;out[8]=a[8]*b;return out};mat3.multiplyScalarAndAdd=function(out,a,b,scale){out[0]=a[0]+b[0]*scale;out[1]=a[1]+b[1]*scale;out[2]=a[2]+b[2]*scale;out[3]=a[3]+b[3]*scale;out[4]=a[4]+b[4]*scale;out[5]=a[5]+b[5]*scale;out[6]=a[6]+b[6]*scale;out[7]=a[7]+b[7]*scale;out[8]=a[8]+b[8]*scale;return out};mat3.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]&&a[8]===b[8]};mat3.equals=function(a,b){var a0=a[0],a1=a[1],a2=a[2],a3=a[3],a4=a[4],a5=a[5],a6=a[6],a7=a[7],a8=a[8];var b0=b[0],b1=b[1],b2=b[2],b3=b[3],b4=b[4],b5=b[5],b6=a[6],b7=b[7],b8=b[8];return Math.abs(a0-b0)<=glMatrix.EPSILON*Math.max(1,Math.abs(a0),Math.abs(b0))&&Math.abs(a1-b1)<=glMatrix.EPSILON*Math.max(1,Math.abs(a1),Math.abs(b1))&&Math.abs(a2-b2)<=glMatrix.EPSILON*Math.max(1,Math.abs(a2),Math.abs(b2))&&Math.abs(a3-b3)<=glMatrix.EPSILON*Math.max(1,Math.abs(a3),Math.abs(b3))&&Math.abs(a4-b4)<=glMatrix.EPSILON*Math.max(1,Math.abs(a4),Math.abs(b4))&&Math.abs(a5-b5)<=glMatrix.EPSILON*Math.max(1,Math.abs(a5),Math.abs(b5))&&Math.abs(a6-b6)<=glMatrix.EPSILON*Math.max(1,Math.abs(a6),Math.abs(b6))&&Math.abs(a7-b7)<=glMatrix.EPSILON*Math.max(1,Math.abs(a7),Math.abs(b7))&&Math.abs(a8-b8)<=glMatrix.EPSILON*Math.max(1,Math.abs(a8),Math.abs(b8))};module.exports=mat3},{"./common.js":15}],19:[function(require,module,exports){var glMatrix=require("./common.js");var mat4={scalar:{},SIMD:{}};mat4.create=function(){var out=new glMatrix.ARRAY_TYPE(16);out[0]=1;out[1]=0;out[2]=0;out[3]=0;out[4]=0;out[5]=1;out[6]=0;out[7]=0;out[8]=0;out[9]=0;out[10]=1;out[11]=0;out[12]=0;out[13]=0;out[14]=0;out[15]=1;return out};mat4.clone=function(a){var out=new glMatrix.ARRAY_TYPE(16);out[0]=a[0];out[1]=a[1];out[2]=a[2];out[3]=a[3];out[4]=a[4];out[5]=a[5];out[6]=a[6];out[7]=a[7];out[8]=a[8];out[9]=a[9];out[10]=a[10];out[11]=a[11];out[12]=a[12];out[13]=a[13];out[14]=a[14];out[15]=a[15];return out};mat4.copy=function(out,a){out[0]=a[0];out[1]=a[1];out[2]=a[2];out[3]=a[3];out[4]=a[4];out[5]=a[5];out[6]=a[6];out[7]=a[7];out[8]=a[8];out[9]=a[9];out[10]=a[10];out[11]=a[11];out[12]=a[12];out[13]=a[13];out[14]=a[14];out[15]=a[15];return out};mat4.fromValues=function(m00,m01,m02,m03,m10,m11,m12,m13,m20,m21,m22,m23,m30,m31,m32,m33){var out=new glMatrix.ARRAY_TYPE(16);out[0]=m00;out[1]=m01;out[2]=m02;out[3]=m03;out[4]=m10;out[5]=m11;out[6]=m12;out[7]=m13;out[8]=m20;out[9]=m21;out[10]=m22;out[11]=m23;out[12]=m30;out[13]=m31;out[14]=m32;out[15]=m33;return out};mat4.set=function(out,m00,m01,m02,m03,m10,m11,m12,m13,m20,m21,m22,m23,m30,m31,m32,m33){out[0]=m00;out[1]=m01;out[2]=m02;out[3]=m03;out[4]=m10;out[5]=m11;out[6]=m12;out[7]=m13;out[8]=m20;out[9]=m21;out[10]=m22;out[11]=m23;out[12]=m30;out[13]=m31;out[14]=m32;out[15]=m33;return out};mat4.identity=function(out){out[0]=1;out[1]=0;out[2]=0;out[3]=0;out[4]=0;out[5]=1;out[6]=0;out[7]=0;out[8]=0;out[9]=0;out[10]=1;out[11]=0;out[12]=0;out[13]=0;out[14]=0;out[15]=1;return out};mat4.scalar.transpose=function(out,a){if(out===a){var a01=a[1],a02=a[2],a03=a[3],a12=a[6],a13=a[7],a23=a[11];out[1]=a[4];out[2]=a[8];out[3]=a[12];out[4]=a01;out[6]=a[9];out[7]=a[13];out[8]=a02;out[9]=a12;out[11]=a[14];out[12]=a03;out[13]=a13;out[14]=a23}else{out[0]=a[0];out[1]=a[4];out[2]=a[8];out[3]=a[12];out[4]=a[1];out[5]=a[5];out[6]=a[9];out[7]=a[13];out[8]=a[2];out[9]=a[6];out[10]=a[10];out[11]=a[14];out[12]=a[3];out[13]=a[7];out[14]=a[11];out[15]=a[15]}return out};mat4.SIMD.transpose=function(out,a){var a0,a1,a2,a3,tmp01,tmp23,out0,out1,out2,out3;a0=SIMD.Float32x4.load(a,0);a1=SIMD.Float32x4.load(a,4);a2=SIMD.Float32x4.load(a,8);a3=SIMD.Float32x4.load(a,12);tmp01=SIMD.Float32x4.shuffle(a0,a1,0,1,4,5);tmp23=SIMD.Float32x4.shuffle(a2,a3,0,1,4,5);out0=SIMD.Float32x4.shuffle(tmp01,tmp23,0,2,4,6);out1=SIMD.Float32x4.shuffle(tmp01,tmp23,1,3,5,7);SIMD.Float32x4.store(out,0,out0);SIMD.Float32x4.store(out,4,out1);tmp01=SIMD.Float32x4.shuffle(a0,a1,2,3,6,7);tmp23=SIMD.Float32x4.shuffle(a2,a3,2,3,6,7);out2=SIMD.Float32x4.shuffle(tmp01,tmp23,0,2,4,6);out3=SIMD.Float32x4.shuffle(tmp01,tmp23,1,3,5,7);SIMD.Float32x4.store(out,8,out2);SIMD.Float32x4.store(out,12,out3);return out};mat4.transpose=glMatrix.USE_SIMD?mat4.SIMD.transpose:mat4.scalar.transpose;mat4.scalar.invert=function(out,a){var a00=a[0],a01=a[1],a02=a[2],a03=a[3],a10=a[4],a11=a[5],a12=a[6],a13=a[7],a20=a[8],a21=a[9],a22=a[10],a23=a[11],a30=a[12],a31=a[13],a32=a[14],a33=a[15],b00=a00*a11-a01*a10,b01=a00*a12-a02*a10,b02=a00*a13-a03*a10,b03=a01*a12-a02*a11,b04=a01*a13-a03*a11,b05=a02*a13-a03*a12,b06=a20*a31-a21*a30,b07=a20*a32-a22*a30,b08=a20*a33-a23*a30,b09=a21*a32-a22*a31,b10=a21*a33-a23*a31,b11=a22*a33-a23*a32,det=b00*b11-b01*b10+b02*b09+b03*b08-b04*b07+b05*b06;if(!det){return null}det=1/det;out[0]=(a11*b11-a12*b10+a13*b09)*det;out[1]=(a02*b10-a01*b11-a03*b09)*det;out[2]=(a31*b05-a32*b04+a33*b03)*det;out[3]=(a22*b04-a21*b05-a23*b03)*det;out[4]=(a12*b08-a10*b11-a13*b07)*det;out[5]=(a00*b11-a02*b08+a03*b07)*det;out[6]=(a32*b02-a30*b05-a33*b01)*det;out[7]=(a20*b05-a22*b02+a23*b01)*det;out[8]=(a10*b10-a11*b08+a13*b06)*det;out[9]=(a01*b08-a00*b10-a03*b06)*det;out[10]=(a30*b04-a31*b02+a33*b00)*det;out[11]=(a21*b02-a20*b04-a23*b00)*det;out[12]=(a11*b07-a10*b09-a12*b06)*det;out[13]=(a00*b09-a01*b07+a02*b06)*det;out[14]=(a31*b01-a30*b03-a32*b00)*det;out[15]=(a20*b03-a21*b01+a22*b00)*det;return out};mat4.SIMD.invert=function(out,a){var row0,row1,row2,row3,tmp1,minor0,minor1,minor2,minor3,det,a0=SIMD.Float32x4.load(a,0),a1=SIMD.Float32x4.load(a,4),a2=SIMD.Float32x4.load(a,8),a3=SIMD.Float32x4.load(a,12);tmp1=SIMD.Float32x4.shuffle(a0,a1,0,1,4,5);row1=SIMD.Float32x4.shuffle(a2,a3,0,1,4,5);row0=SIMD.Float32x4.shuffle(tmp1,row1,0,2,4,6);row1=SIMD.Float32x4.shuffle(row1,tmp1,1,3,5,7);tmp1=SIMD.Float32x4.shuffle(a0,a1,2,3,6,7);row3=SIMD.Float32x4.shuffle(a2,a3,2,3,6,7);row2=SIMD.Float32x4.shuffle(tmp1,row3,0,2,4,6);row3=SIMD.Float32x4.shuffle(row3,tmp1,1,3,5,7);tmp1=SIMD.Float32x4.mul(row2,row3);tmp1=SIMD.Float32x4.swizzle(tmp1,1,0,3,2);minor0=SIMD.Float32x4.mul(row1,tmp1);minor1=SIMD.Float32x4.mul(row0,tmp1);tmp1=SIMD.Float32x4.swizzle(tmp1,2,3,0,1);minor0=SIMD.Float32x4.sub(SIMD.Float32x4.mul(row1,tmp1),minor0);minor1=SIMD.Float32x4.sub(SIMD.Float32x4.mul(row0,tmp1),minor1);minor1=SIMD.Float32x4.swizzle(minor1,2,3,0,1);tmp1=SIMD.Float32x4.mul(row1,row2);tmp1=SIMD.Float32x4.swizzle(tmp1,1,0,3,2);minor0=SIMD.Float32x4.add(SIMD.Float32x4.mul(row3,tmp1),minor0);minor3=SIMD.Float32x4.mul(row0,tmp1);tmp1=SIMD.Float32x4.swizzle(tmp1,2,3,0,1);minor0=SIMD.Float32x4.sub(minor0,SIMD.Float32x4.mul(row3,tmp1));minor3=SIMD.Float32x4.sub(SIMD.Float32x4.mul(row0,tmp1),minor3);minor3=SIMD.Float32x4.swizzle(minor3,2,3,0,1);tmp1=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(row1,2,3,0,1),row3);tmp1=SIMD.Float32x4.swizzle(tmp1,1,0,3,2);row2=SIMD.Float32x4.swizzle(row2,2,3,0,1);minor0=SIMD.Float32x4.add(SIMD.Float32x4.mul(row2,tmp1),minor0);minor2=SIMD.Float32x4.mul(row0,tmp1);tmp1=SIMD.Float32x4.swizzle(tmp1,2,3,0,1);minor0=SIMD.Float32x4.sub(minor0,SIMD.Float32x4.mul(row2,tmp1));minor2=SIMD.Float32x4.sub(SIMD.Float32x4.mul(row0,tmp1),minor2);minor2=SIMD.Float32x4.swizzle(minor2,2,3,0,1);tmp1=SIMD.Float32x4.mul(row0,row1);tmp1=SIMD.Float32x4.swizzle(tmp1,1,0,3,2);minor2=SIMD.Float32x4.add(SIMD.Float32x4.mul(row3,tmp1),minor2);minor3=SIMD.Float32x4.sub(SIMD.Float32x4.mul(row2,tmp1),minor3);tmp1=SIMD.Float32x4.swizzle(tmp1,2,3,0,1);minor2=SIMD.Float32x4.sub(SIMD.Float32x4.mul(row3,tmp1),minor2);minor3=SIMD.Float32x4.sub(minor3,SIMD.Float32x4.mul(row2,tmp1));tmp1=SIMD.Float32x4.mul(row0,row3);tmp1=SIMD.Float32x4.swizzle(tmp1,1,0,3,2);minor1=SIMD.Float32x4.sub(minor1,SIMD.Float32x4.mul(row2,tmp1));minor2=SIMD.Float32x4.add(SIMD.Float32x4.mul(row1,tmp1),minor2);tmp1=SIMD.Float32x4.swizzle(tmp1,2,3,0,1);minor1=SIMD.Float32x4.add(SIMD.Float32x4.mul(row2,tmp1),minor1);minor2=SIMD.Float32x4.sub(minor2,SIMD.Float32x4.mul(row1,tmp1));tmp1=SIMD.Float32x4.mul(row0,row2);tmp1=SIMD.Float32x4.swizzle(tmp1,1,0,3,2);minor1=SIMD.Float32x4.add(SIMD.Float32x4.mul(row3,tmp1),minor1);minor3=SIMD.Float32x4.sub(minor3,SIMD.Float32x4.mul(row1,tmp1));tmp1=SIMD.Float32x4.swizzle(tmp1,2,3,0,1);minor1=SIMD.Float32x4.sub(minor1,SIMD.Float32x4.mul(row3,tmp1));minor3=SIMD.Float32x4.add(SIMD.Float32x4.mul(row1,tmp1),minor3);det=SIMD.Float32x4.mul(row0,minor0);det=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(det,2,3,0,1),det);det=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(det,1,0,3,2),det);tmp1=SIMD.Float32x4.reciprocalApproximation(det);det=SIMD.Float32x4.sub(SIMD.Float32x4.add(tmp1,tmp1),SIMD.Float32x4.mul(det,SIMD.Float32x4.mul(tmp1,tmp1)));det=SIMD.Float32x4.swizzle(det,0,0,0,0);if(!det){return null}SIMD.Float32x4.store(out,0,SIMD.Float32x4.mul(det,minor0));SIMD.Float32x4.store(out,4,SIMD.Float32x4.mul(det,minor1));SIMD.Float32x4.store(out,8,SIMD.Float32x4.mul(det,minor2));SIMD.Float32x4.store(out,12,SIMD.Float32x4.mul(det,minor3));return out};mat4.invert=glMatrix.USE_SIMD?mat4.SIMD.invert:mat4.scalar.invert;mat4.scalar.adjoint=function(out,a){var a00=a[0],a01=a[1],a02=a[2],a03=a[3],a10=a[4],a11=a[5],a12=a[6],a13=a[7],a20=a[8],a21=a[9],a22=a[10],a23=a[11],a30=a[12],a31=a[13],a32=a[14],a33=a[15];out[0]=a11*(a22*a33-a23*a32)-a21*(a12*a33-a13*a32)+a31*(a12*a23-a13*a22);out[1]=-(a01*(a22*a33-a23*a32)-a21*(a02*a33-a03*a32)+a31*(a02*a23-a03*a22));out[2]=a01*(a12*a33-a13*a32)-a11*(a02*a33-a03*a32)+a31*(a02*a13-a03*a12);out[3]=-(a01*(a12*a23-a13*a22)-a11*(a02*a23-a03*a22)+a21*(a02*a13-a03*a12));out[4]=-(a10*(a22*a33-a23*a32)-a20*(a12*a33-a13*a32)+a30*(a12*a23-a13*a22));out[5]=a00*(a22*a33-a23*a32)-a20*(a02*a33-a03*a32)+a30*(a02*a23-a03*a22);out[6]=-(a00*(a12*a33-a13*a32)-a10*(a02*a33-a03*a32)+a30*(a02*a13-a03*a12));out[7]=a00*(a12*a23-a13*a22)-a10*(a02*a23-a03*a22)+a20*(a02*a13-a03*a12);out[8]=a10*(a21*a33-a23*a31)-a20*(a11*a33-a13*a31)+a30*(a11*a23-a13*a21);out[9]=-(a00*(a21*a33-a23*a31)-a20*(a01*a33-a03*a31)+a30*(a01*a23-a03*a21));out[10]=a00*(a11*a33-a13*a31)-a10*(a01*a33-a03*a31)+a30*(a01*a13-a03*a11);out[11]=-(a00*(a11*a23-a13*a21)-a10*(a01*a23-a03*a21)+a20*(a01*a13-a03*a11));out[12]=-(a10*(a21*a32-a22*a31)-a20*(a11*a32-a12*a31)+a30*(a11*a22-a12*a21));out[13]=a00*(a21*a32-a22*a31)-a20*(a01*a32-a02*a31)+a30*(a01*a22-a02*a21);out[14]=-(a00*(a11*a32-a12*a31)-a10*(a01*a32-a02*a31)+a30*(a01*a12-a02*a11));out[15]=a00*(a11*a22-a12*a21)-a10*(a01*a22-a02*a21)+a20*(a01*a12-a02*a11);return out};mat4.SIMD.adjoint=function(out,a){var a0,a1,a2,a3;var row0,row1,row2,row3;var tmp1;var minor0,minor1,minor2,minor3;var a0=SIMD.Float32x4.load(a,0);var a1=SIMD.Float32x4.load(a,4);var a2=SIMD.Float32x4.load(a,8);var a3=SIMD.Float32x4.load(a,12);tmp1=SIMD.Float32x4.shuffle(a0,a1,0,1,4,5);row1=SIMD.Float32x4.shuffle(a2,a3,0,1,4,5);row0=SIMD.Float32x4.shuffle(tmp1,row1,0,2,4,6);row1=SIMD.Float32x4.shuffle(row1,tmp1,1,3,5,7);tmp1=SIMD.Float32x4.shuffle(a0,a1,2,3,6,7);row3=SIMD.Float32x4.shuffle(a2,a3,2,3,6,7);row2=SIMD.Float32x4.shuffle(tmp1,row3,0,2,4,6);row3=SIMD.Float32x4.shuffle(row3,tmp1,1,3,5,7);tmp1=SIMD.Float32x4.mul(row2,row3);tmp1=SIMD.Float32x4.swizzle(tmp1,1,0,3,2);minor0=SIMD.Float32x4.mul(row1,tmp1);minor1=SIMD.Float32x4.mul(row0,tmp1);tmp1=SIMD.Float32x4.swizzle(tmp1,2,3,0,1);minor0=SIMD.Float32x4.sub(SIMD.Float32x4.mul(row1,tmp1),minor0);minor1=SIMD.Float32x4.sub(SIMD.Float32x4.mul(row0,tmp1),minor1);minor1=SIMD.Float32x4.swizzle(minor1,2,3,0,1);tmp1=SIMD.Float32x4.mul(row1,row2);tmp1=SIMD.Float32x4.swizzle(tmp1,1,0,3,2);minor0=SIMD.Float32x4.add(SIMD.Float32x4.mul(row3,tmp1),minor0);minor3=SIMD.Float32x4.mul(row0,tmp1);tmp1=SIMD.Float32x4.swizzle(tmp1,2,3,0,1);minor0=SIMD.Float32x4.sub(minor0,SIMD.Float32x4.mul(row3,tmp1));minor3=SIMD.Float32x4.sub(SIMD.Float32x4.mul(row0,tmp1),minor3);minor3=SIMD.Float32x4.swizzle(minor3,2,3,0,1);tmp1=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(row1,2,3,0,1),row3);tmp1=SIMD.Float32x4.swizzle(tmp1,1,0,3,2);row2=SIMD.Float32x4.swizzle(row2,2,3,0,1);minor0=SIMD.Float32x4.add(SIMD.Float32x4.mul(row2,tmp1),minor0);minor2=SIMD.Float32x4.mul(row0,tmp1);tmp1=SIMD.Float32x4.swizzle(tmp1,2,3,0,1);minor0=SIMD.Float32x4.sub(minor0,SIMD.Float32x4.mul(row2,tmp1));minor2=SIMD.Float32x4.sub(SIMD.Float32x4.mul(row0,tmp1),minor2);minor2=SIMD.Float32x4.swizzle(minor2,2,3,0,1);tmp1=SIMD.Float32x4.mul(row0,row1);tmp1=SIMD.Float32x4.swizzle(tmp1,1,0,3,2);minor2=SIMD.Float32x4.add(SIMD.Float32x4.mul(row3,tmp1),minor2);minor3=SIMD.Float32x4.sub(SIMD.Float32x4.mul(row2,tmp1),minor3);tmp1=SIMD.Float32x4.swizzle(tmp1,2,3,0,1);minor2=SIMD.Float32x4.sub(SIMD.Float32x4.mul(row3,tmp1),minor2);minor3=SIMD.Float32x4.sub(minor3,SIMD.Float32x4.mul(row2,tmp1));tmp1=SIMD.Float32x4.mul(row0,row3);tmp1=SIMD.Float32x4.swizzle(tmp1,1,0,3,2);minor1=SIMD.Float32x4.sub(minor1,SIMD.Float32x4.mul(row2,tmp1));minor2=SIMD.Float32x4.add(SIMD.Float32x4.mul(row1,tmp1),minor2);tmp1=SIMD.Float32x4.swizzle(tmp1,2,3,0,1);minor1=SIMD.Float32x4.add(SIMD.Float32x4.mul(row2,tmp1),minor1);minor2=SIMD.Float32x4.sub(minor2,SIMD.Float32x4.mul(row1,tmp1));tmp1=SIMD.Float32x4.mul(row0,row2);tmp1=SIMD.Float32x4.swizzle(tmp1,1,0,3,2);minor1=SIMD.Float32x4.add(SIMD.Float32x4.mul(row3,tmp1),minor1);minor3=SIMD.Float32x4.sub(minor3,SIMD.Float32x4.mul(row1,tmp1));tmp1=SIMD.Float32x4.swizzle(tmp1,2,3,0,1);minor1=SIMD.Float32x4.sub(minor1,SIMD.Float32x4.mul(row3,tmp1));minor3=SIMD.Float32x4.add(SIMD.Float32x4.mul(row1,tmp1),minor3);SIMD.Float32x4.store(out,0,minor0);SIMD.Float32x4.store(out,4,minor1);SIMD.Float32x4.store(out,8,minor2);SIMD.Float32x4.store(out,12,minor3);return out};mat4.adjoint=glMatrix.USE_SIMD?mat4.SIMD.adjoint:mat4.scalar.adjoint;mat4.determinant=function(a){var a00=a[0],a01=a[1],a02=a[2],a03=a[3],a10=a[4],a11=a[5],a12=a[6],a13=a[7],a20=a[8],a21=a[9],a22=a[10],a23=a[11],a30=a[12],a31=a[13],a32=a[14],a33=a[15],b00=a00*a11-a01*a10,b01=a00*a12-a02*a10,b02=a00*a13-a03*a10,b03=a01*a12-a02*a11,b04=a01*a13-a03*a11,b05=a02*a13-a03*a12,b06=a20*a31-a21*a30,b07=a20*a32-a22*a30,b08=a20*a33-a23*a30,b09=a21*a32-a22*a31,b10=a21*a33-a23*a31,b11=a22*a33-a23*a32;return b00*b11-b01*b10+b02*b09+b03*b08-b04*b07+b05*b06};mat4.SIMD.multiply=function(out,a,b){var a0=SIMD.Float32x4.load(a,0);var a1=SIMD.Float32x4.load(a,4);var a2=SIMD.Float32x4.load(a,8);var a3=SIMD.Float32x4.load(a,12);var b0=SIMD.Float32x4.load(b,0);var out0=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b0,0,0,0,0),a0),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b0,1,1,1,1),a1),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b0,2,2,2,2),a2),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b0,3,3,3,3),a3))));SIMD.Float32x4.store(out,0,out0);var b1=SIMD.Float32x4.load(b,4);var out1=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b1,0,0,0,0),a0),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b1,1,1,1,1),a1),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b1,2,2,2,2),a2),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b1,3,3,3,3),a3))));SIMD.Float32x4.store(out,4,out1);var b2=SIMD.Float32x4.load(b,8);var out2=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b2,0,0,0,0),a0),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b2,1,1,1,1),a1),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b2,2,2,2,2),a2),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b2,3,3,3,3),a3))));SIMD.Float32x4.store(out,8,out2);var b3=SIMD.Float32x4.load(b,12);var out3=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b3,0,0,0,0),a0),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b3,1,1,1,1),a1),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b3,2,2,2,2),a2),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(b3,3,3,3,3),a3))));SIMD.Float32x4.store(out,12,out3);return out};mat4.scalar.multiply=function(out,a,b){var a00=a[0],a01=a[1],a02=a[2],a03=a[3],a10=a[4],a11=a[5],a12=a[6],a13=a[7],a20=a[8],a21=a[9],a22=a[10],a23=a[11],a30=a[12],a31=a[13],a32=a[14],a33=a[15];var b0=b[0],b1=b[1],b2=b[2],b3=b[3];out[0]=b0*a00+b1*a10+b2*a20+b3*a30;out[1]=b0*a01+b1*a11+b2*a21+b3*a31;out[2]=b0*a02+b1*a12+b2*a22+b3*a32;out[3]=b0*a03+b1*a13+b2*a23+b3*a33;b0=b[4];b1=b[5];b2=b[6];b3=b[7];out[4]=b0*a00+b1*a10+b2*a20+b3*a30;out[5]=b0*a01+b1*a11+b2*a21+b3*a31;out[6]=b0*a02+b1*a12+b2*a22+b3*a32;out[7]=b0*a03+b1*a13+b2*a23+b3*a33;b0=b[8];b1=b[9];b2=b[10];b3=b[11];out[8]=b0*a00+b1*a10+b2*a20+b3*a30;out[9]=b0*a01+b1*a11+b2*a21+b3*a31;out[10]=b0*a02+b1*a12+b2*a22+b3*a32;out[11]=b0*a03+b1*a13+b2*a23+b3*a33;b0=b[12];b1=b[13];b2=b[14];b3=b[15];out[12]=b0*a00+b1*a10+b2*a20+b3*a30;out[13]=b0*a01+b1*a11+b2*a21+b3*a31;out[14]=b0*a02+b1*a12+b2*a22+b3*a32;out[15]=b0*a03+b1*a13+b2*a23+b3*a33;return out};mat4.multiply=glMatrix.USE_SIMD?mat4.SIMD.multiply:mat4.scalar.multiply;mat4.mul=mat4.multiply;mat4.scalar.translate=function(out,a,v){var x=v[0],y=v[1],z=v[2],a00,a01,a02,a03,a10,a11,a12,a13,a20,a21,a22,a23;if(a===out){out[12]=a[0]*x+a[4]*y+a[8]*z+a[12];out[13]=a[1]*x+a[5]*y+a[9]*z+a[13];out[14]=a[2]*x+a[6]*y+a[10]*z+a[14];out[15]=a[3]*x+a[7]*y+a[11]*z+a[15]}else{a00=a[0];a01=a[1];a02=a[2];a03=a[3];a10=a[4];a11=a[5];a12=a[6];a13=a[7];a20=a[8];a21=a[9];a22=a[10];a23=a[11];out[0]=a00;out[1]=a01;out[2]=a02;out[3]=a03;out[4]=a10;out[5]=a11;out[6]=a12;out[7]=a13;out[8]=a20;out[9]=a21;out[10]=a22;out[11]=a23;out[12]=a00*x+a10*y+a20*z+a[12];out[13]=a01*x+a11*y+a21*z+a[13];out[14]=a02*x+a12*y+a22*z+a[14];out[15]=a03*x+a13*y+a23*z+a[15]}return out};mat4.SIMD.translate=function(out,a,v){var a0=SIMD.Float32x4.load(a,0),a1=SIMD.Float32x4.load(a,4),a2=SIMD.Float32x4.load(a,8),a3=SIMD.Float32x4.load(a,12),vec=SIMD.Float32x4(v[0],v[1],v[2],0);if(a!==out){out[0]=a[0];out[1]=a[1];out[2]=a[2];out[3]=a[3];out[4]=a[4];out[5]=a[5];out[6]=a[6];out[7]=a[7];out[8]=a[8];out[9]=a[9];out[10]=a[10];out[11]=a[11]}a0=SIMD.Float32x4.mul(a0,SIMD.Float32x4.swizzle(vec,0,0,0,0));a1=SIMD.Float32x4.mul(a1,SIMD.Float32x4.swizzle(vec,1,1,1,1));a2=SIMD.Float32x4.mul(a2,SIMD.Float32x4.swizzle(vec,2,2,2,2));var t0=SIMD.Float32x4.add(a0,SIMD.Float32x4.add(a1,SIMD.Float32x4.add(a2,a3)));SIMD.Float32x4.store(out,12,t0);return out};mat4.translate=glMatrix.USE_SIMD?mat4.SIMD.translate:mat4.scalar.translate;mat4.scalar.scale=function(out,a,v){var x=v[0],y=v[1],z=v[2];out[0]=a[0]*x;out[1]=a[1]*x;out[2]=a[2]*x;out[3]=a[3]*x;out[4]=a[4]*y;out[5]=a[5]*y;out[6]=a[6]*y;out[7]=a[7]*y;out[8]=a[8]*z;out[9]=a[9]*z;out[10]=a[10]*z;out[11]=a[11]*z;out[12]=a[12];out[13]=a[13];out[14]=a[14];out[15]=a[15];return out};mat4.SIMD.scale=function(out,a,v){var a0,a1,a2;var vec=SIMD.Float32x4(v[0],v[1],v[2],0);a0=SIMD.Float32x4.load(a,0);SIMD.Float32x4.store(out,0,SIMD.Float32x4.mul(a0,SIMD.Float32x4.swizzle(vec,0,0,0,0)));a1=SIMD.Float32x4.load(a,4);SIMD.Float32x4.store(out,4,SIMD.Float32x4.mul(a1,SIMD.Float32x4.swizzle(vec,1,1,1,1)));a2=SIMD.Float32x4.load(a,8);SIMD.Float32x4.store(out,8,SIMD.Float32x4.mul(a2,SIMD.Float32x4.swizzle(vec,2,2,2,2)));out[12]=a[12];out[13]=a[13];out[14]=a[14];out[15]=a[15];return out};mat4.scale=glMatrix.USE_SIMD?mat4.SIMD.scale:mat4.scalar.scale;mat4.rotate=function(out,a,rad,axis){var x=axis[0],y=axis[1],z=axis[2],len=Math.sqrt(x*x+y*y+z*z),s,c,t,a00,a01,a02,a03,a10,a11,a12,a13,a20,a21,a22,a23,b00,b01,b02,b10,b11,b12,b20,b21,b22;if(Math.abs(len)<glMatrix.EPSILON){return null}len=1/len;x*=len;y*=len;z*=len;s=Math.sin(rad);c=Math.cos(rad);t=1-c;a00=a[0];a01=a[1];a02=a[2];a03=a[3];a10=a[4];a11=a[5];a12=a[6];a13=a[7];a20=a[8];a21=a[9];a22=a[10];a23=a[11];b00=x*x*t+c;b01=y*x*t+z*s;b02=z*x*t-y*s;b10=x*y*t-z*s;b11=y*y*t+c;b12=z*y*t+x*s;b20=x*z*t+y*s;b21=y*z*t-x*s;b22=z*z*t+c;out[0]=a00*b00+a10*b01+a20*b02;out[1]=a01*b00+a11*b01+a21*b02;out[2]=a02*b00+a12*b01+a22*b02;out[3]=a03*b00+a13*b01+a23*b02;out[4]=a00*b10+a10*b11+a20*b12;out[5]=a01*b10+a11*b11+a21*b12;out[6]=a02*b10+a12*b11+a22*b12;out[7]=a03*b10+a13*b11+a23*b12;out[8]=a00*b20+a10*b21+a20*b22;out[9]=a01*b20+a11*b21+a21*b22;out[10]=a02*b20+a12*b21+a22*b22;out[11]=a03*b20+a13*b21+a23*b22;if(a!==out){out[12]=a[12];out[13]=a[13];out[14]=a[14];out[15]=a[15]}return out};mat4.scalar.rotateX=function(out,a,rad){var s=Math.sin(rad),c=Math.cos(rad),a10=a[4],a11=a[5],a12=a[6],a13=a[7],a20=a[8],a21=a[9],a22=a[10],a23=a[11];if(a!==out){out[0]=a[0];out[1]=a[1];out[2]=a[2];out[3]=a[3];out[12]=a[12];out[13]=a[13];out[14]=a[14];out[15]=a[15]}out[4]=a10*c+a20*s;out[5]=a11*c+a21*s;out[6]=a12*c+a22*s;out[7]=a13*c+a23*s;out[8]=a20*c-a10*s;out[9]=a21*c-a11*s;out[10]=a22*c-a12*s;out[11]=a23*c-a13*s;return out};mat4.SIMD.rotateX=function(out,a,rad){var s=SIMD.Float32x4.splat(Math.sin(rad)),c=SIMD.Float32x4.splat(Math.cos(rad));if(a!==out){out[0]=a[0];out[1]=a[1];out[2]=a[2];out[3]=a[3];out[12]=a[12];out[13]=a[13];out[14]=a[14];out[15]=a[15]}var a_1=SIMD.Float32x4.load(a,4);var a_2=SIMD.Float32x4.load(a,8);SIMD.Float32x4.store(out,4,SIMD.Float32x4.add(SIMD.Float32x4.mul(a_1,c),SIMD.Float32x4.mul(a_2,s)));SIMD.Float32x4.store(out,8,SIMD.Float32x4.sub(SIMD.Float32x4.mul(a_2,c),SIMD.Float32x4.mul(a_1,s)));return out};mat4.rotateX=glMatrix.USE_SIMD?mat4.SIMD.rotateX:mat4.scalar.rotateX;mat4.scalar.rotateY=function(out,a,rad){var s=Math.sin(rad),c=Math.cos(rad),a00=a[0],a01=a[1],a02=a[2],a03=a[3],a20=a[8],a21=a[9],a22=a[10],a23=a[11];if(a!==out){out[4]=a[4];out[5]=a[5];out[6]=a[6];out[7]=a[7];out[12]=a[12];out[13]=a[13];out[14]=a[14];out[15]=a[15]}out[0]=a00*c-a20*s;out[1]=a01*c-a21*s;out[2]=a02*c-a22*s;out[3]=a03*c-a23*s;out[8]=a00*s+a20*c;out[9]=a01*s+a21*c;out[10]=a02*s+a22*c;out[11]=a03*s+a23*c;return out};mat4.SIMD.rotateY=function(out,a,rad){var s=SIMD.Float32x4.splat(Math.sin(rad)),c=SIMD.Float32x4.splat(Math.cos(rad));if(a!==out){out[4]=a[4];out[5]=a[5];out[6]=a[6];out[7]=a[7];out[12]=a[12];out[13]=a[13];out[14]=a[14];out[15]=a[15]}var a_0=SIMD.Float32x4.load(a,0);var a_2=SIMD.Float32x4.load(a,8);SIMD.Float32x4.store(out,0,SIMD.Float32x4.sub(SIMD.Float32x4.mul(a_0,c),SIMD.Float32x4.mul(a_2,s)));SIMD.Float32x4.store(out,8,SIMD.Float32x4.add(SIMD.Float32x4.mul(a_0,s),SIMD.Float32x4.mul(a_2,c)));return out};mat4.rotateY=glMatrix.USE_SIMD?mat4.SIMD.rotateY:mat4.scalar.rotateY;mat4.scalar.rotateZ=function(out,a,rad){
var s=Math.sin(rad),c=Math.cos(rad),a00=a[0],a01=a[1],a02=a[2],a03=a[3],a10=a[4],a11=a[5],a12=a[6],a13=a[7];if(a!==out){out[8]=a[8];out[9]=a[9];out[10]=a[10];out[11]=a[11];out[12]=a[12];out[13]=a[13];out[14]=a[14];out[15]=a[15]}out[0]=a00*c+a10*s;out[1]=a01*c+a11*s;out[2]=a02*c+a12*s;out[3]=a03*c+a13*s;out[4]=a10*c-a00*s;out[5]=a11*c-a01*s;out[6]=a12*c-a02*s;out[7]=a13*c-a03*s;return out};mat4.SIMD.rotateZ=function(out,a,rad){var s=SIMD.Float32x4.splat(Math.sin(rad)),c=SIMD.Float32x4.splat(Math.cos(rad));if(a!==out){out[8]=a[8];out[9]=a[9];out[10]=a[10];out[11]=a[11];out[12]=a[12];out[13]=a[13];out[14]=a[14];out[15]=a[15]}var a_0=SIMD.Float32x4.load(a,0);var a_1=SIMD.Float32x4.load(a,4);SIMD.Float32x4.store(out,0,SIMD.Float32x4.add(SIMD.Float32x4.mul(a_0,c),SIMD.Float32x4.mul(a_1,s)));SIMD.Float32x4.store(out,4,SIMD.Float32x4.sub(SIMD.Float32x4.mul(a_1,c),SIMD.Float32x4.mul(a_0,s)));return out};mat4.rotateZ=glMatrix.USE_SIMD?mat4.SIMD.rotateZ:mat4.scalar.rotateZ;mat4.fromTranslation=function(out,v){out[0]=1;out[1]=0;out[2]=0;out[3]=0;out[4]=0;out[5]=1;out[6]=0;out[7]=0;out[8]=0;out[9]=0;out[10]=1;out[11]=0;out[12]=v[0];out[13]=v[1];out[14]=v[2];out[15]=1;return out};mat4.fromScaling=function(out,v){out[0]=v[0];out[1]=0;out[2]=0;out[3]=0;out[4]=0;out[5]=v[1];out[6]=0;out[7]=0;out[8]=0;out[9]=0;out[10]=v[2];out[11]=0;out[12]=0;out[13]=0;out[14]=0;out[15]=1;return out};mat4.fromRotation=function(out,rad,axis){var x=axis[0],y=axis[1],z=axis[2],len=Math.sqrt(x*x+y*y+z*z),s,c,t;if(Math.abs(len)<glMatrix.EPSILON){return null}len=1/len;x*=len;y*=len;z*=len;s=Math.sin(rad);c=Math.cos(rad);t=1-c;out[0]=x*x*t+c;out[1]=y*x*t+z*s;out[2]=z*x*t-y*s;out[3]=0;out[4]=x*y*t-z*s;out[5]=y*y*t+c;out[6]=z*y*t+x*s;out[7]=0;out[8]=x*z*t+y*s;out[9]=y*z*t-x*s;out[10]=z*z*t+c;out[11]=0;out[12]=0;out[13]=0;out[14]=0;out[15]=1;return out};mat4.fromXRotation=function(out,rad){var s=Math.sin(rad),c=Math.cos(rad);out[0]=1;out[1]=0;out[2]=0;out[3]=0;out[4]=0;out[5]=c;out[6]=s;out[7]=0;out[8]=0;out[9]=-s;out[10]=c;out[11]=0;out[12]=0;out[13]=0;out[14]=0;out[15]=1;return out};mat4.fromYRotation=function(out,rad){var s=Math.sin(rad),c=Math.cos(rad);out[0]=c;out[1]=0;out[2]=-s;out[3]=0;out[4]=0;out[5]=1;out[6]=0;out[7]=0;out[8]=s;out[9]=0;out[10]=c;out[11]=0;out[12]=0;out[13]=0;out[14]=0;out[15]=1;return out};mat4.fromZRotation=function(out,rad){var s=Math.sin(rad),c=Math.cos(rad);out[0]=c;out[1]=s;out[2]=0;out[3]=0;out[4]=-s;out[5]=c;out[6]=0;out[7]=0;out[8]=0;out[9]=0;out[10]=1;out[11]=0;out[12]=0;out[13]=0;out[14]=0;out[15]=1;return out};mat4.fromRotationTranslation=function(out,q,v){var x=q[0],y=q[1],z=q[2],w=q[3],x2=x+x,y2=y+y,z2=z+z,xx=x*x2,xy=x*y2,xz=x*z2,yy=y*y2,yz=y*z2,zz=z*z2,wx=w*x2,wy=w*y2,wz=w*z2;out[0]=1-(yy+zz);out[1]=xy+wz;out[2]=xz-wy;out[3]=0;out[4]=xy-wz;out[5]=1-(xx+zz);out[6]=yz+wx;out[7]=0;out[8]=xz+wy;out[9]=yz-wx;out[10]=1-(xx+yy);out[11]=0;out[12]=v[0];out[13]=v[1];out[14]=v[2];out[15]=1;return out};mat4.getTranslation=function(out,mat){out[0]=mat[12];out[1]=mat[13];out[2]=mat[14];return out};mat4.getRotation=function(out,mat){var trace=mat[0]+mat[5]+mat[10];var S=0;if(trace>0){S=Math.sqrt(trace+1)*2;out[3]=.25*S;out[0]=(mat[6]-mat[9])/S;out[1]=(mat[8]-mat[2])/S;out[2]=(mat[1]-mat[4])/S}else if(mat[0]>mat[5]&mat[0]>mat[10]){S=Math.sqrt(1+mat[0]-mat[5]-mat[10])*2;out[3]=(mat[6]-mat[9])/S;out[0]=.25*S;out[1]=(mat[1]+mat[4])/S;out[2]=(mat[8]+mat[2])/S}else if(mat[5]>mat[10]){S=Math.sqrt(1+mat[5]-mat[0]-mat[10])*2;out[3]=(mat[8]-mat[2])/S;out[0]=(mat[1]+mat[4])/S;out[1]=.25*S;out[2]=(mat[6]+mat[9])/S}else{S=Math.sqrt(1+mat[10]-mat[0]-mat[5])*2;out[3]=(mat[1]-mat[4])/S;out[0]=(mat[8]+mat[2])/S;out[1]=(mat[6]+mat[9])/S;out[2]=.25*S}return out};mat4.fromRotationTranslationScale=function(out,q,v,s){var x=q[0],y=q[1],z=q[2],w=q[3],x2=x+x,y2=y+y,z2=z+z,xx=x*x2,xy=x*y2,xz=x*z2,yy=y*y2,yz=y*z2,zz=z*z2,wx=w*x2,wy=w*y2,wz=w*z2,sx=s[0],sy=s[1],sz=s[2];out[0]=(1-(yy+zz))*sx;out[1]=(xy+wz)*sx;out[2]=(xz-wy)*sx;out[3]=0;out[4]=(xy-wz)*sy;out[5]=(1-(xx+zz))*sy;out[6]=(yz+wx)*sy;out[7]=0;out[8]=(xz+wy)*sz;out[9]=(yz-wx)*sz;out[10]=(1-(xx+yy))*sz;out[11]=0;out[12]=v[0];out[13]=v[1];out[14]=v[2];out[15]=1;return out};mat4.fromRotationTranslationScaleOrigin=function(out,q,v,s,o){var x=q[0],y=q[1],z=q[2],w=q[3],x2=x+x,y2=y+y,z2=z+z,xx=x*x2,xy=x*y2,xz=x*z2,yy=y*y2,yz=y*z2,zz=z*z2,wx=w*x2,wy=w*y2,wz=w*z2,sx=s[0],sy=s[1],sz=s[2],ox=o[0],oy=o[1],oz=o[2];out[0]=(1-(yy+zz))*sx;out[1]=(xy+wz)*sx;out[2]=(xz-wy)*sx;out[3]=0;out[4]=(xy-wz)*sy;out[5]=(1-(xx+zz))*sy;out[6]=(yz+wx)*sy;out[7]=0;out[8]=(xz+wy)*sz;out[9]=(yz-wx)*sz;out[10]=(1-(xx+yy))*sz;out[11]=0;out[12]=v[0]+ox-(out[0]*ox+out[4]*oy+out[8]*oz);out[13]=v[1]+oy-(out[1]*ox+out[5]*oy+out[9]*oz);out[14]=v[2]+oz-(out[2]*ox+out[6]*oy+out[10]*oz);out[15]=1;return out};mat4.fromQuat=function(out,q){var x=q[0],y=q[1],z=q[2],w=q[3],x2=x+x,y2=y+y,z2=z+z,xx=x*x2,yx=y*x2,yy=y*y2,zx=z*x2,zy=z*y2,zz=z*z2,wx=w*x2,wy=w*y2,wz=w*z2;out[0]=1-yy-zz;out[1]=yx+wz;out[2]=zx-wy;out[3]=0;out[4]=yx-wz;out[5]=1-xx-zz;out[6]=zy+wx;out[7]=0;out[8]=zx+wy;out[9]=zy-wx;out[10]=1-xx-yy;out[11]=0;out[12]=0;out[13]=0;out[14]=0;out[15]=1;return out};mat4.frustum=function(out,left,right,bottom,top,near,far){var rl=1/(right-left),tb=1/(top-bottom),nf=1/(near-far);out[0]=near*2*rl;out[1]=0;out[2]=0;out[3]=0;out[4]=0;out[5]=near*2*tb;out[6]=0;out[7]=0;out[8]=(right+left)*rl;out[9]=(top+bottom)*tb;out[10]=(far+near)*nf;out[11]=-1;out[12]=0;out[13]=0;out[14]=far*near*2*nf;out[15]=0;return out};mat4.perspective=function(out,fovy,aspect,near,far){var f=1/Math.tan(fovy/2),nf=1/(near-far);out[0]=f/aspect;out[1]=0;out[2]=0;out[3]=0;out[4]=0;out[5]=f;out[6]=0;out[7]=0;out[8]=0;out[9]=0;out[10]=(far+near)*nf;out[11]=-1;out[12]=0;out[13]=0;out[14]=2*far*near*nf;out[15]=0;return out};mat4.perspectiveFromFieldOfView=function(out,fov,near,far){var upTan=Math.tan(fov.upDegrees*Math.PI/180),downTan=Math.tan(fov.downDegrees*Math.PI/180),leftTan=Math.tan(fov.leftDegrees*Math.PI/180),rightTan=Math.tan(fov.rightDegrees*Math.PI/180),xScale=2/(leftTan+rightTan),yScale=2/(upTan+downTan);out[0]=xScale;out[1]=0;out[2]=0;out[3]=0;out[4]=0;out[5]=yScale;out[6]=0;out[7]=0;out[8]=-((leftTan-rightTan)*xScale*.5);out[9]=(upTan-downTan)*yScale*.5;out[10]=far/(near-far);out[11]=-1;out[12]=0;out[13]=0;out[14]=far*near/(near-far);out[15]=0;return out};mat4.ortho=function(out,left,right,bottom,top,near,far){var lr=1/(left-right),bt=1/(bottom-top),nf=1/(near-far);out[0]=-2*lr;out[1]=0;out[2]=0;out[3]=0;out[4]=0;out[5]=-2*bt;out[6]=0;out[7]=0;out[8]=0;out[9]=0;out[10]=2*nf;out[11]=0;out[12]=(left+right)*lr;out[13]=(top+bottom)*bt;out[14]=(far+near)*nf;out[15]=1;return out};mat4.lookAt=function(out,eye,center,up){var x0,x1,x2,y0,y1,y2,z0,z1,z2,len,eyex=eye[0],eyey=eye[1],eyez=eye[2],upx=up[0],upy=up[1],upz=up[2],centerx=center[0],centery=center[1],centerz=center[2];if(Math.abs(eyex-centerx)<glMatrix.EPSILON&&Math.abs(eyey-centery)<glMatrix.EPSILON&&Math.abs(eyez-centerz)<glMatrix.EPSILON){return mat4.identity(out)}z0=eyex-centerx;z1=eyey-centery;z2=eyez-centerz;len=1/Math.sqrt(z0*z0+z1*z1+z2*z2);z0*=len;z1*=len;z2*=len;x0=upy*z2-upz*z1;x1=upz*z0-upx*z2;x2=upx*z1-upy*z0;len=Math.sqrt(x0*x0+x1*x1+x2*x2);if(!len){x0=0;x1=0;x2=0}else{len=1/len;x0*=len;x1*=len;x2*=len}y0=z1*x2-z2*x1;y1=z2*x0-z0*x2;y2=z0*x1-z1*x0;len=Math.sqrt(y0*y0+y1*y1+y2*y2);if(!len){y0=0;y1=0;y2=0}else{len=1/len;y0*=len;y1*=len;y2*=len}out[0]=x0;out[1]=y0;out[2]=z0;out[3]=0;out[4]=x1;out[5]=y1;out[6]=z1;out[7]=0;out[8]=x2;out[9]=y2;out[10]=z2;out[11]=0;out[12]=-(x0*eyex+x1*eyey+x2*eyez);out[13]=-(y0*eyex+y1*eyey+y2*eyez);out[14]=-(z0*eyex+z1*eyey+z2*eyez);out[15]=1;return out};mat4.str=function(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"};mat4.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2)+Math.pow(a[9],2)+Math.pow(a[10],2)+Math.pow(a[11],2)+Math.pow(a[12],2)+Math.pow(a[13],2)+Math.pow(a[14],2)+Math.pow(a[15],2))};mat4.add=function(out,a,b){out[0]=a[0]+b[0];out[1]=a[1]+b[1];out[2]=a[2]+b[2];out[3]=a[3]+b[3];out[4]=a[4]+b[4];out[5]=a[5]+b[5];out[6]=a[6]+b[6];out[7]=a[7]+b[7];out[8]=a[8]+b[8];out[9]=a[9]+b[9];out[10]=a[10]+b[10];out[11]=a[11]+b[11];out[12]=a[12]+b[12];out[13]=a[13]+b[13];out[14]=a[14]+b[14];out[15]=a[15]+b[15];return out};mat4.subtract=function(out,a,b){out[0]=a[0]-b[0];out[1]=a[1]-b[1];out[2]=a[2]-b[2];out[3]=a[3]-b[3];out[4]=a[4]-b[4];out[5]=a[5]-b[5];out[6]=a[6]-b[6];out[7]=a[7]-b[7];out[8]=a[8]-b[8];out[9]=a[9]-b[9];out[10]=a[10]-b[10];out[11]=a[11]-b[11];out[12]=a[12]-b[12];out[13]=a[13]-b[13];out[14]=a[14]-b[14];out[15]=a[15]-b[15];return out};mat4.sub=mat4.subtract;mat4.multiplyScalar=function(out,a,b){out[0]=a[0]*b;out[1]=a[1]*b;out[2]=a[2]*b;out[3]=a[3]*b;out[4]=a[4]*b;out[5]=a[5]*b;out[6]=a[6]*b;out[7]=a[7]*b;out[8]=a[8]*b;out[9]=a[9]*b;out[10]=a[10]*b;out[11]=a[11]*b;out[12]=a[12]*b;out[13]=a[13]*b;out[14]=a[14]*b;out[15]=a[15]*b;return out};mat4.multiplyScalarAndAdd=function(out,a,b,scale){out[0]=a[0]+b[0]*scale;out[1]=a[1]+b[1]*scale;out[2]=a[2]+b[2]*scale;out[3]=a[3]+b[3]*scale;out[4]=a[4]+b[4]*scale;out[5]=a[5]+b[5]*scale;out[6]=a[6]+b[6]*scale;out[7]=a[7]+b[7]*scale;out[8]=a[8]+b[8]*scale;out[9]=a[9]+b[9]*scale;out[10]=a[10]+b[10]*scale;out[11]=a[11]+b[11]*scale;out[12]=a[12]+b[12]*scale;out[13]=a[13]+b[13]*scale;out[14]=a[14]+b[14]*scale;out[15]=a[15]+b[15]*scale;return out};mat4.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]&&a[8]===b[8]&&a[9]===b[9]&&a[10]===b[10]&&a[11]===b[11]&&a[12]===b[12]&&a[13]===b[13]&&a[14]===b[14]&&a[15]===b[15]};mat4.equals=function(a,b){var a0=a[0],a1=a[1],a2=a[2],a3=a[3],a4=a[4],a5=a[5],a6=a[6],a7=a[7],a8=a[8],a9=a[9],a10=a[10],a11=a[11],a12=a[12],a13=a[13],a14=a[14],a15=a[15];var b0=b[0],b1=b[1],b2=b[2],b3=b[3],b4=b[4],b5=b[5],b6=b[6],b7=b[7],b8=b[8],b9=b[9],b10=b[10],b11=b[11],b12=b[12],b13=b[13],b14=b[14],b15=b[15];return Math.abs(a0-b0)<=glMatrix.EPSILON*Math.max(1,Math.abs(a0),Math.abs(b0))&&Math.abs(a1-b1)<=glMatrix.EPSILON*Math.max(1,Math.abs(a1),Math.abs(b1))&&Math.abs(a2-b2)<=glMatrix.EPSILON*Math.max(1,Math.abs(a2),Math.abs(b2))&&Math.abs(a3-b3)<=glMatrix.EPSILON*Math.max(1,Math.abs(a3),Math.abs(b3))&&Math.abs(a4-b4)<=glMatrix.EPSILON*Math.max(1,Math.abs(a4),Math.abs(b4))&&Math.abs(a5-b5)<=glMatrix.EPSILON*Math.max(1,Math.abs(a5),Math.abs(b5))&&Math.abs(a6-b6)<=glMatrix.EPSILON*Math.max(1,Math.abs(a6),Math.abs(b6))&&Math.abs(a7-b7)<=glMatrix.EPSILON*Math.max(1,Math.abs(a7),Math.abs(b7))&&Math.abs(a8-b8)<=glMatrix.EPSILON*Math.max(1,Math.abs(a8),Math.abs(b8))&&Math.abs(a9-b9)<=glMatrix.EPSILON*Math.max(1,Math.abs(a9),Math.abs(b9))&&Math.abs(a10-b10)<=glMatrix.EPSILON*Math.max(1,Math.abs(a10),Math.abs(b10))&&Math.abs(a11-b11)<=glMatrix.EPSILON*Math.max(1,Math.abs(a11),Math.abs(b11))&&Math.abs(a12-b12)<=glMatrix.EPSILON*Math.max(1,Math.abs(a12),Math.abs(b12))&&Math.abs(a13-b13)<=glMatrix.EPSILON*Math.max(1,Math.abs(a13),Math.abs(b13))&&Math.abs(a14-b14)<=glMatrix.EPSILON*Math.max(1,Math.abs(a14),Math.abs(b14))&&Math.abs(a15-b15)<=glMatrix.EPSILON*Math.max(1,Math.abs(a15),Math.abs(b15))};module.exports=mat4},{"./common.js":15}],20:[function(require,module,exports){var glMatrix=require("./common.js");var mat3=require("./mat3.js");var vec3=require("./vec3.js");var vec4=require("./vec4.js");var quat={};quat.create=function(){var out=new glMatrix.ARRAY_TYPE(4);out[0]=0;out[1]=0;out[2]=0;out[3]=1;return out};quat.rotationTo=function(){var tmpvec3=vec3.create();var xUnitVec3=vec3.fromValues(1,0,0);var yUnitVec3=vec3.fromValues(0,1,0);return function(out,a,b){var dot=vec3.dot(a,b);if(dot<-.999999){vec3.cross(tmpvec3,xUnitVec3,a);if(vec3.length(tmpvec3)<1e-6)vec3.cross(tmpvec3,yUnitVec3,a);vec3.normalize(tmpvec3,tmpvec3);quat.setAxisAngle(out,tmpvec3,Math.PI);return out}else if(dot>.999999){out[0]=0;out[1]=0;out[2]=0;out[3]=1;return out}else{vec3.cross(tmpvec3,a,b);out[0]=tmpvec3[0];out[1]=tmpvec3[1];out[2]=tmpvec3[2];out[3]=1+dot;return quat.normalize(out,out)}}}();quat.setAxes=function(){var matr=mat3.create();return function(out,view,right,up){matr[0]=right[0];matr[3]=right[1];matr[6]=right[2];matr[1]=up[0];matr[4]=up[1];matr[7]=up[2];matr[2]=-view[0];matr[5]=-view[1];matr[8]=-view[2];return quat.normalize(out,quat.fromMat3(out,matr))}}();quat.clone=vec4.clone;quat.fromValues=vec4.fromValues;quat.copy=vec4.copy;quat.set=vec4.set;quat.identity=function(out){out[0]=0;out[1]=0;out[2]=0;out[3]=1;return out};quat.setAxisAngle=function(out,axis,rad){rad=rad*.5;var s=Math.sin(rad);out[0]=s*axis[0];out[1]=s*axis[1];out[2]=s*axis[2];out[3]=Math.cos(rad);return out};quat.getAxisAngle=function(out_axis,q){var rad=Math.acos(q[3])*2;var s=Math.sin(rad/2);if(s!=0){out_axis[0]=q[0]/s;out_axis[1]=q[1]/s;out_axis[2]=q[2]/s}else{out_axis[0]=1;out_axis[1]=0;out_axis[2]=0}return rad};quat.add=vec4.add;quat.multiply=function(out,a,b){var ax=a[0],ay=a[1],az=a[2],aw=a[3],bx=b[0],by=b[1],bz=b[2],bw=b[3];out[0]=ax*bw+aw*bx+ay*bz-az*by;out[1]=ay*bw+aw*by+az*bx-ax*bz;out[2]=az*bw+aw*bz+ax*by-ay*bx;out[3]=aw*bw-ax*bx-ay*by-az*bz;return out};quat.mul=quat.multiply;quat.scale=vec4.scale;quat.rotateX=function(out,a,rad){rad*=.5;var ax=a[0],ay=a[1],az=a[2],aw=a[3],bx=Math.sin(rad),bw=Math.cos(rad);out[0]=ax*bw+aw*bx;out[1]=ay*bw+az*bx;out[2]=az*bw-ay*bx;out[3]=aw*bw-ax*bx;return out};quat.rotateY=function(out,a,rad){rad*=.5;var ax=a[0],ay=a[1],az=a[2],aw=a[3],by=Math.sin(rad),bw=Math.cos(rad);out[0]=ax*bw-az*by;out[1]=ay*bw+aw*by;out[2]=az*bw+ax*by;out[3]=aw*bw-ay*by;return out};quat.rotateZ=function(out,a,rad){rad*=.5;var ax=a[0],ay=a[1],az=a[2],aw=a[3],bz=Math.sin(rad),bw=Math.cos(rad);out[0]=ax*bw+ay*bz;out[1]=ay*bw-ax*bz;out[2]=az*bw+aw*bz;out[3]=aw*bw-az*bz;return out};quat.calculateW=function(out,a){var x=a[0],y=a[1],z=a[2];out[0]=x;out[1]=y;out[2]=z;out[3]=Math.sqrt(Math.abs(1-x*x-y*y-z*z));return out};quat.dot=vec4.dot;quat.lerp=vec4.lerp;quat.slerp=function(out,a,b,t){var ax=a[0],ay=a[1],az=a[2],aw=a[3],bx=b[0],by=b[1],bz=b[2],bw=b[3];var omega,cosom,sinom,scale0,scale1;cosom=ax*bx+ay*by+az*bz+aw*bw;if(cosom<0){cosom=-cosom;bx=-bx;by=-by;bz=-bz;bw=-bw}if(1-cosom>1e-6){omega=Math.acos(cosom);sinom=Math.sin(omega);scale0=Math.sin((1-t)*omega)/sinom;scale1=Math.sin(t*omega)/sinom}else{scale0=1-t;scale1=t}out[0]=scale0*ax+scale1*bx;out[1]=scale0*ay+scale1*by;out[2]=scale0*az+scale1*bz;out[3]=scale0*aw+scale1*bw;return out};quat.sqlerp=function(){var temp1=quat.create();var temp2=quat.create();return function(out,a,b,c,d,t){quat.slerp(temp1,a,d,t);quat.slerp(temp2,b,c,t);quat.slerp(out,temp1,temp2,2*t*(1-t));return out}}();quat.invert=function(out,a){var a0=a[0],a1=a[1],a2=a[2],a3=a[3],dot=a0*a0+a1*a1+a2*a2+a3*a3,invDot=dot?1/dot:0;out[0]=-a0*invDot;out[1]=-a1*invDot;out[2]=-a2*invDot;out[3]=a3*invDot;return out};quat.conjugate=function(out,a){out[0]=-a[0];out[1]=-a[1];out[2]=-a[2];out[3]=a[3];return out};quat.length=vec4.length;quat.len=quat.length;quat.squaredLength=vec4.squaredLength;quat.sqrLen=quat.squaredLength;quat.normalize=vec4.normalize;quat.fromMat3=function(out,m){var fTrace=m[0]+m[4]+m[8];var fRoot;if(fTrace>0){fRoot=Math.sqrt(fTrace+1);out[3]=.5*fRoot;fRoot=.5/fRoot;out[0]=(m[5]-m[7])*fRoot;out[1]=(m[6]-m[2])*fRoot;out[2]=(m[1]-m[3])*fRoot}else{var i=0;if(m[4]>m[0])i=1;if(m[8]>m[i*3+i])i=2;var j=(i+1)%3;var k=(i+2)%3;fRoot=Math.sqrt(m[i*3+i]-m[j*3+j]-m[k*3+k]+1);out[i]=.5*fRoot;fRoot=.5/fRoot;out[3]=(m[j*3+k]-m[k*3+j])*fRoot;out[j]=(m[j*3+i]+m[i*3+j])*fRoot;out[k]=(m[k*3+i]+m[i*3+k])*fRoot}return out};quat.str=function(a){return"quat("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"};quat.exactEquals=vec4.exactEquals;quat.equals=vec4.equals;module.exports=quat},{"./common.js":15,"./mat3.js":18,"./vec3.js":22,"./vec4.js":23}],21:[function(require,module,exports){var glMatrix=require("./common.js");var vec2={};vec2.create=function(){var out=new glMatrix.ARRAY_TYPE(2);out[0]=0;out[1]=0;return out};vec2.clone=function(a){var out=new glMatrix.ARRAY_TYPE(2);out[0]=a[0];out[1]=a[1];return out};vec2.fromValues=function(x,y){var out=new glMatrix.ARRAY_TYPE(2);out[0]=x;out[1]=y;return out};vec2.copy=function(out,a){out[0]=a[0];out[1]=a[1];return out};vec2.set=function(out,x,y){out[0]=x;out[1]=y;return out};vec2.add=function(out,a,b){out[0]=a[0]+b[0];out[1]=a[1]+b[1];return out};vec2.subtract=function(out,a,b){out[0]=a[0]-b[0];out[1]=a[1]-b[1];return out};vec2.sub=vec2.subtract;vec2.multiply=function(out,a,b){out[0]=a[0]*b[0];out[1]=a[1]*b[1];return out};vec2.mul=vec2.multiply;vec2.divide=function(out,a,b){out[0]=a[0]/b[0];out[1]=a[1]/b[1];return out};vec2.div=vec2.divide;vec2.ceil=function(out,a){out[0]=Math.ceil(a[0]);out[1]=Math.ceil(a[1]);return out};vec2.floor=function(out,a){out[0]=Math.floor(a[0]);out[1]=Math.floor(a[1]);return out};vec2.min=function(out,a,b){out[0]=Math.min(a[0],b[0]);out[1]=Math.min(a[1],b[1]);return out};vec2.max=function(out,a,b){out[0]=Math.max(a[0],b[0]);out[1]=Math.max(a[1],b[1]);return out};vec2.round=function(out,a){out[0]=Math.round(a[0]);out[1]=Math.round(a[1]);return out};vec2.scale=function(out,a,b){out[0]=a[0]*b;out[1]=a[1]*b;return out};vec2.scaleAndAdd=function(out,a,b,scale){out[0]=a[0]+b[0]*scale;out[1]=a[1]+b[1]*scale;return out};vec2.distance=function(a,b){var x=b[0]-a[0],y=b[1]-a[1];return Math.sqrt(x*x+y*y)};vec2.dist=vec2.distance;vec2.squaredDistance=function(a,b){var x=b[0]-a[0],y=b[1]-a[1];return x*x+y*y};vec2.sqrDist=vec2.squaredDistance;vec2.length=function(a){var x=a[0],y=a[1];return Math.sqrt(x*x+y*y)};vec2.len=vec2.length;vec2.squaredLength=function(a){var x=a[0],y=a[1];return x*x+y*y};vec2.sqrLen=vec2.squaredLength;vec2.negate=function(out,a){out[0]=-a[0];out[1]=-a[1];return out};vec2.inverse=function(out,a){out[0]=1/a[0];out[1]=1/a[1];return out};vec2.normalize=function(out,a){var x=a[0],y=a[1];var len=x*x+y*y;if(len>0){len=1/Math.sqrt(len);out[0]=a[0]*len;out[1]=a[1]*len}return out};vec2.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]};vec2.cross=function(out,a,b){var z=a[0]*b[1]-a[1]*b[0];out[0]=out[1]=0;out[2]=z;return out};vec2.lerp=function(out,a,b,t){var ax=a[0],ay=a[1];out[0]=ax+t*(b[0]-ax);out[1]=ay+t*(b[1]-ay);return out};vec2.random=function(out,scale){scale=scale||1;var r=glMatrix.RANDOM()*2*Math.PI;out[0]=Math.cos(r)*scale;out[1]=Math.sin(r)*scale;return out};vec2.transformMat2=function(out,a,m){var x=a[0],y=a[1];out[0]=m[0]*x+m[2]*y;out[1]=m[1]*x+m[3]*y;return out};vec2.transformMat2d=function(out,a,m){var x=a[0],y=a[1];out[0]=m[0]*x+m[2]*y+m[4];out[1]=m[1]*x+m[3]*y+m[5];return out};vec2.transformMat3=function(out,a,m){var x=a[0],y=a[1];out[0]=m[0]*x+m[3]*y+m[6];out[1]=m[1]*x+m[4]*y+m[7];return out};vec2.transformMat4=function(out,a,m){var x=a[0],y=a[1];out[0]=m[0]*x+m[4]*y+m[12];out[1]=m[1]*x+m[5]*y+m[13];return out};vec2.forEach=function(){var vec=vec2.create();return function(a,stride,offset,count,fn,arg){var i,l;if(!stride){stride=2}if(!offset){offset=0}if(count){l=Math.min(count*stride+offset,a.length)}else{l=a.length}for(i=offset;i<l;i+=stride){vec[0]=a[i];vec[1]=a[i+1];fn(vec,vec,arg);a[i]=vec[0];a[i+1]=vec[1]}return a}}();vec2.str=function(a){return"vec2("+a[0]+", "+a[1]+")"};vec2.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]};vec2.equals=function(a,b){var a0=a[0],a1=a[1];var b0=b[0],b1=b[1];return Math.abs(a0-b0)<=glMatrix.EPSILON*Math.max(1,Math.abs(a0),Math.abs(b0))&&Math.abs(a1-b1)<=glMatrix.EPSILON*Math.max(1,Math.abs(a1),Math.abs(b1))};module.exports=vec2},{"./common.js":15}],22:[function(require,module,exports){var glMatrix=require("./common.js");var vec3={};vec3.create=function(){var out=new glMatrix.ARRAY_TYPE(3);out[0]=0;out[1]=0;out[2]=0;return out};vec3.clone=function(a){var out=new glMatrix.ARRAY_TYPE(3);out[0]=a[0];out[1]=a[1];out[2]=a[2];return out};vec3.fromValues=function(x,y,z){var out=new glMatrix.ARRAY_TYPE(3);out[0]=x;out[1]=y;out[2]=z;return out};vec3.copy=function(out,a){out[0]=a[0];out[1]=a[1];out[2]=a[2];return out};vec3.set=function(out,x,y,z){out[0]=x;out[1]=y;out[2]=z;return out};vec3.add=function(out,a,b){out[0]=a[0]+b[0];out[1]=a[1]+b[1];out[2]=a[2]+b[2];return out};vec3.subtract=function(out,a,b){out[0]=a[0]-b[0];out[1]=a[1]-b[1];out[2]=a[2]-b[2];return out};vec3.sub=vec3.subtract;vec3.multiply=function(out,a,b){out[0]=a[0]*b[0];out[1]=a[1]*b[1];out[2]=a[2]*b[2];return out};vec3.mul=vec3.multiply;vec3.divide=function(out,a,b){out[0]=a[0]/b[0];out[1]=a[1]/b[1];out[2]=a[2]/b[2];return out};vec3.div=vec3.divide;vec3.ceil=function(out,a){out[0]=Math.ceil(a[0]);out[1]=Math.ceil(a[1]);out[2]=Math.ceil(a[2]);return out};vec3.floor=function(out,a){out[0]=Math.floor(a[0]);out[1]=Math.floor(a[1]);out[2]=Math.floor(a[2]);return out};vec3.min=function(out,a,b){out[0]=Math.min(a[0],b[0]);out[1]=Math.min(a[1],b[1]);out[2]=Math.min(a[2],b[2]);return out};vec3.max=function(out,a,b){out[0]=Math.max(a[0],b[0]);out[1]=Math.max(a[1],b[1]);out[2]=Math.max(a[2],b[2]);return out};vec3.round=function(out,a){out[0]=Math.round(a[0]);out[1]=Math.round(a[1]);out[2]=Math.round(a[2]);return out};vec3.scale=function(out,a,b){out[0]=a[0]*b;out[1]=a[1]*b;out[2]=a[2]*b;return out};vec3.scaleAndAdd=function(out,a,b,scale){out[0]=a[0]+b[0]*scale;out[1]=a[1]+b[1]*scale;out[2]=a[2]+b[2]*scale;return out};vec3.distance=function(a,b){var x=b[0]-a[0],y=b[1]-a[1],z=b[2]-a[2];return Math.sqrt(x*x+y*y+z*z)};vec3.dist=vec3.distance;vec3.squaredDistance=function(a,b){var x=b[0]-a[0],y=b[1]-a[1],z=b[2]-a[2];return x*x+y*y+z*z};vec3.sqrDist=vec3.squaredDistance;vec3.length=function(a){var x=a[0],y=a[1],z=a[2];return Math.sqrt(x*x+y*y+z*z)};vec3.len=vec3.length;vec3.squaredLength=function(a){var x=a[0],y=a[1],z=a[2];return x*x+y*y+z*z};vec3.sqrLen=vec3.squaredLength;vec3.negate=function(out,a){out[0]=-a[0];out[1]=-a[1];out[2]=-a[2];return out};vec3.inverse=function(out,a){out[0]=1/a[0];out[1]=1/a[1];out[2]=1/a[2];return out};vec3.normalize=function(out,a){var x=a[0],y=a[1],z=a[2];var len=x*x+y*y+z*z;if(len>0){len=1/Math.sqrt(len);out[0]=a[0]*len;out[1]=a[1]*len;out[2]=a[2]*len}return out};vec3.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]};vec3.cross=function(out,a,b){var ax=a[0],ay=a[1],az=a[2],bx=b[0],by=b[1],bz=b[2];out[0]=ay*bz-az*by;out[1]=az*bx-ax*bz;out[2]=ax*by-ay*bx;return out};vec3.lerp=function(out,a,b,t){var ax=a[0],ay=a[1],az=a[2];out[0]=ax+t*(b[0]-ax);out[1]=ay+t*(b[1]-ay);out[2]=az+t*(b[2]-az);return out};vec3.hermite=function(out,a,b,c,d,t){var factorTimes2=t*t,factor1=factorTimes2*(2*t-3)+1,factor2=factorTimes2*(t-2)+t,factor3=factorTimes2*(t-1),factor4=factorTimes2*(3-2*t);out[0]=a[0]*factor1+b[0]*factor2+c[0]*factor3+d[0]*factor4;out[1]=a[1]*factor1+b[1]*factor2+c[1]*factor3+d[1]*factor4;out[2]=a[2]*factor1+b[2]*factor2+c[2]*factor3+d[2]*factor4;return out};vec3.bezier=function(out,a,b,c,d,t){var inverseFactor=1-t,inverseFactorTimesTwo=inverseFactor*inverseFactor,factorTimes2=t*t,factor1=inverseFactorTimesTwo*inverseFactor,factor2=3*t*inverseFactorTimesTwo,factor3=3*factorTimes2*inverseFactor,factor4=factorTimes2*t;out[0]=a[0]*factor1+b[0]*factor2+c[0]*factor3+d[0]*factor4;out[1]=a[1]*factor1+b[1]*factor2+c[1]*factor3+d[1]*factor4;out[2]=a[2]*factor1+b[2]*factor2+c[2]*factor3+d[2]*factor4;return out};vec3.random=function(out,scale){scale=scale||1;var r=glMatrix.RANDOM()*2*Math.PI;var z=glMatrix.RANDOM()*2-1;var zScale=Math.sqrt(1-z*z)*scale;out[0]=Math.cos(r)*zScale;out[1]=Math.sin(r)*zScale;out[2]=z*scale;return out};vec3.transformMat4=function(out,a,m){var x=a[0],y=a[1],z=a[2],w=m[3]*x+m[7]*y+m[11]*z+m[15];w=w||1;out[0]=(m[0]*x+m[4]*y+m[8]*z+m[12])/w;out[1]=(m[1]*x+m[5]*y+m[9]*z+m[13])/w;out[2]=(m[2]*x+m[6]*y+m[10]*z+m[14])/w;return out};vec3.transformMat3=function(out,a,m){var x=a[0],y=a[1],z=a[2];out[0]=x*m[0]+y*m[3]+z*m[6];out[1]=x*m[1]+y*m[4]+z*m[7];out[2]=x*m[2]+y*m[5]+z*m[8];return out};vec3.transformQuat=function(out,a,q){var x=a[0],y=a[1],z=a[2],qx=q[0],qy=q[1],qz=q[2],qw=q[3],ix=qw*x+qy*z-qz*y,iy=qw*y+qz*x-qx*z,iz=qw*z+qx*y-qy*x,iw=-qx*x-qy*y-qz*z;out[0]=ix*qw+iw*-qx+iy*-qz-iz*-qy;out[1]=iy*qw+iw*-qy+iz*-qx-ix*-qz;out[2]=iz*qw+iw*-qz+ix*-qy-iy*-qx;return out};vec3.rotateX=function(out,a,b,c){var p=[],r=[];p[0]=a[0]-b[0];p[1]=a[1]-b[1];p[2]=a[2]-b[2];r[0]=p[0];r[1]=p[1]*Math.cos(c)-p[2]*Math.sin(c);r[2]=p[1]*Math.sin(c)+p[2]*Math.cos(c);out[0]=r[0]+b[0];out[1]=r[1]+b[1];out[2]=r[2]+b[2];return out};vec3.rotateY=function(out,a,b,c){var p=[],r=[];p[0]=a[0]-b[0];p[1]=a[1]-b[1];p[2]=a[2]-b[2];r[0]=p[2]*Math.sin(c)+p[0]*Math.cos(c);r[1]=p[1];r[2]=p[2]*Math.cos(c)-p[0]*Math.sin(c);out[0]=r[0]+b[0];out[1]=r[1]+b[1];out[2]=r[2]+b[2];return out};vec3.rotateZ=function(out,a,b,c){var p=[],r=[];p[0]=a[0]-b[0];p[1]=a[1]-b[1];p[2]=a[2]-b[2];r[0]=p[0]*Math.cos(c)-p[1]*Math.sin(c);r[1]=p[0]*Math.sin(c)+p[1]*Math.cos(c);r[2]=p[2];out[0]=r[0]+b[0];out[1]=r[1]+b[1];out[2]=r[2]+b[2];return out};vec3.forEach=function(){var vec=vec3.create();return function(a,stride,offset,count,fn,arg){var i,l;if(!stride){stride=3}if(!offset){offset=0}if(count){l=Math.min(count*stride+offset,a.length)}else{l=a.length}for(i=offset;i<l;i+=stride){vec[0]=a[i];vec[1]=a[i+1];vec[2]=a[i+2];fn(vec,vec,arg);a[i]=vec[0];a[i+1]=vec[1];a[i+2]=vec[2]}return a}}();vec3.angle=function(a,b){var tempA=vec3.fromValues(a[0],a[1],a[2]);var tempB=vec3.fromValues(b[0],b[1],b[2]);vec3.normalize(tempA,tempA);vec3.normalize(tempB,tempB);var cosine=vec3.dot(tempA,tempB);if(cosine>1){return 0}else{return Math.acos(cosine)}};vec3.str=function(a){return"vec3("+a[0]+", "+a[1]+", "+a[2]+")"};vec3.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]};vec3.equals=function(a,b){var a0=a[0],a1=a[1],a2=a[2];var b0=b[0],b1=b[1],b2=b[2];return Math.abs(a0-b0)<=glMatrix.EPSILON*Math.max(1,Math.abs(a0),Math.abs(b0))&&Math.abs(a1-b1)<=glMatrix.EPSILON*Math.max(1,Math.abs(a1),Math.abs(b1))&&Math.abs(a2-b2)<=glMatrix.EPSILON*Math.max(1,Math.abs(a2),Math.abs(b2))};module.exports=vec3},{"./common.js":15}],23:[function(require,module,exports){var glMatrix=require("./common.js");var vec4={};vec4.create=function(){var out=new glMatrix.ARRAY_TYPE(4);out[0]=0;out[1]=0;out[2]=0;out[3]=0;return out};vec4.clone=function(a){var out=new glMatrix.ARRAY_TYPE(4);out[0]=a[0];out[1]=a[1];out[2]=a[2];out[3]=a[3];return out};vec4.fromValues=function(x,y,z,w){var out=new glMatrix.ARRAY_TYPE(4);out[0]=x;out[1]=y;out[2]=z;out[3]=w;return out};vec4.copy=function(out,a){out[0]=a[0];out[1]=a[1];out[2]=a[2];out[3]=a[3];return out};vec4.set=function(out,x,y,z,w){out[0]=x;out[1]=y;out[2]=z;out[3]=w;return out};vec4.add=function(out,a,b){out[0]=a[0]+b[0];out[1]=a[1]+b[1];out[2]=a[2]+b[2];out[3]=a[3]+b[3];return out};vec4.subtract=function(out,a,b){out[0]=a[0]-b[0];out[1]=a[1]-b[1];out[2]=a[2]-b[2];out[3]=a[3]-b[3];return out};vec4.sub=vec4.subtract;vec4.multiply=function(out,a,b){out[0]=a[0]*b[0];out[1]=a[1]*b[1];out[2]=a[2]*b[2];out[3]=a[3]*b[3];return out};vec4.mul=vec4.multiply;vec4.divide=function(out,a,b){out[0]=a[0]/b[0];out[1]=a[1]/b[1];out[2]=a[2]/b[2];out[3]=a[3]/b[3];return out};vec4.div=vec4.divide;vec4.ceil=function(out,a){out[0]=Math.ceil(a[0]);out[1]=Math.ceil(a[1]);out[2]=Math.ceil(a[2]);out[3]=Math.ceil(a[3]);return out};vec4.floor=function(out,a){out[0]=Math.floor(a[0]);out[1]=Math.floor(a[1]);out[2]=Math.floor(a[2]);out[3]=Math.floor(a[3]);return out};vec4.min=function(out,a,b){out[0]=Math.min(a[0],b[0]);out[1]=Math.min(a[1],b[1]);out[2]=Math.min(a[2],b[2]);out[3]=Math.min(a[3],b[3]);return out};vec4.max=function(out,a,b){out[0]=Math.max(a[0],b[0]);out[1]=Math.max(a[1],b[1]);out[2]=Math.max(a[2],b[2]);out[3]=Math.max(a[3],b[3]);return out};vec4.round=function(out,a){out[0]=Math.round(a[0]);out[1]=Math.round(a[1]);out[2]=Math.round(a[2]);out[3]=Math.round(a[3]);return out};vec4.scale=function(out,a,b){out[0]=a[0]*b;out[1]=a[1]*b;out[2]=a[2]*b;out[3]=a[3]*b;return out};vec4.scaleAndAdd=function(out,a,b,scale){out[0]=a[0]+b[0]*scale;out[1]=a[1]+b[1]*scale;out[2]=a[2]+b[2]*scale;out[3]=a[3]+b[3]*scale;return out};vec4.distance=function(a,b){var x=b[0]-a[0],y=b[1]-a[1],z=b[2]-a[2],w=b[3]-a[3];return Math.sqrt(x*x+y*y+z*z+w*w)};vec4.dist=vec4.distance;vec4.squaredDistance=function(a,b){var x=b[0]-a[0],y=b[1]-a[1],z=b[2]-a[2],w=b[3]-a[3];return x*x+y*y+z*z+w*w};vec4.sqrDist=vec4.squaredDistance;vec4.length=function(a){var x=a[0],y=a[1],z=a[2],w=a[3];return Math.sqrt(x*x+y*y+z*z+w*w)};vec4.len=vec4.length;vec4.squaredLength=function(a){var x=a[0],y=a[1],z=a[2],w=a[3];return x*x+y*y+z*z+w*w};vec4.sqrLen=vec4.squaredLength;vec4.negate=function(out,a){out[0]=-a[0];out[1]=-a[1];out[2]=-a[2];out[3]=-a[3];return out};vec4.inverse=function(out,a){out[0]=1/a[0];out[1]=1/a[1];out[2]=1/a[2];out[3]=1/a[3];return out};vec4.normalize=function(out,a){var x=a[0],y=a[1],z=a[2],w=a[3];var len=x*x+y*y+z*z+w*w;if(len>0){len=1/Math.sqrt(len);out[0]=x*len;out[1]=y*len;out[2]=z*len;out[3]=w*len}return out};vec4.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]};vec4.lerp=function(out,a,b,t){var ax=a[0],ay=a[1],az=a[2],aw=a[3];out[0]=ax+t*(b[0]-ax);out[1]=ay+t*(b[1]-ay);out[2]=az+t*(b[2]-az);out[3]=aw+t*(b[3]-aw);return out};vec4.random=function(out,scale){scale=scale||1;out[0]=glMatrix.RANDOM();out[1]=glMatrix.RANDOM();out[2]=glMatrix.RANDOM();out[3]=glMatrix.RANDOM();vec4.normalize(out,out);vec4.scale(out,out,scale);return out};vec4.transformMat4=function(out,a,m){var x=a[0],y=a[1],z=a[2],w=a[3];out[0]=m[0]*x+m[4]*y+m[8]*z+m[12]*w;out[1]=m[1]*x+m[5]*y+m[9]*z+m[13]*w;out[2]=m[2]*x+m[6]*y+m[10]*z+m[14]*w;out[3]=m[3]*x+m[7]*y+m[11]*z+m[15]*w;return out};vec4.transformQuat=function(out,a,q){var x=a[0],y=a[1],z=a[2],qx=q[0],qy=q[1],qz=q[2],qw=q[3],ix=qw*x+qy*z-qz*y,iy=qw*y+qz*x-qx*z,iz=qw*z+qx*y-qy*x,iw=-qx*x-qy*y-qz*z;out[0]=ix*qw+iw*-qx+iy*-qz-iz*-qy;out[1]=iy*qw+iw*-qy+iz*-qx-ix*-qz;out[2]=iz*qw+iw*-qz+ix*-qy-iy*-qx;out[3]=a[3];return out};vec4.forEach=function(){var vec=vec4.create();return function(a,stride,offset,count,fn,arg){var i,l;if(!stride){stride=4}if(!offset){offset=0}if(count){l=Math.min(count*stride+offset,a.length)}else{l=a.length}for(i=offset;i<l;i+=stride){vec[0]=a[i];vec[1]=a[i+1];vec[2]=a[i+2];vec[3]=a[i+3];fn(vec,vec,arg);a[i]=vec[0];a[i+1]=vec[1];a[i+2]=vec[2];a[i+3]=vec[3]}return a}}();vec4.str=function(a){return"vec4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"};vec4.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]};vec4.equals=function(a,b){var a0=a[0],a1=a[1],a2=a[2],a3=a[3];var b0=b[0],b1=b[1],b2=b[2],b3=b[3];return Math.abs(a0-b0)<=glMatrix.EPSILON*Math.max(1,Math.abs(a0),Math.abs(b0))&&Math.abs(a1-b1)<=glMatrix.EPSILON*Math.max(1,Math.abs(a1),Math.abs(b1))&&Math.abs(a2-b2)<=glMatrix.EPSILON*Math.max(1,Math.abs(a2),Math.abs(b2))&&Math.abs(a3-b3)<=glMatrix.EPSILON*Math.max(1,Math.abs(a3),Math.abs(b3))};module.exports=vec4},{"./common.js":15}],24:[function(require,module,exports){module.exports=normalize;function normalize(out,a){var x=a[0],y=a[1],z=a[2];var len=x*x+y*y+z*z;if(len>0){len=1/Math.sqrt(len);out[0]=a[0]*len;out[1]=a[1]*len;out[2]=a[2]*len}return out}},{}],25:[function(require,module,exports){module.exports=scale;function scale(out,a,b){out[0]=a[0]*b;out[1]=a[1]*b;out[2]=a[2]*b;return out}},{}],26:[function(require,module,exports){module.exports=transformMat4;function transformMat4(out,a,m){var x=a[0],y=a[1],z=a[2],w=m[3]*x+m[7]*y+m[11]*z+m[15];w=w||1;out[0]=(m[0]*x+m[4]*y+m[8]*z+m[12])/w;out[1]=(m[1]*x+m[5]*y+m[9]*z+m[13])/w;out[2]=(m[2]*x+m[6]*y+m[10]*z+m[14])/w;return out}},{}],27:[function(require,module,exports){module.exports=function(strings){if(typeof strings==="string")strings=[strings];var exprs=[].slice.call(arguments,1);var parts=[];for(var i=0;i<strings.length-1;i++){parts.push(strings[i],exprs[i]||"")}parts.push(strings[i]);return parts.join("")}},{}],28:[function(require,module,exports){module.exports=[["#69d2e7","#a7dbd8","#e0e4cc","#f38630","#fa6900"],["#fe4365","#fc9d9a","#f9cdad","#c8c8a9","#83af9b"],["#ecd078","#d95b43","#c02942","#542437","#53777a"],["#556270","#4ecdc4","#c7f464","#ff6b6b","#c44d58"],["#774f38","#e08e79","#f1d4af","#ece5ce","#c5e0dc"],["#e8ddcb","#cdb380","#036564","#033649","#031634"],["#490a3d","#bd1550","#e97f02","#f8ca00","#8a9b0f"],["#594f4f","#547980","#45ada8","#9de0ad","#e5fcc2"],["#00a0b0","#6a4a3c","#cc333f","#eb6841","#edc951"],["#e94e77","#d68189","#c6a49a","#c6e5d9","#f4ead5"],["#3fb8af","#7fc7af","#dad8a7","#ff9e9d","#ff3d7f"],["#d9ceb2","#948c75","#d5ded9","#7a6a53","#99b2b7"],["#ffffff","#cbe86b","#f2e9e1","#1c140d","#cbe86b"],["#efffcd","#dce9be","#555152","#2e2633","#99173c"],["#343838","#005f6b","#008c9e","#00b4cc","#00dffc"],["#413e4a","#73626e","#b38184","#f0b49e","#f7e4be"],["#ff4e50","#fc913a","#f9d423","#ede574","#e1f5c4"],["#99b898","#fecea8","#ff847c","#e84a5f","#2a363b"],["#655643","#80bca3","#f6f7bd","#e6ac27","#bf4d28"],["#00a8c6","#40c0cb","#f9f2e7","#aee239","#8fbe00"],["#351330","#424254","#64908a","#e8caa4","#cc2a41"],["#554236","#f77825","#d3ce3d","#f1efa5","#60b99a"],["#ff9900","#424242","#e9e9e9","#bcbcbc","#3299bb"],["#5d4157","#838689","#a8caba","#cad7b2","#ebe3aa"],["#8c2318","#5e8c6a","#88a65e","#bfb35a","#f2c45a"],["#fad089","#ff9c5b","#f5634a","#ed303c","#3b8183"],["#ff4242","#f4fad2","#d4ee5e","#e1edb9","#f0f2eb"],["#d1e751","#ffffff","#000000","#4dbce9","#26ade4"],["#f8b195","#f67280","#c06c84","#6c5b7b","#355c7d"],["#1b676b","#519548","#88c425","#bef202","#eafde6"],["#bcbdac","#cfbe27","#f27435","#f02475","#3b2d38"],["#5e412f","#fcebb6","#78c0a8","#f07818","#f0a830"],["#452632","#91204d","#e4844a","#e8bf56","#e2f7ce"],["#eee6ab","#c5bc8e","#696758","#45484b","#36393b"],["#f0d8a8","#3d1c00","#86b8b1","#f2d694","#fa2a00"],["#f04155","#ff823a","#f2f26f","#fff7bd","#95cfb7"],["#2a044a","#0b2e59","#0d6759","#7ab317","#a0c55f"],["#bbbb88","#ccc68d","#eedd99","#eec290","#eeaa88"],["#b9d7d9","#668284","#2a2829","#493736","#7b3b3b"],["#b3cc57","#ecf081","#ffbe40","#ef746f","#ab3e5b"],["#a3a948","#edb92e","#f85931","#ce1836","#009989"],["#67917a","#170409","#b8af03","#ccbf82","#e33258"],["#e8d5b7","#0e2430","#fc3a51","#f5b349","#e8d5b9"],["#aab3ab","#c4cbb7","#ebefc9","#eee0b7","#e8caaf"],["#300030","#480048","#601848","#c04848","#f07241"],["#ab526b","#bca297","#c5ceae","#f0e2a4","#f4ebc3"],["#607848","#789048","#c0d860","#f0f0d8","#604848"],["#a8e6ce","#dcedc2","#ffd3b5","#ffaaa6","#ff8c94"],["#3e4147","#fffedf","#dfba69","#5a2e2e","#2a2c31"],["#b6d8c0","#c8d9bf","#dadabd","#ecdbbc","#fedcba"],["#fc354c","#29221f","#13747d","#0abfbc","#fcf7c5"],["#1c2130","#028f76","#b3e099","#ffeaad","#d14334"],["#edebe6","#d6e1c7","#94c7b6","#403b33","#d3643b"],["#cc0c39","#e6781e","#c8cf02","#f8fcc1","#1693a7"],["#dad6ca","#1bb0ce","#4f8699","#6a5e72","#563444"],["#a7c5bd","#e5ddcb","#eb7b59","#cf4647","#524656"],["#fdf1cc","#c6d6b8","#987f69","#e3ad40","#fcd036"],["#5c323e","#a82743","#e15e32","#c0d23e","#e5f04c"],["#230f2b","#f21d41","#ebebbc","#bce3c5","#82b3ae"],["#b9d3b0","#81bda4","#b28774","#f88f79","#f6aa93"],["#3a111c","#574951","#83988e","#bcdea5","#e6f9bc"],["#5e3929","#cd8c52","#b7d1a3","#dee8be","#fcf7d3"],["#1c0113","#6b0103","#a30006","#c21a01","#f03c02"],["#382f32","#ffeaf2","#fcd9e5","#fbc5d8","#f1396d"],["#e3dfba","#c8d6bf","#93ccc6","#6cbdb5","#1a1f1e"],["#000000","#9f111b","#b11623","#292c37","#cccccc"],["#c1b398","#605951","#fbeec2","#61a6ab","#accec0"],["#8dccad","#988864","#fea6a2","#f9d6ac","#ffe9af"],["#f6f6f6","#e8e8e8","#333333","#990100","#b90504"],["#1b325f","#9cc4e4","#e9f2f9","#3a89c9","#f26c4f"],["#5e9fa3","#dcd1b4","#fab87f","#f87e7b","#b05574"],["#951f2b","#f5f4d7","#e0dfb1","#a5a36c","#535233"],["#413d3d","#040004","#c8ff00","#fa023c","#4b000f"],["#eff3cd","#b2d5ba","#61ada0","#248f8d","#605063"],["#2d2d29","#215a6d","#3ca2a2","#92c7a3","#dfece6"],["#cfffdd","#b4dec1","#5c5863","#a85163","#ff1f4c"],["#4e395d","#827085","#8ebe94","#ccfc8e","#dc5b3e"],["#9dc9ac","#fffec7","#f56218","#ff9d2e","#919167"],["#a1dbb2","#fee5ad","#faca66","#f7a541","#f45d4c"],["#ffefd3","#fffee4","#d0ecea","#9fd6d2","#8b7a5e"],["#a8a7a7","#cc527a","#e8175d","#474747","#363636"],["#ffedbf","#f7803c","#f54828","#2e0d23","#f8e4c1"],["#f8edd1","#d88a8a","#474843","#9d9d93","#c5cfc6"],["#f38a8a","#55443d","#a0cab5","#cde9ca","#f1edd0"],["#4e4d4a","#353432","#94ba65","#2790b0","#2b4e72"],["#0ca5b0","#4e3f30","#fefeeb","#f8f4e4","#a5b3aa"],["#a70267","#f10c49","#fb6b41","#f6d86b","#339194"],["#9d7e79","#ccac95","#9a947c","#748b83","#5b756c"],["#edf6ee","#d1c089","#b3204d","#412e28","#151101"],["#046d8b","#309292","#2fb8ac","#93a42a","#ecbe13"],["#4d3b3b","#de6262","#ffb88c","#ffd0b3","#f5e0d3"],["#fffbb7","#a6f6af","#66b6ab","#5b7c8d","#4f2958"],["#ff003c","#ff8a00","#fabe28","#88c100","#00c176"],["#fcfef5","#e9ffe1","#cdcfb7","#d6e6c3","#fafbe3"],["#9cddc8","#bfd8ad","#ddd9ab","#f7af63","#633d2e"],["#30261c","#403831","#36544f","#1f5f61","#0b8185"],["#d1313d","#e5625c","#f9bf76","#8eb2c5","#615375"],["#ffe181","#eee9e5","#fad3b2","#ffba7f","#ff9c97"],["#aaff00","#ffaa00","#ff00aa","#aa00ff","#00aaff"],["#c2412d","#d1aa34","#a7a844","#a46583","#5a1e4a"]];
},{}],29:[function(require,module,exports){(function(process){(function(){var getNanoSeconds,hrtime,loadTime;if(typeof performance!=="undefined"&&performance!==null&&performance.now){module.exports=function(){return performance.now()}}else if(typeof process!=="undefined"&&process!==null&&process.hrtime){module.exports=function(){return(getNanoSeconds()-loadTime)/1e6};hrtime=process.hrtime;getNanoSeconds=function(){var hr;hr=hrtime();return hr[0]*1e9+hr[1]};loadTime=getNanoSeconds()}else if(Date.now){module.exports=function(){return Date.now()-loadTime};loadTime=Date.now()}else{module.exports=function(){return(new Date).getTime()-loadTime};loadTime=(new Date).getTime()}}).call(this)}).call(this,require("_process"))},{_process:31}],30:[function(require,module,exports){var identity=require("gl-mat4/identity");var rotateY=require("gl-mat4/rotateY");var rotateZ=require("gl-mat4/rotateZ");var scale=require("gl-vec3/scale");var transformMat4=require("gl-vec3/transformMat4");var normalize=require("gl-vec3/normalize");var matRotY=identity([]);var matRotZ=identity([]);var up=[0,1,0];var tmpVec3=[0,0,0];module.exports=primitiveSphere;function primitiveSphere(radius,opt){opt=opt||{};radius=typeof radius!=="undefined"?radius:1;var segments=typeof opt.segments!=="undefined"?opt.segments:32;var totalZRotationSteps=2+segments;var totalYRotationSteps=2*totalZRotationSteps;var indices=[];var positions=[];var normals=[];var uvs=[];for(var zRotationStep=0;zRotationStep<=totalZRotationSteps;zRotationStep++){var normalizedZ=zRotationStep/totalZRotationSteps;var angleZ=normalizedZ*Math.PI;for(var yRotationStep=0;yRotationStep<=totalYRotationSteps;yRotationStep++){var normalizedY=yRotationStep/totalYRotationSteps;var angleY=normalizedY*Math.PI*2;identity(matRotZ);rotateZ(matRotZ,matRotZ,-angleZ);identity(matRotY);rotateY(matRotY,matRotY,angleY);transformMat4(tmpVec3,up,matRotZ);transformMat4(tmpVec3,tmpVec3,matRotY);scale(tmpVec3,tmpVec3,-radius);positions.push(tmpVec3.slice());normalize(tmpVec3,tmpVec3);normals.push(tmpVec3.slice());uvs.push([normalizedY,normalizedZ])}if(zRotationStep>0){var verticesCount=positions.length;var firstIndex=verticesCount-2*(totalYRotationSteps+1);for(;firstIndex+totalYRotationSteps+2<verticesCount;firstIndex++){indices.push([firstIndex,firstIndex+1,firstIndex+totalYRotationSteps+1]);indices.push([firstIndex+totalYRotationSteps+1,firstIndex+1,firstIndex+totalYRotationSteps+2])}}}return{cells:indices,positions:positions,normals:normals,uvs:uvs}}},{"gl-mat4/identity":11,"gl-mat4/rotateY":12,"gl-mat4/rotateZ":13,"gl-vec3/normalize":24,"gl-vec3/scale":25,"gl-vec3/transformMat4":26}],31:[function(require,module,exports){var process=module.exports={};var cachedSetTimeout;var cachedClearTimeout;function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){cachedSetTimeout=setTimeout}else{cachedSetTimeout=defaultSetTimout}}catch(e){cachedSetTimeout=defaultSetTimout}try{if(typeof clearTimeout==="function"){cachedClearTimeout=clearTimeout}else{cachedClearTimeout=defaultClearTimeout}}catch(e){cachedClearTimeout=defaultClearTimeout}})();function runTimeout(fun){if(cachedSetTimeout===setTimeout){return setTimeout(fun,0)}if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout){cachedSetTimeout=setTimeout;return setTimeout(fun,0)}try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout){return clearTimeout(marker)}if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout){cachedClearTimeout=clearTimeout;return clearTimeout(marker)}try{return cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}var queue=[];var draining=false;var currentQueue;var queueIndex=-1;function cleanUpNextTick(){if(!draining||!currentQueue){return}draining=false;if(currentQueue.length){queue=currentQueue.concat(queue)}else{queueIndex=-1}if(queue.length){drainQueue()}}function drainQueue(){if(draining){return}var timeout=runTimeout(cleanUpNextTick);draining=true;var len=queue.length;while(len){currentQueue=queue;queue=[];while(++queueIndex<len){if(currentQueue){currentQueue[queueIndex].run()}}queueIndex=-1;len=queue.length}currentQueue=null;draining=false;runClearTimeout(timeout)}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1){for(var i=1;i<arguments.length;i++){args[i-1]=arguments[i]}}queue.push(new Item(fun,args));if(queue.length===1&&!draining){runTimeout(drainQueue)}};function Item(fun,array){this.fun=fun;this.array=array}Item.prototype.run=function(){this.fun.apply(null,this.array)};process.title="browser";process.browser=true;process.env={};process.argv=[];process.version="";process.versions={};function noop(){}process.on=noop;process.addListener=noop;process.once=noop;process.off=noop;process.removeListener=noop;process.removeAllListeners=noop;process.emit=noop;process.binding=function(name){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(dir){throw new Error("process.chdir is not supported")};process.umask=function(){return 0}},{}],32:[function(require,module,exports){(function(global){(function(root){var freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports;var freeModule=typeof module=="object"&&module&&!module.nodeType&&module;var freeGlobal=typeof global=="object"&&global;if(freeGlobal.global===freeGlobal||freeGlobal.window===freeGlobal||freeGlobal.self===freeGlobal){root=freeGlobal}var punycode,maxInt=2147483647,base=36,tMin=1,tMax=26,skew=38,damp=700,initialBias=72,initialN=128,delimiter="-",regexPunycode=/^xn--/,regexNonASCII=/[^\x20-\x7E]/,regexSeparators=/[\x2E\u3002\uFF0E\uFF61]/g,errors={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},baseMinusTMin=base-tMin,floor=Math.floor,stringFromCharCode=String.fromCharCode,key;function error(type){throw new RangeError(errors[type])}function map(array,fn){var length=array.length;var result=[];while(length--){result[length]=fn(array[length])}return result}function mapDomain(string,fn){var parts=string.split("@");var result="";if(parts.length>1){result=parts[0]+"@";string=parts[1]}string=string.replace(regexSeparators,".");var labels=string.split(".");var encoded=map(labels,fn).join(".");return result+encoded}function ucs2decode(string){var output=[],counter=0,length=string.length,value,extra;while(counter<length){value=string.charCodeAt(counter++);if(value>=55296&&value<=56319&&counter<length){extra=string.charCodeAt(counter++);if((extra&64512)==56320){output.push(((value&1023)<<10)+(extra&1023)+65536)}else{output.push(value);counter--}}else{output.push(value)}}return output}function ucs2encode(array){return map(array,function(value){var output="";if(value>65535){value-=65536;output+=stringFromCharCode(value>>>10&1023|55296);value=56320|value&1023}output+=stringFromCharCode(value);return output}).join("")}function basicToDigit(codePoint){if(codePoint-48<10){return codePoint-22}if(codePoint-65<26){return codePoint-65}if(codePoint-97<26){return codePoint-97}return base}function digitToBasic(digit,flag){return digit+22+75*(digit<26)-((flag!=0)<<5)}function adapt(delta,numPoints,firstTime){var k=0;delta=firstTime?floor(delta/damp):delta>>1;delta+=floor(delta/numPoints);for(;delta>baseMinusTMin*tMax>>1;k+=base){delta=floor(delta/baseMinusTMin)}return floor(k+(baseMinusTMin+1)*delta/(delta+skew))}function decode(input){var output=[],inputLength=input.length,out,i=0,n=initialN,bias=initialBias,basic,j,index,oldi,w,k,digit,t,baseMinusT;basic=input.lastIndexOf(delimiter);if(basic<0){basic=0}for(j=0;j<basic;++j){if(input.charCodeAt(j)>=128){error("not-basic")}output.push(input.charCodeAt(j))}for(index=basic>0?basic+1:0;index<inputLength;){for(oldi=i,w=1,k=base;;k+=base){if(index>=inputLength){error("invalid-input")}digit=basicToDigit(input.charCodeAt(index++));if(digit>=base||digit>floor((maxInt-i)/w)){error("overflow")}i+=digit*w;t=k<=bias?tMin:k>=bias+tMax?tMax:k-bias;if(digit<t){break}baseMinusT=base-t;if(w>floor(maxInt/baseMinusT)){error("overflow")}w*=baseMinusT}out=output.length+1;bias=adapt(i-oldi,out,oldi==0);if(floor(i/out)>maxInt-n){error("overflow")}n+=floor(i/out);i%=out;output.splice(i++,0,n)}return ucs2encode(output)}function encode(input){var n,delta,handledCPCount,basicLength,bias,j,m,q,k,t,currentValue,output=[],inputLength,handledCPCountPlusOne,baseMinusT,qMinusT;input=ucs2decode(input);inputLength=input.length;n=initialN;delta=0;bias=initialBias;for(j=0;j<inputLength;++j){currentValue=input[j];if(currentValue<128){output.push(stringFromCharCode(currentValue))}}handledCPCount=basicLength=output.length;if(basicLength){output.push(delimiter)}while(handledCPCount<inputLength){for(m=maxInt,j=0;j<inputLength;++j){currentValue=input[j];if(currentValue>=n&&currentValue<m){m=currentValue}}handledCPCountPlusOne=handledCPCount+1;if(m-n>floor((maxInt-delta)/handledCPCountPlusOne)){error("overflow")}delta+=(m-n)*handledCPCountPlusOne;n=m;for(j=0;j<inputLength;++j){currentValue=input[j];if(currentValue<n&&++delta>maxInt){error("overflow")}if(currentValue==n){for(q=delta,k=base;;k+=base){t=k<=bias?tMin:k>=bias+tMax?tMax:k-bias;if(q<t){break}qMinusT=q-t;baseMinusT=base-t;output.push(stringFromCharCode(digitToBasic(t+qMinusT%baseMinusT,0)));q=floor(qMinusT/baseMinusT)}output.push(stringFromCharCode(digitToBasic(q,0)));bias=adapt(delta,handledCPCountPlusOne,handledCPCount==basicLength);delta=0;++handledCPCount}}++delta;++n}return output.join("")}function toUnicode(input){return mapDomain(input,function(string){return regexPunycode.test(string)?decode(string.slice(4).toLowerCase()):string})}function toASCII(input){return mapDomain(input,function(string){return regexNonASCII.test(string)?"xn--"+encode(string):string})}punycode={version:"1.4.1",ucs2:{decode:ucs2decode,encode:ucs2encode},decode:decode,encode:encode,toASCII:toASCII,toUnicode:toUnicode};if(typeof define=="function"&&typeof define.amd=="object"&&define.amd){define("punycode",function(){return punycode})}else if(freeExports&&freeModule){if(module.exports==freeExports){freeModule.exports=punycode}else{for(key in punycode){punycode.hasOwnProperty(key)&&(freeExports[key]=punycode[key])}}}else{root.punycode=punycode}})(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],33:[function(require,module,exports){"use strict";function hasOwnProperty(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)}module.exports=function(qs,sep,eq,options){sep=sep||"&";eq=eq||"=";var obj={};if(typeof qs!=="string"||qs.length===0){return obj}var regexp=/\+/g;qs=qs.split(sep);var maxKeys=1e3;if(options&&typeof options.maxKeys==="number"){maxKeys=options.maxKeys}var len=qs.length;if(maxKeys>0&&len>maxKeys){len=maxKeys}for(var i=0;i<len;++i){var x=qs[i].replace(regexp,"%20"),idx=x.indexOf(eq),kstr,vstr,k,v;if(idx>=0){kstr=x.substr(0,idx);vstr=x.substr(idx+1)}else{kstr=x;vstr=""}k=decodeURIComponent(kstr);v=decodeURIComponent(vstr);if(!hasOwnProperty(obj,k)){obj[k]=v}else if(isArray(obj[k])){obj[k].push(v)}else{obj[k]=[obj[k],v]}}return obj};var isArray=Array.isArray||function(xs){return Object.prototype.toString.call(xs)==="[object Array]"}},{}],34:[function(require,module,exports){"use strict";var stringifyPrimitive=function(v){switch(typeof v){case"string":return v;case"boolean":return v?"true":"false";case"number":return isFinite(v)?v:"";default:return""}};module.exports=function(obj,sep,eq,name){sep=sep||"&";eq=eq||"=";if(obj===null){obj=undefined}if(typeof obj==="object"){return map(objectKeys(obj),function(k){var ks=encodeURIComponent(stringifyPrimitive(k))+eq;if(isArray(obj[k])){return map(obj[k],function(v){return ks+encodeURIComponent(stringifyPrimitive(v))}).join(sep)}else{return ks+encodeURIComponent(stringifyPrimitive(obj[k]))}}).join(sep)}if(!name)return"";return encodeURIComponent(stringifyPrimitive(name))+eq+encodeURIComponent(stringifyPrimitive(obj))};var isArray=Array.isArray||function(xs){return Object.prototype.toString.call(xs)==="[object Array]"};function map(xs,f){if(xs.map)return xs.map(f);var res=[];for(var i=0;i<xs.length;i++){res.push(f(xs[i],i))}return res}var objectKeys=Object.keys||function(obj){var res=[];for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))res.push(key)}return res}},{}],35:[function(require,module,exports){"use strict";exports.decode=exports.parse=require("./decode");exports.encode=exports.stringify=require("./encode")},{"./decode":33,"./encode":34}],36:[function(require,module,exports){"use strict";var QueryStringSerializer=require("./querystringserializer.js");module.exports=QueryStringParser;var rplus=/\+/g;var rint=/^[0-9]+$/;var isArray=Array.isArray;var haveProp={}.hasOwnProperty;function QueryStringParser(){this.containsSparse=false;this.cacheKey="";this.cacheVal=null}QueryStringParser.maxLength=32768;QueryStringParser.maxDepth=4;QueryStringParser.maxKeys=256;QueryStringParser.parse=function QueryStringParser$Parse(str){if(typeof str==="string"){var maxLength=QueryStringParser.maxLength;if(str.length>maxLength){throw new RangeError("str is too large ("+"QueryStringParser.maxLength="+maxLength+")")}var parser=new QueryStringParser;return parser.parseString(str,false)}else if(str!==null&&typeof str==="object"){var parser=new QueryStringParser;return parser.parseObject(str)}return{}};QueryStringParser.stringify=function QueryStringParser$Stringify(value){var serializer=new QueryStringSerializer;return serializer.serialize(value)};QueryStringParser.prototype.decode=function QueryStringParser$decode(str,shouldDecode,containsPlus){if(shouldDecode===false)return str;if(containsPlus===true)str=str.replace(rplus," ");try{return decodeURIComponent(str)}catch(e){return str}};QueryStringParser.prototype.maybeArrayIndex=function QueryStringParser$maybeArrayIndex(str,arrayLength){var len=str.length;if(len===0){return arrayLength}var ch=str.charCodeAt(0);if(ch===48){return len>1?-1:0}else if(48<=ch&&ch<=57){if(len===1){return ch-48}else if(rint.test(str)){var v=parseInt(str,10);if(0<v&&v<=1073741822){return v}}}return-1};QueryStringParser.prototype.getSlot=function QueryStringParser$getSlot(dictionary,prevKey,curKey){var slot;if(!haveProp.call(dictionary,prevKey)){var index=this.maybeArrayIndex(curKey,0);if(index>-1){slot=[]}else{slot={}}dictionary[prevKey]=slot}else{slot=dictionary[prevKey]}return slot};QueryStringParser.prototype.placeNestedValue=function QueryStringParser$placeNestedValue(dictionary,key,value,i,prevKey,curKey){var slot=this.getSlot(dictionary,prevKey,curKey);var index=-1;if(isArray(slot)){index=this.maybeArrayIndex(curKey,slot.length)}var len=key.length;var depth=2;var maxDepth=QueryStringParser.maxDepth;var start=-1;for(;i<len;++i){var ch=key.charCodeAt(i);if(ch===91){start=i+1}else if(ch===93&&start>-1){prevKey=curKey;curKey=start===i?"":key.substring(start,i);start=-1;depth++;if(depth>maxDepth){throw new RangeError("Nesting depth of keys is too large "+"(QueryStringParser.maxDepth="+maxDepth+")")}slot=this.getSlot(slot,prevKey,curKey);index=isArray(slot)?this.maybeArrayIndex(curKey,slot.length):-1}}if(index>-1){if(value!==""){if(index===slot.length){slot.push(value)}else{this.containsSparse=true;slot[index]=value}}}else{this.insert(slot,curKey,value)}};QueryStringParser.prototype.insert=function QueryStringParser$insert(dictionary,key,value){var ret=null;if(haveProp.call(dictionary,key)){var prev=dictionary[key];if(isArray(prev)){prev.push(value);ret=prev}else{ret=[prev,value];dictionary[key]=ret}}else{dictionary[key]=value}return ret};QueryStringParser.prototype.push=function QueryStringParser$push(dictionary,key,value){var ret=null;if(haveProp.call(dictionary,key)){var prev=dictionary[key];prev.push(value);ret=prev}else{ret=[value];dictionary[key]=ret}return ret};QueryStringParser.prototype.maybePlaceNestedValue=function QueryStringParser$maybePlaceNestedValue(dictionary,key,value){var len=key.length;if(key.charCodeAt(len-1)!==93){this.placeValue(dictionary,key,value,false);return}var start=-1;var i=0;var curKey;var prevKey;for(;i<len;++i){var ch=key.charCodeAt(i);if(ch===91){start=i+1;prevKey=key.slice(0,i)}else if(ch===93){if(start<0){this.placeValue(dictionary,key,value,false);return}curKey=start===i?"":key.slice(start,i);i++;break}}if(curKey===void 0){this.placeValue(dictionary,key,value,false);return}if(curKey===""&&value!==""&&i===len){if(key===this.cacheKey){this.cacheVal.push(value)}else{this.cacheKey=key;this.cacheVal=this.push(dictionary,prevKey,value)}}else{this.placeNestedValue(dictionary,key,value,i,prevKey,curKey)}};QueryStringParser.prototype.placeValue=function QueryStringParser$placeValue(dictionary,key,value,possiblyNested){if(possiblyNested===true){this.maybePlaceNestedValue(dictionary,key,value);return}if(key===this.cacheKey){this.cacheVal.push(value);return}var cache=this.insert(dictionary,key,value);if(cache!==null){this.cacheKey=key;this.cacheVal=cache}};QueryStringParser.prototype.compact=function QueryStringParser$compact(obj){if(isArray(obj)){var ret=[];var keys=Object.keys(obj);for(var i=0,len=keys.length;i<len;++i){ret.push(obj[keys[i]])}return ret}else if(typeof obj==="object"){var keys=Object.keys(obj);for(var i=0,len=keys.length;i<len;++i){var key=keys[i];obj[key]=this.compact(obj[key])}}else{return obj}};QueryStringParser.prototype.parseObject=function QueryStringParser$parseObject(obj){var keys=Object.keys(obj);var len=keys.length;if(len===0){return{}}len--;var ret="";var key;for(var i=0;i<len;++i){key=keys[i];ret+=key+"="+obj[key]+"&"}key=keys[i];ret+=key+"="+obj[key];return this.parseString(ret,true)};QueryStringParser.prototype.parseString=function QueryStringParser$parseString(str,noDecode){var maxKeys=QueryStringParser.maxKeys;var keys=0;var decodeKey=false;var decodeValue=false;var possiblyNested=false;var len=str.length;var i=0;var dictionary={};var keyStart=0;var keyEnd=0;var valueStart=0;var valueEnd=0;var left=0;var lastIndex=len-1;var containsPlus=false;for(;i<len;++i){var ch=str.charCodeAt(i);if(ch===91){left++}else if(left>0&&ch===93){possiblyNested=true;left--}else if(left===0&&ch===61){var j=i+1;keyEnd=i-1;valueEnd=valueStart=j;var key=str.slice(keyStart,keyEnd+1);key=this.decode(key,decodeKey,containsPlus);decodeKey=false;for(;j<len;++j){ch=str.charCodeAt(j);if((ch===43||ch===37)&&!noDecode){if(ch===43)containsPlus=true;decodeValue=true}if(ch===38||j===lastIndex){valueEnd=j;i=j;if(ch===38){valueEnd--}var value=str.slice(valueStart,valueEnd+1);value=this.decode(value,decodeValue,containsPlus);this.placeValue(dictionary,key,value,possiblyNested);containsPlus=decodeValue=false;possiblyNested=false;keyStart=j+1;keys++;if(keys>maxKeys){throw new RangeError("Amount of keys is too large "+"(QueryStringParser.maxKeys="+maxKeys+")")}break}}}else if((ch===43||ch===37)&&!noDecode){if(ch===43)containsPlus=true;decodeKey=true}}if(keyStart!==len){var value="";var key=str.slice(keyStart,len);key=this.decode(key,decodeKey,containsPlus);this.placeValue(dictionary,key,value,possiblyNested)}if(this.containsSparse){this.compact(dictionary)}return dictionary}},{"./querystringserializer.js":37}],37:[function(require,module,exports){"use strict";module.exports=QueryStringSerializer;var enc=encodeURIComponent;var ARRAY=[];var isArray=Array.isArray;var getProto=Object.getPrototypeOf;var oProto=getProto({});function isObject(obj){if(isArray(obj)){return true}if(obj===null||typeof obj!=="object"){return false}var proto=getProto(obj);return proto===oProto||proto===null}function QueryStringSerializer(){}QueryStringSerializer.prototype.serialize=function QueryStringSerializer$serialize(obj){if(obj===null||typeof obj!=="object"){throw new TypeError("the obj to stringify must be an object")}var keys=Object.keys(obj);var len=keys.length;var array=ARRAY;var stack=[];var ret=[];var cur=obj;var keyPrefix="";for(var i=0;i<len;++i){var key=keys===array?i:keys[i];var value=cur[key];if(isObject(value)){stack.push(keyPrefix,cur,keys,len,i);if(keyPrefix===""){keyPrefix=key}else{keyPrefix=keyPrefix+"["+enc(key)+"]"}if(isArray(value)){keys=array;len=value.length}else{keys=Object.keys(value);len=keys.length}i=-1;cur=value}else{if(typeof value!=="string"){value=""+value}var serializedKey=keyPrefix===""?enc(key):keyPrefix+"["+enc(key)+"]";ret.push(serializedKey+"="+enc(value))}if(i===len-1&&stack.length>0){i=stack.pop();len=stack.pop();keys=stack.pop();cur=stack.pop();keyPrefix=stack.pop()}}return ret.join("&")}},{}],38:[function(require,module,exports){(function(global){var now=require("performance-now"),root=typeof window==="undefined"?global:window,vendors=["moz","webkit"],suffix="AnimationFrame",raf=root["request"+suffix],caf=root["cancel"+suffix]||root["cancelRequest"+suffix];for(var i=0;!raf&&i<vendors.length;i++){raf=root[vendors[i]+"Request"+suffix];caf=root[vendors[i]+"Cancel"+suffix]||root[vendors[i]+"CancelRequest"+suffix]}if(!raf||!caf){var last=0,id=0,queue=[],frameDuration=1e3/60;raf=function(callback){if(queue.length===0){var _now=now(),next=Math.max(0,frameDuration-(_now-last));last=next+_now;setTimeout(function(){var cp=queue.slice(0);queue.length=0;for(var i=0;i<cp.length;i++){if(!cp[i].cancelled){try{cp[i].callback(last)}catch(e){setTimeout(function(){throw e},0)}}}},Math.round(next))}queue.push({handle:++id,callback:callback,cancelled:false});return id};caf=function(handle){for(var i=0;i<queue.length;i++){if(queue[i].handle===handle){queue[i].cancelled=true}}}}module.exports=function(fn){return raf.call(root,fn)};module.exports.cancel=function(){caf.apply(root,arguments)};module.exports.polyfill=function(){root.requestAnimationFrame=raf;root.cancelAnimationFrame=caf}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"performance-now":29}],39:[function(require,module,exports){var defaultOptions={emptyUserAgentDeviceType:"desktop",unknownUserAgentDeviceType:"phone",botUserAgentDeviceType:"bot"};var devices={tv:"tv",tablet:"tablet",phone:"phone",desktop:"desktop",bot:"bot"};module.exports=function(ua,options){options=options||{};if(!ua||ua===""){return options.emptyUserAgentDeviceType||devices.desktop}if(ua.match(/GoogleTV|SmartTV|Internet TV|NetCast|NETTV|AppleTV|boxee|Kylo|Roku|DLNADOC|CE\-HTML/i)){return devices.tv}else if(ua.match(/Xbox|PLAYSTATION 3|Wii/i)){return devices.tv}else if(ua.match(/iP(a|ro)d/i)||ua.match(/tablet/i)&&!ua.match(/RX-34/i)||ua.match(/FOLIO/i)){return devices.tablet}else if(ua.match(/Linux/i)&&ua.match(/Android/i)&&!ua.match(/Fennec|mobi|HTC Magic|HTCX06HT|Nexus One|SC-02B|fone 945/i)){return devices.tablet}else if(ua.match(/Kindle/i)||ua.match(/Mac OS/i)&&ua.match(/Silk/i)){return devices.tablet}else if(ua.match(/GT-P10|SC-01C|SHW-M180S|SGH-T849|SCH-I800|SHW-M180L|SPH-P100|SGH-I987|zt180|HTC( Flyer|_Flyer)|Sprint ATP51|ViewPad7|pandigital(sprnova|nova)|Ideos S7|Dell Streak 7|Advent Vega|A101IT|A70BHT|MID7015|Next2|nook/i)||ua.match(/MB511/i)&&ua.match(/RUTEM/i)){return devices.tablet}else if(ua.match(/BOLT|Fennec|Iris|Maemo|Minimo|Mobi|mowser|NetFront|Novarra|Prism|RX-34|Skyfire|Tear|XV6875|XV6975|Google Wireless Transcoder/i)){return devices.phone}else if(ua.match(/Opera/i)&&ua.match(/Windows NT 5/i)&&ua.match(/HTC|Xda|Mini|Vario|SAMSUNG\-GT\-i8000|SAMSUNG\-SGH\-i9/i)){return devices.phone}else if(ua.match(/Windows (NT|XP|ME|9)/)&&!ua.match(/Phone/i)&&!ua.match(/Bot|Spider|ia_archiver|NewsGator/i)||ua.match(/Win( ?9|NT)/i)){return devices.desktop}else if(ua.match(/Macintosh|PowerPC/i)&&!ua.match(/Silk/i)){return devices.desktop}else if(ua.match(/Linux/i)&&ua.match(/X11/i)&&!ua.match(/Charlotte/i)){return devices.desktop}else if(ua.match(/CrOS/)){return devices.desktop}else if(ua.match(/Solaris|SunOS|BSD/i)){return devices.desktop}else if(ua.match(/curl|Bot|B-O-T|Crawler|Spider|Spyder|Yahoo|ia_archiver|Covario-IDS|findlinks|DataparkSearch|larbin|Mediapartners-Google|NG-Search|Snappy|Teoma|Jeeves|Charlotte|NewsGator|TinEye|Cerberian|SearchSight|Zao|Scrubby|Qseero|PycURL|Pompos|oegp|SBIder|yoogliFetchAgent|yacy|webcollage|VYU2|voyager|updated|truwoGPS|StackRambler|Sqworm|silk|semanticdiscovery|ScoutJet|Nymesis|NetResearchServer|MVAClient|mogimogi|Mnogosearch|Arachmo|Accoona|holmes|htdig|ichiro|webis|LinkWalker|lwp-trivial/i)&&!ua.match(/mobile|Playstation/i)){return options.botUserAgentDeviceType||devices.bot}else{return options.unknownUserAgentDeviceType||devices.phone}};module.exports.devices=devices;module.exports.defaultOptions=defaultOptions},{}],40:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var manifest=[];exports.default=manifest},{}],41:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var config={name:"L-system",controls:false,axiom:"F",rule:{a:"F",b:"FF_[_F-F-F]-[-F_F_F]"},rotation:{y:25,z:90},scaleDivisor:.65};exports.default=config},{}],42:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _gl=require("./gl");var _gl2=_interopRequireDefault(_gl);var _glMatrix=require("gl-matrix");var _SuperConfig=require("./dev/SuperConfig");var _SuperConfig2=_interopRequireDefault(_SuperConfig);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var len=50;function clone(obj){return JSON.parse(JSON.stringify(obj))}var plane=void 0;var material=void 0;var LSystem=function(){function LSystem(){_classCallCheck(this,LSystem);this.rules=[{a:_SuperConfig2.default.config.rule.a,b:_SuperConfig2.default.config.rule.b}];console.log(_SuperConfig2.default.config);var axiom=_SuperConfig2.default.config.axiom;for(var i=0;i<4;i++){axiom=this.generate(axiom)}plane=new _gl2.default.Geometry(_gl2.default.Primitive.cube(1,1,1,1));material=new _gl2.default.BasicMaterial({color:[.3,.3,.3]});this.positions=[];this.rotations=[];this.scales=[];this.buildGeom(axiom)}_createClass(LSystem,[{key:"generate",value:function generate(sentence){var transformed="";for(var i=0;i<sentence.length;i++){var current=sentence.charAt(i);var found=false;for(var j=0;j<this.rules.length;j++){if(current==this.rules[j].a){found=true;transformed+=this.rules[j].b;break}}if(!found){transformed+=current}}return transformed}},{key:"buildEl",value:function buildEl(state){var transform=_glMatrix.quat.create();_glMatrix.quat.rotateX(transform,transform,state.rotation[0]);_glMatrix.quat.rotateY(transform,transform,state.rotation[1]);_glMatrix.quat.rotateZ(transform,transform,state.rotation[2]);var pos=_glMatrix.vec3.fromValues(0,state.scale[1],0);_glMatrix.vec3.transformQuat(pos,pos,transform);_glMatrix.vec3.add(state.position,state.position,pos);this.positions.push(state.position[0],state.position[1],state.position[2]);this.rotations.push(transform[0],transform[1],transform[2],transform[3]);this.scales.push(state.scale[1]*.1,state.scale[1],state.scale[1]*.1)}},{key:"buildGeom",value:function buildGeom(sentence){var mesh=null;var state={position:_glMatrix.vec3.create(),rotation:_glMatrix.vec3.create(),scale:_glMatrix.vec3.fromValues(1,1,1)};var stateStack=[];for(var i=0;i<sentence.length;i++){var current=sentence.charAt(i);switch(current){case"F":this.buildEl(state);break;case"_":state.rotation[1]+=Math.PI/180*_SuperConfig2.default.config.rotation.y;state.rotation[2]+=Math.PI/180*_SuperConfig2.default.config.rotation.z;break;case"-":state.rotation[1]-=Math.PI/180*_SuperConfig2.default.config.rotation.y;state.rotation[2]-=Math.PI/180*_SuperConfig2.default.config.rotation.z;break;case"[":stateStack.push(clone(state));state.scale[1]*=_SuperConfig2.default.config.scaleDivisor;break;case"]":state=clone(stateStack.pop());break;default:}}}}]);return LSystem}();exports.default=LSystem},{"./dev/SuperConfig":47,"./gl":67,"gl-matrix":14}],43:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _gl=require("./gl");var _gl2=_interopRequireDefault(_gl);var _uaDeviceType=require("ua-device-type");var _uaDeviceType2=_interopRequireDefault(_uaDeviceType);var _OrbitalCameraControl=require("./gl/utils/OrbitalCameraControl");var _OrbitalCameraControl2=_interopRequireDefault(_OrbitalCameraControl);var _Query=require("./dev/Query");var _Query2=_interopRequireDefault(_Query);var _SuperConfig=require("./dev/SuperConfig");var _SuperConfig2=_interopRequireDefault(_SuperConfig);var _Screenshot=require("./dev/Screenshot");var _Screenshot2=_interopRequireDefault(_Screenshot);var _PingPong=require("./gl/utils/PingPong");var _PingPong2=_interopRequireDefault(_PingPong);var _glMatrix=require("gl-matrix");var _niceColorPalettes=require("nice-color-palettes");var _niceColorPalettes2=_interopRequireDefault(_niceColorPalettes);var _LSystem=require("./LSystem");var _LSystem2=_interopRequireDefault(_LSystem);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var glslify=require("glslify");window.ddevice=(0,_uaDeviceType2.default)(navigator.userAgent);if(_Query2.default.verbose){_gl2.default.debug.verbose=true}var Scene=function(){function Scene(){var _this=this;_classCallCheck(this,Scene);window.scene=this;this.webgl=new _gl2.default.Webgl;this.webgl.append();this.webgl.clearColor(.03,.03,.03,1);this.mouse={x:0,y:0};this.mouseEase={x:0,y:0};window.addEventListener("mousemove",function(e){_this.mouse.x=(e.clientX/window.innerWidth-.5)*2;_this.mouse.y=-(e.clientY/window.innerWidth-.5)*2;_this.mouse.x*=10;_this.mouse.y*=5});window.addEventListener("touchmove",function(e){_this.mouse.x=(e.touches[0].clientX/window.innerWidth-.5)*2;_this.mouse.y=-(e.touches[0].clientY/window.innerWidth-.5)*2;_this.mouse.x*=10;_this.mouse.y*=5});this.camera=new _gl2.default.PerspectiveCamera(45,window.innerWidth/window.innerHeight,.1,500);this.controls=new _OrbitalCameraControl2.default(this.camera,30,window);this.initComposer();var system=new _LSystem2.default;this.scene=new _gl2.default.Object3D;this.scene.system=system;var fog={density:.03,gradient:2,color:[.03,.03,.03]};var geom=new _gl2.default.Geometry(_gl2.default.Primitive.cube(1,1,1,1));geom.addInstancedAttribute("offsets",system.positions,1);geom.addInstancedAttribute("rotations",system.rotations,1);geom.addInstancedAttribute("scales",system.scales,1);geom.addCount(system.positions.length/3);var shader=new _gl2.default.BasicMaterial({
fog:fog,color:_gl2.default.utils.hexToRgb("#ffffff"),vertex:{start:"\n            attribute vec3 aOffset;\n            attribute vec4 aRotation;\n            attribute vec3 aScale;\n\n          ",main:"\n            p = vec4(aPosition,1.0);\n            vNormal = normalize(normalMatrix * aNormal +2.0 * cross( aRotation.xyz, cross( aRotation.xyz, p.xyz ) + aRotation.w * p.xyz ));\n\n            p.xyz *= aScale;\n            p.xyz += 2.0 * cross( aRotation.xyz, cross( aRotation.xyz, p.xyz ) + aRotation.w * p.xyz );\n            p.xyz = p.xyz + aOffset;\n\n\n          "}});var tree=new _gl2.default.Mesh(geom,shader);tree.scale.set(.6);this.scene.addChild(tree);var floor=new _gl2.default.Mesh(new _gl2.default.Geometry(_gl2.default.Primitive.plane(100,100,30,30)),new _gl2.default.BasicMaterial({fog:fog,color:_gl2.default.utils.hexToRgb("#ffffff")}));floor.rotation.x=90*Math.PI/180;this.scene.addChild(floor);var l=400;var offset=new Float32Array(l*3);var count=0;for(var i=0;i<l*3;i+=3){offset[count*3]=Math.random()*(100+100)-100;offset[count*3+1]=Math.random()*1;offset[count*3+2]=Math.random()*(40+40)-40;count++}var geomFloor=new _gl2.default.Geometry(_gl2.default.Primitive.cube(4,.4,4,1));geomFloor.addInstancedAttribute("offsets",offset,1);geomFloor.addCount(offset.length/3);var shader2=new _gl2.default.BasicMaterial({fog:fog,color:_gl2.default.utils.hexToRgb("#ffffff"),vertex:{start:"attribute vec3 aOffset;",main:"p = vec4(aPosition + aOffset, 1.0);"}});var floor2=new _gl2.default.Mesh(geomFloor,shader2);floor2.scale.set(.5);this.scene.addChild(floor2);this.scene.position.y=-6}_createClass(Scene,[{key:"initComposer",value:function initComposer(){this.composer=new _gl2.default.Composer(this.webgl,window.innerWidth*window.devicePixelRatio,window.innerHeight*window.devicePixelRatio,!!_Query2.default.debug);this.bloom=new _gl2.default.BloomPass({amount:3});this.bloom.enable=true;this.invert=new _gl2.default.InvertPass({amount:3});this.invert.enable=true}},{key:"render",value:function render(){if(_SuperConfig2.default.config.controls){this.controls.update()}else{console.log();this.camera.lookAt([this.mouseEase.x,this.mouseEase.y,30],[0,0,0],[0,1,0])}this.mouseEase.x+=(this.mouse.x-this.mouseEase.x)*.05;this.mouseEase.y+=(this.mouse.y-this.mouseEase.y)*.05;this.webgl.clear();_gl2.default.State.enable(gl.DEPTH_TEST);if(_Query2.default.config.postPro||true){this.composer.render(this.scene,this.camera)}else{this.webgl.render(this.scene,this.camera)}}},{key:"resize",value:function resize(){this.camera.aspect=window.innerWidth/window.innerHeight;this.webgl.resize()}}]);return Scene}();exports.default=Scene},{"./LSystem":42,"./dev/Query":45,"./dev/Screenshot":46,"./dev/SuperConfig":47,"./gl":67,"./gl/utils/OrbitalCameraControl":88,"./gl/utils/PingPong":89,"gl-matrix":14,glslify:27,"nice-color-palettes":28,"ua-device-type":39}],44:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _gl=require("./gl");var _gl2=_interopRequireDefault(_gl);var _uaDeviceType=require("ua-device-type");var _uaDeviceType2=_interopRequireDefault(_uaDeviceType);var _OrbitalCameraControl=require("./gl/utils/OrbitalCameraControl");var _OrbitalCameraControl2=_interopRequireDefault(_OrbitalCameraControl);var _Query=require("./dev/Query");var _Query2=_interopRequireDefault(_Query);var _SuperConfig=require("./dev/SuperConfig");var _SuperConfig2=_interopRequireDefault(_SuperConfig);var _Screenshot=require("./dev/Screenshot");var _Screenshot2=_interopRequireDefault(_Screenshot);var _PingPong=require("./gl/utils/PingPong");var _PingPong2=_interopRequireDefault(_PingPong);var _glMatrix=require("gl-matrix");var _niceColorPalettes=require("nice-color-palettes");var _niceColorPalettes2=_interopRequireDefault(_niceColorPalettes);var _LSystem=require("./LSystem");var _LSystem2=_interopRequireDefault(_LSystem);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var glslify=require("glslify");window.ddevice=(0,_uaDeviceType2.default)(navigator.userAgent);if(_Query2.default.verbose){_gl2.default.debug.verbose=true}var Scene=function(){function Scene(){var _this=this;_classCallCheck(this,Scene);window.scene=this;this.webgl=new _gl2.default.Webgl;this.webgl.append();this.webgl.clearColor(.03,.03,.03,1);this.mouse={x:0,y:0};this.mouseEase={x:0,y:0};window.addEventListener("mousemove",function(e){_this.mouse.x=(e.clientX/window.innerWidth-.5)*2;_this.mouse.y=-(e.clientY/window.innerWidth-.5)*2;_this.mouse.x*=10;_this.mouse.y*=5});window.addEventListener("touchmove",function(e){_this.mouse.x=(e.touches[0].clientX/window.innerWidth-.5)*2;_this.mouse.y=-(e.touches[0].clientY/window.innerWidth-.5)*2;_this.mouse.x*=10;_this.mouse.y*=5});this.camera=new _gl2.default.PerspectiveCamera(45,window.innerWidth/window.innerHeight,.1,500);this.controls=new _OrbitalCameraControl2.default(this.camera,30,window);this.initComposer();var system=new _LSystem2.default;this.scene=new _gl2.default.Object3D;this.scene.system=system;var fog={density:.03,gradient:2,color:[.03,.03,.03]};var geom=new _gl2.default.Geometry(_gl2.default.Primitive.cube(1,1,1,1));geom.addInstancedAttribute("offsets",system.positions,1);geom.addInstancedAttribute("rotations",system.rotations,1);geom.addInstancedAttribute("scales",system.scales,1);geom.addCount(system.positions.length/3);var shader=new _gl2.default.BasicMaterial({fog:fog,color:_gl2.default.utils.hexToRgb("#ffffff"),vertex:{start:"\n            attribute vec3 aOffset;\n            attribute vec4 aRotation;\n            attribute vec3 aScale;\n\n          ",main:"\n            p = vec4(aPosition,1.0);\n            vNormal = normalize(normalMatrix * aNormal +2.0 * cross( aRotation.xyz, cross( aRotation.xyz, p.xyz ) + aRotation.w * p.xyz ));\n\n            p.xyz *= aScale;\n            p.xyz += 2.0 * cross( aRotation.xyz, cross( aRotation.xyz, p.xyz ) + aRotation.w * p.xyz );\n            p.xyz = p.xyz + aOffset;\n\n\n          "}});var tree=new _gl2.default.Mesh(geom,shader);tree.scale.set(.6);this.scene.addChild(tree);var floor=new _gl2.default.Mesh(new _gl2.default.Geometry(_gl2.default.Primitive.plane(100,100,30,30)),new _gl2.default.BasicMaterial({fog:fog,color:_gl2.default.utils.hexToRgb("#ffffff")}));floor.rotation.x=90*Math.PI/180;this.scene.addChild(floor);var l=300;var offset=new Float32Array(l*3);var count=0;for(var i=0;i<l*3;i+=3){offset[count*3]=Math.random()*(30+30)-30;offset[count*3+1]=Math.random()*1;offset[count*3+2]=Math.random()*(40+40)-40;count++}var geomFloor=new _gl2.default.Geometry(_gl2.default.Primitive.cube(4,.4,4,1));geomFloor.addInstancedAttribute("offsets",offset,1);geomFloor.addCount(offset.length/3);var shader2=new _gl2.default.BasicMaterial({fog:fog,color:_gl2.default.utils.hexToRgb("#ffffff"),vertex:{start:"attribute vec3 aOffset;",main:"p = vec4(aPosition + aOffset, 1.0);"}});var floor2=new _gl2.default.Mesh(geomFloor,shader2);floor2.scale.set(.5);this.scene.addChild(floor2);this.scene.position.y=-6}_createClass(Scene,[{key:"initComposer",value:function initComposer(){this.composer=new _gl2.default.Composer(this.webgl,window.innerWidth*window.devicePixelRatio,window.innerHeight*window.devicePixelRatio,!!_Query2.default.debug);this.bloom=new _gl2.default.BloomPass({amount:3});this.bloom.enable=true;this.invert=new _gl2.default.InvertPass({amount:3});this.invert.enable=true}},{key:"render",value:function render(){if(_SuperConfig2.default.config.controls){this.controls.update()}else{console.log();this.camera.lookAt([this.mouseEase.x,this.mouseEase.y,30],[0,0,0],[0,1,0])}this.mouseEase.x+=(this.mouse.x-this.mouseEase.x)*.05;this.mouseEase.y+=(this.mouse.y-this.mouseEase.y)*.05;this.webgl.clear();_gl2.default.State.enable(gl.DEPTH_TEST);if(_Query2.default.config.postPro||true){this.composer.render(this.scene,this.camera)}else{this.webgl.render(this.scene,this.camera)}}},{key:"resize",value:function resize(){this.camera.aspect=window.innerWidth/window.innerHeight;this.webgl.resize()}}]);return Scene}();exports.default=Scene},{"./LSystem":42,"./dev/Query":45,"./dev/Screenshot":46,"./dev/SuperConfig":47,"./gl":67,"./gl/utils/OrbitalCameraControl":88,"./gl/utils/PingPong":89,"gl-matrix":14,glslify:27,"nice-color-palettes":28,"ua-device-type":39}],45:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _fastUrlParser=require("fast-url-parser");var _fastUrlParser2=_interopRequireDefault(_fastUrlParser);var _DefaultConfig=require("../DefaultConfig");var _DefaultConfig2=_interopRequireDefault(_DefaultConfig);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}_fastUrlParser2.default.queryString=require("querystringparser");var Query=function(){function Query(){_classCallCheck(this,Query);this.parseQuery()}_createClass(Query,[{key:"parseQuery",value:function parseQuery(){var parsed=_fastUrlParser2.default.parse(window.location.search,true);for(var key in parsed.query){if(parsed.query[key]==="true"){this[key]=true}else if(parsed.query[key]==="false"){this[key]=false}else{this[key]=JSON.parse(parsed.query[key])}}if(!this.config){this.config=_DefaultConfig2.default}}}]);return Query}();exports.default=new Query},{"../DefaultConfig":41,"fast-url-parser":10,querystringparser:36}],46:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var img=void 0;var btn=document.createElement("a");var Screenshot=function(){function Screenshot(scene){var _this=this;_classCallCheck(this,Screenshot);this.scene=scene;var debug=document.createElement("div");debug.id="debug";btn.id="screenshot";btn.innerHTML="screenshot";img=new Image;debug.appendChild(btn);document.body.appendChild(debug);btn.addEventListener("mousedown",function(){_this.capture()});btn.addEventListener("mouseup",function(){btn.download="screen"})}_createClass(Screenshot,[{key:"capture",value:function capture(){this.scene.render();img.src=this.scene.webgl.canvas.toDataURL();btn.href=img.src}}]);return Screenshot}();exports.default=Screenshot},{}],47:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _Query=require("./Query");var _Query2=_interopRequireDefault(_Query);var _datGuiMin=require("dat.gui/build/dat.gui.min.js");var _datGuiMin2=_interopRequireDefault(_datGuiMin);var _DefaultConfig=require("../DefaultConfig");var _DefaultConfig2=_interopRequireDefault(_DefaultConfig);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var SuperConfig=function(){function SuperConfig(){_classCallCheck(this,SuperConfig);window.superConf=this;if(!_Query2.default.debug){this.config=_DefaultConfig2.default;return}this.gui=new _datGuiMin2.default.GUI;this.gui.folders={};this.controls={};if(_Query2.default.config){this.gui.folders.config=this.gui.addFolder("config");this.gui.folders.config.open();this.config=_Query2.default.config;for(var key in _DefaultConfig2.default){if(!_Query2.default.config.hasOwnProperty(key)){this.config=_DefaultConfig2.default}}for(var _key in _Query2.default.config){if(!_DefaultConfig2.default.hasOwnProperty(_key)){this.config=_DefaultConfig2.default}}this.parseConfig(this.config,this.gui.folders.config,"config");this.updateConfig()}this.gui.folders.root=this.gui.addFolder("experiment");this.gui.folders.root.open();this.gui.folders.root.add(this,"reload");this.gui.folders.root.add(this,"log")}_createClass(SuperConfig,[{key:"updateConfig",value:function updateConfig(){var params="?";if(_Query2.default.develop)params+="develop=true&";if(_Query2.default.debug)params+="debug=true&";if(_Query2.default.verbose)params+="verbose=true&";window.history.pushState("experiment","Title",window.location.origin+window.location.pathname+params+"config="+JSON.stringify(this.config))}},{key:"log",value:function log(){this.updateConfig();console.log("Current Config:");console.log(this.config)}},{key:"reload",value:function reload(){this.updateConfig();location.reload()}},{key:"parseConfig",value:function parseConfig(object,folder,name,parent){var _this=this;for(var key in object){var obj=object[key];if((typeof obj==="undefined"?"undefined":_typeof(obj))!=="object"){if(!folder.controllers){folder.controllers={}}if(parent){if(!this.controls[parent][name])this.controls[parent][name]={};this.controls[parent][name][key]=folder.add(object,key);this.addChange(this.controls[parent][name][key],function(){_this.updateConfig()})}else{if(!this.controls[name])this.controls[name]={};this.controls[name][key]=folder.add(object,key);this.addChange(this.controls[name][key],function(){_this.updateConfig()})}}else{this.gui.folders[key]=this.gui.folders.config.addFolder(key);this.gui.folders[key].open();this.parseConfig(object[key],this.gui.folders[key],key,name)}}}},{key:"addChange",value:function addChange(obj,fn){if(!obj.__changeFns){obj.__changeFns=[]}obj.__changeFns.push(fn);obj.onFinishChange(function(){for(var i=0;i<obj.__changeFns.length;i++){obj.__changeFns[i]()}})}}]);return SuperConfig}();exports.default=new SuperConfig},{"../DefaultConfig":41,"./Query":45,"dat.gui/build/dat.gui.min.js":7}],48:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _glMatrix=require("gl-matrix");var _glMatrix2=_interopRequireDefault(_glMatrix);var _Object3D2=require("../core/Object3D");var _Object3D3=_interopRequireDefault(_Object3D2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var OrthographicCamera=function(_Object3D){_inherits(OrthographicCamera,_Object3D);function OrthographicCamera(left,right,bottom,top,zNear,zFar){_classCallCheck(this,OrthographicCamera);var _this=_possibleConstructorReturn(this,(OrthographicCamera.__proto__||Object.getPrototypeOf(OrthographicCamera)).call(this));_this.left=left;_this.right=right;_this.bottom=bottom;_this.top=top;_this.zNear=zNear;_this.zFar=zFar;_this._projection=_glMatrix2.default.mat4.create();_this._view=_glMatrix2.default.mat4.create();_this._projection=_glMatrix2.default.mat4.ortho(_this._projection,left,right,bottom,top,zNear,zFar);return _this}_createClass(OrthographicCamera,[{key:"lookAt",value:function lookAt(aEye,aCenter){var aUp=arguments.length>2&&arguments[2]!==undefined?arguments[2]:[0,1,0];_glMatrix2.default.vec3.copy(this.position,aEye);_glMatrix2.default.mat4.identity(this._view);_glMatrix2.default.mat4.lookAt(this._view,aEye,aCenter,aUp)}},{key:"updateProjectionMatrix",value:function updateProjectionMatrix(){this._projection=_glMatrix2.default.mat4.ortho(this._projection,this.left,this.right,this.bottom,this.top,this.zNear,this.zFar)}},{key:"aspect",get:function get(){return this._apsect},set:function set(value){this._apsect=value}},{key:"view",get:function get(){return this._view}},{key:"projection",get:function get(){return this._projection}}]);return OrthographicCamera}(_Object3D3.default);exports.default=OrthographicCamera},{"../core/Object3D":56,"gl-matrix":14}],49:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _glMatrix=require("gl-matrix");var _Object3D2=require("../core/Object3D");var _Object3D3=_interopRequireDefault(_Object3D2);var _Ray=require("../math/Ray");var _Ray2=_interopRequireDefault(_Ray);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var mInverseViewProj=_glMatrix.mat4.create();var cameraDir=_glMatrix.vec3.create();var PerspectiveCamera=function(_Object3D){_inherits(PerspectiveCamera,_Object3D);function PerspectiveCamera(fieldOfViewDegree,aspect,zNear,zFar){_classCallCheck(this,PerspectiveCamera);var _this=_possibleConstructorReturn(this,(PerspectiveCamera.__proto__||Object.getPrototypeOf(PerspectiveCamera)).call(this));_this.fieldOfView=fieldOfViewDegree;_this._apsect=aspect;_this.zNear=zNear;_this.zFar=zFar;_this._view=_glMatrix.mat4.create();_this._projection=_glMatrix.mat4.create();_this._projection=_glMatrix.mat4.perspective(_this._projection,_glMatrix.glMatrix.toRadian(fieldOfViewDegree),aspect,zNear,zFar);return _this}_createClass(PerspectiveCamera,[{key:"lookAt",value:function lookAt(aEye,aCenter){var aUp=arguments.length>2&&arguments[2]!==undefined?arguments[2]:[0,1,0];this.position.x=aEye[0];this.position.y=aEye[1];this.position.z=aEye[2];this.pp=aEye;_glMatrix.mat4.identity(this._view);_glMatrix.mat4.lookAt(this._view,aEye,aCenter,aUp)}},{key:"updateProjectionMatrix",value:function updateProjectionMatrix(){this._projection=_glMatrix.mat4.perspective(this._projection,_glMatrix.glMatrix.toRadian(this.fieldOfView),this._apsect,this.zNear,this.zFar)}},{key:"generateRay",value:function generateRay(mScreenPosition,mRay){var proj=this.projection;var view=this.view;var camPos=_glMatrix.vec3.fromValues(this.position.x,this.position.y,this.position.z);_glMatrix.mat4.multiply(mInverseViewProj,proj,view);_glMatrix.mat4.invert(mInverseViewProj,mInverseViewProj);_glMatrix.vec3.transformMat4(cameraDir,mScreenPosition,mInverseViewProj);_glMatrix.vec3.sub(cameraDir,cameraDir,camPos);_glMatrix.vec3.normalize(cameraDir,cameraDir);if(!mRay){mRay=new _Ray2.default(camPos,cameraDir)}else{mRay.origin=camPos;mRay.direction=cameraDir}return mRay}},{key:"aspect",get:function get(){return this._apsect},set:function set(value){this._apsect=value;this.updateProjectionMatrix()}},{key:"view",get:function get(){return this._view}},{key:"projection",get:function get(){return this._projection}}]);return PerspectiveCamera}(_Object3D3.default);exports.default=PerspectiveCamera},{"../core/Object3D":56,"../math/Ray":68,"gl-matrix":14}],50:[function(require,module,exports){"use strict";module.exports={ACTIVE_ATTRIBUTES:35721,ACTIVE_ATTRIBUTE_MAX_LENGTH:35722,ACTIVE_TEXTURE:34016,ACTIVE_UNIFORMS:35718,ACTIVE_UNIFORM_MAX_LENGTH:35719,ALIASED_LINE_WIDTH_RANGE:33902,ALIASED_POINT_SIZE_RANGE:33901,ALPHA:6406,ALPHA_BITS:3413,ALWAYS:519,ARRAY_BUFFER:34962,ARRAY_BUFFER_BINDING:34964,ATTACHED_SHADERS:35717,BACK:1029,BLEND:3042,BLEND_COLOR:32773,BLEND_DST_ALPHA:32970,BLEND_DST_RGB:32968,BLEND_EQUATION:32777,BLEND_EQUATION_ALPHA:34877,BLEND_EQUATION_RGB:32777,BLEND_SRC_ALPHA:32971,BLEND_SRC_RGB:32969,BLUE_BITS:3412,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,BROWSER_DEFAULT_WEBGL:37444,BUFFER_SIZE:34660,BUFFER_USAGE:34661,BYTE:5120,CCW:2305,CLAMP_TO_EDGE:33071,COLOR_ATTACHMENT0:36064,COLOR_BUFFER_BIT:16384,COLOR_CLEAR_VALUE:3106,COLOR_WRITEMASK:3107,COMPILE_STATUS:35713,COMPRESSED_TEXTURE_FORMATS:34467,CONSTANT_ALPHA:32771,CONSTANT_COLOR:32769,CONTEXT_LOST_WEBGL:37442,CULL_FACE:2884,CULL_FACE_MODE:2885,CURRENT_PROGRAM:35725,CURRENT_VERTEX_ATTRIB:34342,CW:2304,DECR:7683,DECR_WRAP:34056,DELETE_STATUS:35712,DEPTH_ATTACHMENT:36096,DEPTH_BITS:3414,DEPTH_BUFFER_BIT:256,DEPTH_CLEAR_VALUE:2931,DEPTH_COMPONENT:6402,RED:6403,DEPTH_COMPONENT16:33189,DEPTH_FUNC:2932,DEPTH_RANGE:2928,DEPTH_STENCIL:34041,DEPTH_STENCIL_ATTACHMENT:33306,DEPTH_TEST:2929,DEPTH_WRITEMASK:2930,DITHER:3024,DONT_CARE:4352,DST_ALPHA:772,DST_COLOR:774,DYNAMIC_DRAW:35048,ELEMENT_ARRAY_BUFFER:34963,ELEMENT_ARRAY_BUFFER_BINDING:34965,EQUAL:514,FASTEST:4353,FLOAT:5126,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,FRAGMENT_SHADER:35632,FRAMEBUFFER:36160,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_BINDING:36006,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_UNSUPPORTED:36061,FRONT:1028,FRONT_AND_BACK:1032,FRONT_FACE:2886,FUNC_ADD:32774,FUNC_REVERSE_SUBTRACT:32779,FUNC_SUBTRACT:32778,GENERATE_MIPMAP_HINT:33170,GEQUAL:518,GREATER:516,GREEN_BITS:3411,HIGH_FLOAT:36338,HIGH_INT:36341,INCR:7682,INCR_WRAP:34055,INFO_LOG_LENGTH:35716,INT:5124,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,INVALID_ENUM:1280,INVALID_FRAMEBUFFER_OPERATION:1286,INVALID_OPERATION:1282,INVALID_VALUE:1281,INVERT:5386,KEEP:7680,LEQUAL:515,LESS:513,LINEAR:9729,LINEAR_MIPMAP_LINEAR:9987,LINEAR_MIPMAP_NEAREST:9985,LINES:1,LINE_LOOP:2,LINE_STRIP:3,LINE_WIDTH:2849,LINK_STATUS:35714,LOW_FLOAT:36336,LOW_INT:36339,LUMINANCE:6409,LUMINANCE_ALPHA:6410,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_CUBE_MAP_TEXTURE_SIZE:34076,MAX_FRAGMENT_UNIFORM_VECTORS:36349,MAX_RENDERBUFFER_SIZE:34024,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_TEXTURE_SIZE:3379,MAX_VARYING_VECTORS:36348,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VIEWPORT_DIMS:3386,MEDIUM_FLOAT:36337,MEDIUM_INT:36340,MIRRORED_REPEAT:33648,NEAREST:9728,NEAREST_MIPMAP_LINEAR:9986,NEAREST_MIPMAP_NEAREST:9984,NEVER:512,NICEST:4354,NONE:0,NOTEQUAL:517,NO_ERROR:0,NUM_COMPRESSED_TEXTURE_FORMATS:34466,ONE:1,ONE_MINUS_CONSTANT_ALPHA:32772,ONE_MINUS_CONSTANT_COLOR:32770,ONE_MINUS_DST_ALPHA:773,ONE_MINUS_DST_COLOR:775,ONE_MINUS_SRC_ALPHA:771,ONE_MINUS_SRC_COLOR:769,OUT_OF_MEMORY:1285,PACK_ALIGNMENT:3333,POINTS:0,POLYGON_OFFSET_FACTOR:32824,POLYGON_OFFSET_FILL:32823,POLYGON_OFFSET_UNITS:10752,RED_BITS:3410,RENDERBUFFER:36161,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_BINDING:36007,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_STENCIL_SIZE:36181,RENDERBUFFER_WIDTH:36162,RENDERER:7937,REPEAT:10497,REPLACE:7681,RGB:6407,RGB5_A1:32855,RGB565:36194,RGBA:6408,RGBA4:32854,SAMPLER_2D:35678,SAMPLER_CUBE:35680,SAMPLES:32937,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_BUFFERS:32936,SAMPLE_COVERAGE:32928,SAMPLE_COVERAGE_INVERT:32939,SAMPLE_COVERAGE_VALUE:32938,SCISSOR_BOX:3088,SCISSOR_TEST:3089,SHADER_COMPILER:36346,SHADER_SOURCE_LENGTH:35720,SHADER_TYPE:35663,SHADING_LANGUAGE_VERSION:35724,SHORT:5122,SRC_ALPHA:770,SRC_ALPHA_SATURATE:776,SRC_COLOR:768,STATIC_DRAW:35044,STENCIL_ATTACHMENT:36128,STENCIL_BACK_FAIL:34817,STENCIL_BACK_FUNC:34816,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,STENCIL_BITS:3415,STENCIL_BUFFER_BIT:1024,STENCIL_CLEAR_VALUE:2961,STENCIL_FAIL:2964,STENCIL_FUNC:2962,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_TEST:2960,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STREAM_DRAW:35040,SUBPIXEL_BITS:3408,TEXTURE:5890,TEXTURE0:33984,TEXTURE1:33985,TEXTURE2:33986,TEXTURE3:33987,TEXTURE4:33988,TEXTURE5:33989,TEXTURE6:33990,TEXTURE7:33991,TEXTURE8:33992,TEXTURE9:33993,TEXTURE10:33994,TEXTURE11:33995,TEXTURE12:33996,TEXTURE13:33997,TEXTURE14:33998,TEXTURE15:33999,TEXTURE16:34e3,TEXTURE17:34001,TEXTURE18:34002,TEXTURE19:34003,TEXTURE20:34004,TEXTURE21:34005,TEXTURE22:34006,TEXTURE23:34007,TEXTURE24:34008,TEXTURE25:34009,TEXTURE26:34010,TEXTURE27:34011,TEXTURE28:34012,TEXTURE29:34013,TEXTURE30:34014,TEXTURE31:34015,TEXTURE_2D:3553,TEXTURE_BINDING_2D:32873,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_CUBE_MAP:34067,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TRIANGLES:4,TRIANGLE_FAN:6,TRIANGLE_STRIP:5,UNPACK_ALIGNMENT:3317,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,UNSIGNED_BYTE:5121,UNSIGNED_INT:5125,UNSIGNED_SHORT:5123,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,VALIDATE_STATUS:35715,VENDOR:7936,VERSION:7938,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_SHADER:35633,VIEWPORT:2978,ZERO:0,R8:33321}},{}],51:[function(require,module,exports){"use strict";module.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6403:"RED",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",
32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33321:"R8",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},{}],52:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _webglConst=require("../const/webglConst");var _Debug=require("../utils/Debug");var _Debug2=_interopRequireDefault(_Debug);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var ArrayBuffer=function(){function ArrayBuffer(_ref){var context=_ref.context,data=_ref.data,usage=_ref.usage,divisor=_ref.divisor;_classCallCheck(this,ArrayBuffer);this.gl=context;this.buffer=this.gl.createBuffer();this.usage=usage||_webglConst.STATIC_DRAW;this.divisor=divisor;if(this.divisor){this.instanced=true}this.length=-1;this.data(data)}_createClass(ArrayBuffer,[{key:"bind",value:function bind(){this.gl.bindBuffer(_webglConst.ARRAY_BUFFER,this.buffer)}},{key:"unbind",value:function unbind(){this.gl.bindBuffer(_webglConst.ARRAY_BUFFER,this.buffer)}},{key:"data",value:function data(_data){this.bind();this.gl.bufferData(_webglConst.ARRAY_BUFFER,new Float32Array(_data),this.usage);this.gl.bindBuffer(_webglConst.ARRAY_BUFFER,null);this._data=_data}},{key:"attribPointer",value:function attribPointer(attribute){if(attribute===undefined){return}if(this.length===-1){this.attribute=attribute;this.computeLenght(attribute._size)}this.bind();this.gl.vertexAttribPointer(attribute.location,attribute._size,this.gl.FLOAT,false,0,0);this.gl.enableVertexAttribArray(attribute.location)}},{key:"attribPointerInstanced",value:function attribPointerInstanced(attribute,divisor){this.attribPointer(attribute);var ext=this.gl.getExtension("ANGLE_instanced_arrays");ext.vertexAttribDivisorANGLE(attribute.location,divisor)}},{key:"computeLenght",value:function computeLenght(attribSize){this.length=Math.floor(this._data.length/attribSize)}},{key:"draw",value:function draw(mode){var offset=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;this.gl.drawArrays(mode,offset,this.length)}}]);return ArrayBuffer}();exports.default=ArrayBuffer},{"../const/webglConst":50,"../utils/Debug":84}],53:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _Debug=require("../utils/Debug");var _Debug2=_interopRequireDefault(_Debug);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var Extension=function(){function Extension(){_classCallCheck(this,Extension)}_createClass(Extension,[{key:"setGl",value:function setGl(gl){this.gl=gl}},{key:"active",value:function active(name){_Debug2.default.info("Activing: "+name);var extension=gl.getExtension(name);if(extension){_Debug2.default.log("Actived");for(var key in extension){if(typeof extension[key]==="function"){var keyWithoutSuff=key.replace(/OES|MOZ_OES|WEBKIT_OES/g,"");this.gl[keyWithoutSuff]=extension[key].bind(extension)}}}else{_Debug2.default.error("Extension: {name} is not available on this device")}}}]);return Extension}();exports.default=new Extension},{"../utils/Debug":84}],54:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _Debug=require("../utils/Debug");var _Debug2=_interopRequireDefault(_Debug);var _Texture=require("./Texture");var _Texture2=_interopRequireDefault(_Texture);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var FrameBuffer=function(){function FrameBuffer(gl,width,height){var options=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};_classCallCheck(this,FrameBuffer);_Debug2.default.info("FBO created width: "+width+" height: "+height);this.gl=gl;this.width=width;this.height=height;this.fbo=gl.createFramebuffer();this.colors=new _Texture2.default(gl);this.colors.format=gl.RGBA;this.colors.minFilter=gl.NEAREST;this.colors.magFilter=gl.NEAREST;this.colors.wrapT=gl.CLAMP_TO_EDGE;this.colors.wrapS=gl.CLAMP_TO_EDGE;var ext=this.gl.getExtension("OES_texture_float");this.colors.type=this.gl.FLOAT;this.colors.uploadData(null,width,height);if(options.depth){_Debug2.default.info("Use depth texture");var depthTextureExt=this.gl.getExtension("WEBGL_depth_texture");this.depth=new _Texture2.default(gl,width,height,gl.UNSIGNED_SHORT,gl.DEPTH_COMPONENT);this.depth.minFilter=gl.NEAREST;this.depth.magFilter=gl.NEAREST;this.depth.wrapT=gl.CLAMP_TO_EDGE;this.depth.wrapS=gl.CLAMP_TO_EDGE;this.depth.type=gl.UNSIGNED_SHORT;this.depth.format=gl.DEPTH_COMPONENT;this.depth.uploadData(null,width,height,true)}this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.fbo);this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,this.colors.id,0);if(options.depth)this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.DEPTH_ATTACHMENT,this.gl.TEXTURE_2D,this.depth.id,0);this.setSize(width,height);this.unbind()}_createClass(FrameBuffer,[{key:"bind",value:function bind(){this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.fbo);this.gl.viewport(0,0,this.width,this.height)}},{key:"clear",value:function clear(){this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},{key:"unbind",value:function unbind(){this.gl.viewport(0,0,this.gl.canvas.width,this.gl.canvas.height);this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null);this.colors.unbind()}},{key:"setSize",value:function setSize(width,height){this.bind();this.fbo.width=width;this.fbo.height=height;this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null)}}]);return FrameBuffer}();exports.default=FrameBuffer},{"../utils/Debug":84,"./Texture":59}],55:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _webglConst=require("../const/webglConst");function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var IndexBuffer=function(){function IndexBuffer(_ref){var context=_ref.context,data=_ref.data,usage=_ref.usage;_classCallCheck(this,IndexBuffer);this.gl=context;this.buffer=this.gl.createBuffer();this.usage=usage||_webglConst.STATIC_DRAW;this.length=data.length;this.data(data)}_createClass(IndexBuffer,[{key:"bind",value:function bind(){this.gl.bindBuffer(_webglConst.ELEMENT_ARRAY_BUFFER,this.buffer)}},{key:"unbind",value:function unbind(){this.gl.bindBuffer(_webglConst.ELEMENT_ARRAY_BUFFER,null)}},{key:"data",value:function data(_data){this.bind();this.gl.bufferData(_webglConst.ELEMENT_ARRAY_BUFFER,new Uint16Array(_data),this.usage);this.gl.bindBuffer(_webglConst.ELEMENT_ARRAY_BUFFER,null);this._data=_data}},{key:"draw",value:function draw(mode,offset){this.gl.drawElements(mode,this.length,_webglConst.UNSIGNED_SHORT,0)}},{key:"drawInstance",value:function drawInstance(mode,count){var ext=this.gl.getExtension("ANGLE_instanced_arrays");ext.drawElementsInstancedANGLE(mode,this.length,_webglConst.UNSIGNED_SHORT,0,count)}}]);return IndexBuffer}();exports.default=IndexBuffer},{"../const/webglConst":50}],56:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _glMatrix=require("gl-matrix");var glm=_interopRequireWildcard(_glMatrix);var _Vector=require("../math/Vector3");var _Vector2=_interopRequireDefault(_Vector);var _UIID=require("../utils/UIID");var _UIID2=_interopRequireDefault(_UIID);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var Object3D=function(){function Object3D(){var _this=this;_classCallCheck(this,Object3D);this.visible=true;this.uuid=(0,_UIID2.default)();this._needUpdate=true;this.position=new _Vector2.default;this.rotation=new _Vector2.default;this.scale=new _Vector2.default(1,1,1);this.position.onChange(function(){_this._needUpdate=true});this.rotation.onChange(function(){_this._needUpdate=true});this.scale.onChange(function(){_this._needUpdate=true});this._matrix=glm.mat4.create();this._matrixWorld=glm.mat4.create();this._matrixRotation=glm.mat4.create();this._matrixScale=glm.mat4.create();this._matrixTranslation=glm.mat4.create();this._matrixIdentity=glm.mat4.create();this.parent=null;this.children=[]}_createClass(Object3D,[{key:"_updateMatrix",value:function _updateMatrix(){if(!this.visible){return}glm.mat4.rotateX(this._matrixRotation,this._matrixIdentity,this.rotation.x);glm.mat4.rotateY(this._matrixRotation,this._matrixRotation,this.rotation.y);glm.mat4.rotateZ(this._matrixRotation,this._matrixRotation,this.rotation.z);glm.mat4.scale(this._matrixScale,this._matrixIdentity,this.scale.get());glm.mat4.translate(this._matrixTranslation,this._matrixIdentity,this.position.get());glm.mat4.mul(this._matrix,this._matrixTranslation,this._matrixRotation);glm.mat4.mul(this._matrix,this._matrix,this._matrixScale);this._updateMatrixWorld();this._needUpdate=false}},{key:"_updateMatrixWorld",value:function _updateMatrixWorld(){if(!this.visible){return}if(this.parent){glm.mat4.multiply(this._matrixWorld,this.parent._matrixWorld,this._matrix)}else{glm.mat4.copy(this._matrixWorld,this._matrix)}for(var i=0,l=this.children.length;i<l;i+=1){this.children[i]._updateMatrixWorld()}}},{key:"addChild",value:function addChild(object){if(object.parent){var ndx=object.parent.children.indexOf(this);if(ndx>=0){object.parent.children.splice(ndx,1)}}object.parent=this;this.children.push(object)}},{key:"positionWorld",get:function get(){if(!this.parent)return this.position.get();return[this.parent.position.x+this.position.x,this.parent.position.y+this.position.y,this.parent.position.z+this.position.z]}},{key:"matrixWorld",get:function get(){if(this._needUpdate)this._updateMatrix();return this._matrixWorld}},{key:"matrix",get:function get(){if(this._needUpdate)this._updateMatrix();return this._matrix}}]);return Object3D}();exports.default=Object3D},{"../math/Vector3":69,"../utils/UIID":90,"gl-matrix":14}],57:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _webglConst=require("../const/webglConst");var _webglNumber=require("../const/webglNumber");var _webglNumber2=_interopRequireDefault(_webglNumber);var _Debug=require("../utils/Debug");var _Debug2=_interopRequireDefault(_Debug);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var uniformMap={INT:"uniform1i",FLOAT:"uniform1f",FLOAT_VEC2:"uniform2f",FLOAT_VEC3:"uniform3f",SAMPLER_2D:"uniform1i",SAMPLER_CUBE:"uniform1i",FLOAT_MAT3:"uniformMatrix3fv",FLOAT_MAT4:"uniformMatrix4fv"};var attributesMapSize={FLOAT:1,INT:1,FLOAT_VEC2:2,FLOAT_VEC3:3,FLOAT_VEC4:4};String.prototype.capitalizeFirstLetter=function(){return this.charAt(0).toUpperCase()+this.slice(1)};var Program=function(){function Program(){var _ref=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},context=_ref.context,vertexShader=_ref.vertexShader,fragmentShader=_ref.fragmentShader,_ref$name=_ref.name,name=_ref$name===undefined?"":_ref$name;_classCallCheck(this,Program);this.gl=context;this.vs=this.createShader(vertexShader,_webglConst.VERTEX_SHADER);this.fs=this.createShader(fragmentShader,_webglConst.FRAGMENT_SHADER);this.program=this.createProgram(this.vs,this.fs);this.uniforms=this.u={};this.attributes=this.a={};_Debug2.default.group("Program: "+name);this.buildAttributeGetter();this.buildUniformsGetterSetter();_Debug2.default.groupEnd()}_createClass(Program,[{key:"createProgram",value:function createProgram(vertexShader,fragmentShader){var program=this.gl.createProgram();this.gl.attachShader(program,vertexShader);this.gl.attachShader(program,fragmentShader);this.gl.linkProgram(program);var success=this.gl.getProgramParameter(program,_webglConst.LINK_STATUS);if(success)return program;console.log(this.gl.getProgramInfoLog(program));this.gl.deleteProgram(program);return null}},{key:"createShader",value:function createShader(source,type){var shader=this.gl.createShader(type);this.gl.shaderSource(shader,source);this.gl.compileShader(shader);var success=this.gl.getShaderParameter(shader,_webglConst.COMPILE_STATUS);if(success)return shader;console.log(this.gl.getShaderInfoLog(shader));this.gl.deleteShader(shader);return null}},{key:"buildAttributeGetter",value:function buildAttributeGetter(){var numAttributes=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES);_Debug2.default.log("Number of active attributes: "+numAttributes);for(var i=0;i<numAttributes;++i){var attribute=this.gl.getActiveAttrib(this.program,i);var aLocation=this.gl.getAttribLocation(this.program,attribute.name);attribute.location=aLocation;var Afn="get"+attribute.name.capitalizeFirstLetter()+"Location";attribute._size=attributesMapSize[_webglNumber2.default[attribute.type]];this.attributes[attribute.name]=attribute;_Debug2.default.log("Attribute generated: "+attribute.name)}}},{key:"buildUniformsGetterSetter",value:function buildUniformsGetterSetter(){var _this=this;var nbActiveUniforms=this.gl.getProgramParameter(this.program,_webglConst.ACTIVE_UNIFORMS);_Debug2.default.log("Number of active uniforms: "+nbActiveUniforms);var _loop=function _loop(i){var uniform=_this.gl.getActiveUniform(_this.program,i);var uLocation=_this.gl.getUniformLocation(_this.program,uniform.name);var uFunction=uniformMap[_webglNumber2.default[uniform.type]];_Debug2.default.log("Uniform generated: "+uniform.name+" | "+_webglNumber2.default[uniform.type]);_this.uniforms[uniform.name]=null;Object.defineProperty(_this.uniforms,uniform.name,{get:function get(){return uniform.value},set:function set(value){uniform.value=value;if(uFunction.indexOf("Matrix")===-1){if(!value.length){if(uFunction==="uniform1i"){if(_webglNumber2.default[uniform.type]==="INT"){_this.gl[uFunction](uLocation,value)}else{_this.gl[uFunction](uLocation,value._bindIndex)}}else{_this.gl[uFunction](uLocation,value)}}else{_this.gl[uFunction].apply(_this.gl,Array.prototype.concat.apply(uLocation,value))}}else{_this.gl[uFunction](uLocation,_this.gl.FALSE,value)}}})};for(var i=0;i<nbActiveUniforms;++i){_loop(i)}}},{key:"bind",value:function bind(){this.gl.useProgram(this.program)}},{key:"destroy",value:function destroy(){this.gl.deleteProgram(this.program);this.gl.deleteShader(this.vs);this.gl.deleteShader(this.fs)}}]);return Program}();exports.default=Program},{"../const/webglConst":50,"../const/webglNumber":51,"../utils/Debug":84}],58:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var State=function(){function State(){_classCallCheck(this,State);this.capabilities={}}_createClass(State,[{key:"enable",value:function enable(id){if(this.capabilities[id]!==true){gl.enable(id);this.capabilities[id]=true}}},{key:"disable",value:function disable(id){if(this.capabilities[id]!==false){gl.disable(id);this.capabilities[id]=false}}}]);return State}();var state=new State;exports.default=state},{}],59:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _webglNumber=require("../const/webglNumber");var _webglNumber2=_interopRequireDefault(_webglNumber);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var Texture=function(){function Texture(context,width,height,format,type){_classCallCheck(this,Texture);this.gl=context;this.id=this.gl.createTexture();this._bindIndex=0;this.width=width||-1;this.height=height||-1;this.format=this.gl.RGB;this.type=this.gl.UNSIGNED_BYTE;this.minFilter=this.gl.NEAREST;this.magFilter=this.gl.NEAREST;this.wrapS=this.gl.CLAMP_TO_EDGE;this.wrapT=this.gl.CLAMP_TO_EDGE;this._bindIndex=null}_createClass(Texture,[{key:"upload",value:function upload(image){if(this.width!==image.width){this.width=image.width}if(this.height!==image.height){this.height=image.height}this.gl.bindTexture(this.gl.TEXTURE_2D,this.id);this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,false);this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this._type,image)}},{key:"uploadData",value:function uploadData(data,width,height,depth){this.gl.bindTexture(this.gl.TEXTURE_2D,this.id);if(data instanceof Float32Array){var ext=this.gl.getExtension("OES_texture_float");this.type=this.gl.FLOAT}this.gl.texImage2D(this.gl.TEXTURE_2D,0,this._format,width,height,0,this._format,this._type,data||null);this.unbind()}},{key:"bindIndex",value:function bindIndex(index){this._bindIndex=index}},{key:"bind",value:function bind(){this.gl.activeTexture(this.gl.TEXTURE0+this._bindIndex);this.gl.bindTexture(this.gl.TEXTURE_2D,this.id)}},{key:"unbind",value:function unbind(){this.gl.bindTexture(this.gl.TEXTURE_2D,null)}},{key:"nearest",value:function nearest(){this.minFilter=this.gl.NEAREST;this.magFilter=this.gl.NEAREST}},{key:"linear",value:function linear(){this.minFilter=this.gl.LINEAR;this.magFilter=this.gl.LINEAR}},{key:"repeat",value:function repeat(){this.wrapS=this.gl.REPEAT;this.wrapT=this.gl.REPEAT}},{key:"clamp",value:function clamp(){this.wrapS=this.gl.CLAMP_TO_EDGE;this.wrapT=this.gl.CLAMP_TO_EDGE}},{key:"magFilter",set:function set(value){this.bind();this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,value);this._magFilter=value;this.unbind()},get:function get(){return _webglNumber2.default[this._magFilter]}},{key:"minFilter",set:function set(value){this.bind();this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,value);this._minFilter=value;this.unbind()},get:function get(){return _webglNumber2.default[this._minFilter]}},{key:"wrapS",set:function set(value){this.bind();this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,value);this._wrapS=value;this.unbind()},get:function get(){return _webglNumber2.default[this._wrapS]}},{key:"wrapT",set:function set(value){this.bind();this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,value);this._wrapT=value;this.unbind()},get:function get(){return _webglNumber2.default[this._wrapT]}},{key:"type",set:function set(value){this._type=value},get:function get(){return _webglNumber2.default[this._type]}},{key:"format",set:function set(value){this._format=value},get:function get(){return _webglNumber2.default[this._format]}}]);return Texture}();exports.default=Texture},{"../const/webglNumber":51}],60:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _Texture=require("./Texture");var _Texture2=_interopRequireDefault(_Texture);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var CubeMapTexture=function(){function CubeMapTexture(context,textures,type){_classCallCheck(this,CubeMapTexture);this.gl=context;this._bindIndex=0;this.type=type||this.gl.UNSIGNED_BYTE;this.id=this.gl.createTexture();this.bind();if(textures.length<6){console.warn("Need at leat 6 textures")}for(var i=0;i<textures.length;i++){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,false);this.gl.texImage2D(this.gl.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,this.gl.RGBA,this.gl.RGBA,this.type,textures[i])}this.gl.texParameteri(this.gl.TEXTURE_CUBE_MAP,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR);this.gl.texParameteri(this.gl.TEXTURE_CUBE_MAP,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR);this.unbind()}_createClass(CubeMapTexture,[{key:"bind",value:function bind(){this.gl.activeTexture(this.gl.TEXTURE0+this._bindIndex);this.gl.bindTexture(this.gl.TEXTURE_CUBE_MAP,this.id)}},{key:"bindIndex",value:function bindIndex(index){this._bindIndex=index}},{key:"unbind",value:function unbind(){this.gl.bindTexture(this.gl.TEXTURE_CUBE_MAP,null)}}]);return CubeMapTexture}();exports.default=CubeMapTexture},{"./Texture":59}],61:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _webglConst=require("../const/webglConst");var _fallback2=require("../utils/fallback");var _fallback3=_interopRequireDefault(_fallback2);var _Debug=require("../utils/Debug");var _Debug2=_interopRequireDefault(_Debug);var _glMatrix=require("gl-matrix");var _Texture=require("./Texture");var _Texture2=_interopRequireDefault(_Texture);var _TextureCube=require("./TextureCube");var _TextureCube2=_interopRequireDefault(_TextureCube);var _Extension=require("./Extension");var _Extension2=_interopRequireDefault(_Extension);var _Utils=require("../utils/Utils");var _Utils2=_interopRequireDefault(_Utils);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function camelize(str){return str.replace(/(?:^\w|[A-Z]|\b\w|\s+)/g,function(match,index){if(+match===0)return"";return index==0?match.toLowerCase():match.toUpperCase()})}var modelViewMatrix=_glMatrix.mat4.create();var inverseModelViewMatrix=_glMatrix.mat4.create();var normalMatrix4=_glMatrix.mat4.create();var normalMatrix3=_glMatrix.mat3.create();var Webgl=function(){function Webgl(){var _ref=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},_ref$type=_ref.type,type=_ref$type===undefined?"webgl":_ref$type,_ref$canvas=_ref.canvas,canvas=_ref$canvas===undefined?null:_ref$canvas,_ref$width=_ref.width,width=_ref$width===undefined?window.innerWidth:_ref$width,_ref$height=_ref.height,height=_ref$height===undefined?window.innerHeight:_ref$height,_ref$contextOptions=_ref.contextOptions,contextOptions=_ref$contextOptions===undefined?{}:_ref$contextOptions,_ref$fallback=_ref.fallback,fallback=_ref$fallback===undefined?null:_ref$fallback;
_classCallCheck(this,Webgl);_Debug2.default.print("Vanilla GL");_Debug2.default.print("https://github.com/JordanMachado/webgl-tools");this.canvas=canvas?canvas:document.createElement("canvas");this.canvas.style.width=width+"px";this.canvas.style.height=height+"px";this.width=width*window.devicePixelRatio;this.height=height*window.devicePixelRatio;window.gl=this.context=this.gl=this.canvas.getContext(type,contextOptions);_Extension2.default.setGl(gl);_Extension2.default.active("OES_vertex_array_object");_Extension2.default.active("ANGLE_instanced_arrays");_Extension2.default.active("OES_standard_derivatives");if(!!!this.context){console.warn("No Webgl 2");if(fallback){if(typeof fallback==="function"){fallback()}else{console.warn("Fallback is not a function")}}else{(0,_fallback3.default)()}}else{this.canvas.width=width*window.devicePixelRatio;this.canvas.height=height*window.devicePixelRatio;this.context.viewport(0,0,this.canvas.width,this.canvas.height);this.aspect=this.canvas.width/this.canvas.height;_Debug2.default.info(type+" created")}}_createClass(Webgl,[{key:"append",value:function append(container){if(container){container.appendChild(this.canvas)}else{document.body.appendChild(this.canvas)}}},{key:"clearColor",value:function clearColor(r,g,b,a){if(arguments.length===2){var color=_Utils2.default.hexToRgb(r);this.gl.clearColor(color[0],color[1],color[2],g)}else if(arguments.length===4){this.gl.clearColor(r,g,b,a)}else{this.gl.clearColor(r[0],r[1],r[2],1)}}},{key:"clear",value:function clear(){this.gl.clear(_webglConst.COLOR_BUFFER_BIT|_webglConst.DEPTH_BUFFER_BIT)}},{key:"useProgram",value:function useProgram(program){if(this.shader===shader)return;this.shader=shader;this.gl.useProgram(shader.program)}},{key:"setDefaultUniforms",value:function setDefaultUniforms(mesh,camera){if(mesh.parent&&!mesh.parent.shader&&mesh.parent._needUpdate==true){mesh.parent._updateMatrix()}mesh.shader.program.uniforms.projectionMatrix=camera.projection;mesh.shader.program.uniforms.viewMatrix=camera.view;mesh.shader.program.uniforms.worldMatrix=mesh.matrixWorld;mesh.shader.program.uniforms.worldMatrix=mesh.matrixWorld;if(mesh.geometry.normals){_glMatrix.mat4.identity(modelViewMatrix);_glMatrix.mat4.multiply(modelViewMatrix,camera.view,mesh.matrixWorld);_glMatrix.mat4.invert(inverseModelViewMatrix,modelViewMatrix);_glMatrix.mat4.transpose(normalMatrix4,inverseModelViewMatrix);mesh.shader.program.uniforms.normalMatrix=_glMatrix.mat3.fromMat4(normalMatrix3,normalMatrix4)}}},{key:"setUniforms",value:function setUniforms(mesh){var count=0;for(var key in mesh.shader.uniforms){if(mesh.shader.program.uniforms.hasOwnProperty(key)){if(mesh.shader.uniforms[key]instanceof _Texture2.default||mesh.shader.uniforms[key]instanceof _TextureCube2.default){mesh.shader.uniforms[key].bindIndex(count);mesh.shader.uniforms[key].bind();count++}mesh.shader.program.uniforms[key]=mesh.shader.uniforms[key]}}}},{key:"bindBuffer",value:function bindBuffer(mesh){this.attr(mesh)}},{key:"unbindBuffer",value:function unbindBuffer(mesh){for(var key in mesh.geometry.attributes){var str="a "+key;var aKey=camelize(str.substring(0,str.length-1));if(mesh.geometry.attributes[key].instanced){if(mesh.shader.program.attributes[aKey])mesh.geometry.attributes[key].attribPointerInstanced(mesh.shader.program.attributes[aKey],0)}}}},{key:"attr",value:function attr(mesh){for(var key in mesh.geometry.attributes){var str="a "+key;var aKey=camelize(str.substring(0,str.length-1));if(mesh.geometry.attributes[key].instanced){if(mesh.shader.program.attributes[aKey])mesh.geometry.attributes[key].attribPointerInstanced(mesh.shader.program.attributes[aKey],mesh.geometry.attributes[key].divisor);else{_Debug2.default.error("Attribute "+aKey+" not used")}}else{if(mesh.shader.program.attributes[aKey])mesh.geometry.attributes[key].attribPointer(mesh.shader.program.attributes[aKey])}}}},{key:"render",value:function render(mesh,camera){if(mesh.shader){mesh.shader.program.bind();if(camera)this.setDefaultUniforms(mesh,camera);this.setUniforms(mesh);this.bindBuffer(mesh);if(mesh.geometry.indices){mesh.geometry.indices.bind();if(mesh.geometry.instanced){mesh.geometry.indices.drawInstance(mesh.drawType,mesh.geometry.count)}else{mesh.geometry.indices.draw(mesh.drawType)}mesh.geometry.indices.unbind()}else{mesh.geometry.positions.draw(mesh.drawType)}this.unbindBuffer(mesh)}if(mesh.children.length>0){for(var i=0;i<mesh.children.length;i++){this.render(mesh.children[i],camera)}}}},{key:"resize",value:function resize(){this.canvas.style.width=window.innerWidth+"px";this.canvas.style.height=window.innerHeight+"px";this.canvas.width=window.innerWidth*window.devicePixelRatio;this.canvas.height=window.innerHeight*window.devicePixelRatio;this.aspect=this.canvas.width/this.canvas.height;this.gl.viewport(0,0,this.canvas.width,this.canvas.height)}}]);return Webgl}();exports.default=Webgl},{"../const/webglConst":50,"../utils/Debug":84,"../utils/Utils":91,"../utils/fallback":92,"./Extension":53,"./Texture":59,"./TextureCube":60,"gl-matrix":14}],62:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _Shader2=require("./Shader");var _Shader3=_interopRequireDefault(_Shader2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var glslify=require("glslify");function filterEmptyLine(string){return string!==""}var Material=function(_Shader){_inherits(Material,_Shader);function Material(){var options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,Material);var vs=glslify(["#define GLSLIFY 1\nattribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec2 aUv;\n\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat4 worldMatrix;\nuniform mat3 normalMatrix;\n\nvarying vec3 vNormal;\nvarying vec2 vUv;\n\n// #ifdef NORMAL_MAP\n  varying vec3 vViewPosition;\n// #endif\n\n#ifdef FOG\n  uniform float uDensity;\n  uniform float uGradient;\n  varying float fogFactor;\n#endif\n\n#HOOK_VERTEX_START\n\nvoid main() {\n  vec4 p = vec4(aPosition, 1.0);\n  vUv = aUv;\n  vNormal = normalize(normalMatrix * aNormal);\n\n  #HOOK_VERTEX_MAIN\n\n  vec4 worldPos = projectionMatrix * viewMatrix * worldMatrix * p;\n  vViewPosition = worldPos.xyz;\n\n  gl_Position = worldPos;\n\n  #ifdef FOG\n    float dist = length(vViewPosition.xyz);\n    fogFactor = exp(-pow(dist * uDensity, uGradient));\n    fogFactor = clamp(fogFactor, 0.0, 1.0);\n  #endif\n\n  #HOOK_VERTEX_END\n\n}\n"]);var fs=glslify(["precision highp float;\n\nvarying vec3 vNormal;\nvarying vec2 vUv;\n\n#ifdef COLOR\nuniform vec3 uColor;\n#endif\n\n#ifdef TEXTURE\nuniform sampler2D uTexture;\n#endif\n\n#ifdef NORMAL_MAP\nvarying vec3 vViewPosition;\nuniform sampler2D uNormalMap;\nuniform vec2 uNormalScale;\nuniform vec2 uNormalUVRepeat;\n\n#extension GL_OES_standard_derivatives : enable\n#define GLSLIFY 1\n// function from three js\n// http://hacksoflife.blogspot.ch/2009/11/per-pixel-tangent-space-normal-mapping.html\nvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\n		// Workaround for Adreno 3XX dFd*( vec3 ) bug. See #9988\n\n		vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n		vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n		vec2 st0 = dFdx( vUv.xy  * uNormalUVRepeat);\n		vec2 st1 = dFdy( vUv.xy * uNormalUVRepeat);\n\n		vec3 S = normalize( q0 * st1.t - q1 * st0.t );\n		vec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n		vec3 N = normalize( surf_norm );\n\n		vec3 mapN = texture2D( uNormalMap, vUv * uNormalUVRepeat).xyz * 2.0 - 1.0;\n		mapN.xy = uNormalScale * mapN.xy;\n		mat3 tsn = mat3( S, T, N );\n		return normalize( tsn * mapN );\n\n}\n\n#endif\n\n#ifdef FOG\n  varying float fogFactor;\n  uniform vec3 uFogColor;\n#endif\n\nfloat diffuse(vec3 N, vec3 L) {\n    return max(dot(N, normalize(L)), 0.0);\n}\n\nvec3 diffuse(vec3 N, vec3 L, vec3 C) {\n    return diffuse(N, L) * C;\n}\n\n#HOOK_FRAGMENT_START\n\nvoid main() {\n  vec4 finalColor = vec4(1.0);\n  vec3 normal = vNormal;\n\n  #ifdef TEXTURE\n    finalColor = texture2D(uTexture, vUv);\n  #endif\n\n  #ifdef COLOR\n    finalColor.rgb *= uColor;\n  #endif\n\n  #ifdef NORMAL_MAP\n    normal = perturbNormal2Arb(vViewPosition, vNormal);\n  #endif\n\n  vec3 light = diffuse(normal, vec3(0.0,10.0,1.0), vec3(0.1));\n\n	#HOOK_FRAGMENT_MAIN\n\n  gl_FragColor = vec4(finalColor.rgb + light, finalColor.a);\n\n	#HOOK_FRAGMENT_END\n\n  #ifdef FOG\n    gl_FragColor.rgb = mix(uFogColor, gl_FragColor.rgb, fogFactor);\n  #endif\n\n}\n"]);var definesVs=[options.color?"#define COLOR":"",options.normalMap?"#define NORMAL_MAP":"",options.fog?"#define FOG":""].filter(filterEmptyLine).join("\n");var definesFs=[options.color?"#define COLOR":"",options.texture?"#define TEXTURE":"",options.normalMap?"#define NORMAL_MAP":"",options.fog?"#define FOG":""].filter(filterEmptyLine).join("\n");var vertex=definesVs+"\n"+vs;var fragment=definesFs+"\n"+fs;if(!options.vertex)options.vertex={};vertex=vertex.replace(/#HOOK_VERTEX_START/g,options.vertex.start||"");vertex=vertex.replace(/#HOOK_VERTEX_MAIN/g,options.vertex.main||"");vertex=vertex.replace(/#HOOK_VERTEX_END/g,options.vertex.end||"");if(!options.fragment)options.fragment={};fragment=fragment.replace(/#HOOK_FRAGMENT_START/g,options.fragment.start||"");fragment=fragment.replace(/#HOOK_FRAGMENT_MAIN/g,options.fragment.main||"");fragment=fragment.replace(/#HOOK_FRAGMENT_END/g,options.fragment.end||"");if(!options.fog)options.fog={};return _possibleConstructorReturn(this,(Material.__proto__||Object.getPrototypeOf(Material)).call(this,vertex,fragment,Object.assign({},{uColor:options.color||[0,0,0],uTexture:options.texture||null,uNormalMap:options.normalMap||null,uNormalScale:options.normalScale||[1,1],uNormalUVRepeat:options.normalUvRepeat||[1,1],uDensity:options.fog.density||0,uGradient:options.fog.gradient||0,uFogColor:options.fog.color||[0,0,0]},options.uniforms),"BasicMaterial"))}return Material}(_Shader3.default);exports.default=Material},{"./Shader":66,glslify:27}],63:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _IndexBuffer=require("../core/IndexBuffer");var _IndexBuffer2=_interopRequireDefault(_IndexBuffer);var _ArrayBuffer=require("../core/ArrayBuffer");var _ArrayBuffer2=_interopRequireDefault(_ArrayBuffer);var _ArrayUtils=require("../utils/ArrayUtils");var _ArrayUtils2=_interopRequireDefault(_ArrayUtils);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var Geometry=function(){function Geometry(){var data=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,Geometry);this.attributes={};var flat=data.flat||false;if(data.positions){this.addAttribute("positions",data.positions,flat)}if(data.uvs){this.addAttribute("uvs",data.uvs,flat)}if(data.normals){this.addAttribute("normals",data.normals,flat)}if(data.indices||data.cells){this.addIndices(data.indices||data.cells,flat)}}_createClass(Geometry,[{key:"addInstancedAttribute",value:function addInstancedAttribute(name,data,divisor,flat){this.instanced=true;this.count=1;this.attributes[name]=new _ArrayBuffer2.default({context:gl,data:flat?data:_ArrayUtils2.default.flatten(data),divisor:divisor});this[name]=this.attributes[name];return this}},{key:"addCount",value:function addCount(count){this.count=count}},{key:"addAttribute",value:function addAttribute(name,data,flat){this.attributes[name]=new _ArrayBuffer2.default({context:gl,data:flat?data:_ArrayUtils2.default.flatten(data)});this[name]=this.attributes[name];return this}},{key:"addIndices",value:function addIndices(data,flat){this.indices=new _IndexBuffer2.default({context:gl,data:flat?data:_ArrayUtils2.default.flatten(data)});return this}},{key:"generateFaces",value:function generateFaces(){var faces=_ArrayUtils2.default.generateFaces(this.positions._data,this.indices._data);this.faces=faces;return this.faces}}]);return Geometry}();exports.default=Geometry},{"../core/ArrayBuffer":52,"../core/IndexBuffer":55,"../utils/ArrayUtils":83}],64:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _Object3D2=require("../core/Object3D");var _Object3D3=_interopRequireDefault(_Object3D2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var Mesh=function(_Object3D){_inherits(Mesh,_Object3D);function Mesh(geometry,shader){_classCallCheck(this,Mesh);var _this=_possibleConstructorReturn(this,(Mesh.__proto__||Object.getPrototypeOf(Mesh)).call(this));_this.drawType=gl.TRIANGLES;_this.geometry=geometry,_this.shader=shader;return _this}return Mesh}(_Object3D3.default);exports.default=Mesh},{"../core/Object3D":56}],65:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _primitiveSphere=require("primitive-sphere");var _primitiveSphere2=_interopRequireDefault(_primitiveSphere);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var primtives={bigTriangle:function bigTriangle(){var positions=[-1,-1,-1,4,4,-1];var indices=[2,1,0];return{positions:positions,indices:indices,flat:true}},quad:function quad(){var width=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;var height=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;var positions=[-1,-1,0,-1,1,0,1,1,0,1,-1,0];for(var i=0;i<positions.length;i+=3){positions[i]*=width;positions[i+1]*=height}var indices=[0,1,2,0,2,3];var normals=[0,0,1,0,0,1,0,0,1,0,0,1];var uvs=[0,1,0,0,1,0,1,1];return{positions:positions,indices:indices,normals:normals,uvs:uvs,flat:true}},plane:function plane(){var width=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;var height=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;var subdivisionsX=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1;var subdivisionsY=arguments.length>3&&arguments[3]!==undefined?arguments[3]:1;var positions=[];var indices=[];var normals=[];var uvs=[];var index=0;var spacerX=width/subdivisionsX;var spacerY=height/subdivisionsY;var offsetX=-width*.5;var offsetY=-height*.5;var spacerU=1/subdivisionsX;var spacerV=1/subdivisionsY;for(var y=0;y<subdivisionsY;y+=1){for(var x=0;x<subdivisionsX;x+=1){var triangleX=spacerX*x+offsetX;var triangleY=spacerY*y+offsetY;var u=x/subdivisionsX;var v=y/subdivisionsY;positions.push(triangleX,triangleY,0);positions.push(triangleX+spacerX,triangleY,0);positions.push(triangleX+spacerX,triangleY+spacerY,0);positions.push(triangleX,triangleY+spacerY,0);normals.push(0,0,1);normals.push(0,0,1);normals.push(0,0,1);normals.push(0,0,1);uvs.push(u,v);uvs.push(u+spacerU,v);uvs.push(u+spacerU,v+spacerV);uvs.push(u,v+spacerV);indices.push(index*4+0);indices.push(index*4+1);indices.push(index*4+2);indices.push(index*4+0);indices.push(index*4+2);indices.push(index*4+3);index+=1}}return{positions:positions,indices:indices,normals:normals,uvs:uvs,flat:true}},cube:function cube(){var width=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;var height=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;var depth=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1;var positions=[-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1];for(var i=0;i<positions.length;i+=3){positions[i]*=width;positions[i+1]*=height;positions[i+2]*=depth}var indices=[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23];var normals=[0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0];var uvs=[0,0,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1];return{positions:positions,indices:indices,normals:normals,uvs:uvs}},sphere:function sphere(size,segments){return new _primitiveSphere2.default(size,{segments:segments})}};exports.default=primtives},{"primitive-sphere":30}],66:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _Program=require("../core/Program");var _Program2=_interopRequireDefault(_Program);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var Shader=function Shader(vs,fs){var uniforms=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var name=arguments[3];_classCallCheck(this,Shader);this.program=new _Program2.default({context:gl,vertexShader:vs,fragmentShader:fs,name:name});this.uniforms=uniforms};exports.default=Shader},{"../core/Program":57}],67:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _ArrayBuffer=require("./core/ArrayBuffer");var _ArrayBuffer2=_interopRequireDefault(_ArrayBuffer);var _IndexBuffer=require("./core/IndexBuffer");var _IndexBuffer2=_interopRequireDefault(_IndexBuffer);var _FrameBuffer=require("./core/FrameBuffer");var _FrameBuffer2=_interopRequireDefault(_FrameBuffer);var _Object3D=require("./core/Object3D");var _Object3D2=_interopRequireDefault(_Object3D);var _Program=require("./core/Program");var _Program2=_interopRequireDefault(_Program);var _Texture=require("./core/Texture");var _Texture2=_interopRequireDefault(_Texture);var _TextureCube=require("./core/TextureCube");var _TextureCube2=_interopRequireDefault(_TextureCube);var _Webgl=require("./core/Webgl");var _Webgl2=_interopRequireDefault(_Webgl);var _State=require("./core/State");var _State2=_interopRequireDefault(_State);var _OrthographicCamera=require("./camera/OrthographicCamera");var _OrthographicCamera2=_interopRequireDefault(_OrthographicCamera);var _PerspectiveCamera=require("./camera/PerspectiveCamera");var _PerspectiveCamera2=_interopRequireDefault(_PerspectiveCamera);var _webglNumber=require("./const/webglNumber");var _webglNumber2=_interopRequireDefault(_webglNumber);var _webglConst=require("./const/webglConst");var _webglConst2=_interopRequireDefault(_webglConst);var _Geometry=require("./high/Geometry");var _Geometry2=_interopRequireDefault(_Geometry);var _Mesh=require("./high/Mesh");var _Mesh2=_interopRequireDefault(_Mesh);var _Shader=require("./high/Shader");var _Shader2=_interopRequireDefault(_Shader);var _Primitive=require("./high/Primitive");var _Primitive2=_interopRequireDefault(_Primitive);var _BasicMaterial=require("./high/BasicMaterial");var _BasicMaterial2=_interopRequireDefault(_BasicMaterial);var _Utils=require("./utils/Utils");var _Utils2=_interopRequireDefault(_Utils);var _ArrayUtils=require("./utils/ArrayUtils");var _ArrayUtils2=_interopRequireDefault(_ArrayUtils);var _ObjParser=require("./utils/ObjParser");var _ObjParser2=_interopRequireDefault(_ObjParser);var _Debug=require("./utils/Debug");var _Debug2=_interopRequireDefault(_Debug);var _HitDetect=require("./utils/HitDetect");var _HitDetect2=_interopRequireDefault(_HitDetect);var _Vector=require("./math/Vector3");var _Vector2=_interopRequireDefault(_Vector);var _Composer=require("./post/Composer");var _Composer2=_interopRequireDefault(_Composer);var _Pass=require("./post/Pass");var _Pass2=_interopRequireDefault(_Pass);var _NoisePass=require("./post/NoisePass");var _NoisePass2=_interopRequireDefault(_NoisePass);var _BoxBlurPass=require("./post/BoxBlurPass");var _BoxBlurPass2=_interopRequireDefault(_BoxBlurPass);var _FullBoxBlurPass=require("./post/FullBoxBlurPass");var _FullBoxBlurPass2=_interopRequireDefault(_FullBoxBlurPass);var _InvertPass=require("./post/InvertPass");var _InvertPass2=_interopRequireDefault(_InvertPass);var _FXAAPass=require("./post/FXAAPass");var _FXAAPass2=_interopRequireDefault(_FXAAPass);var _ToonPass=require("./post/ToonPass");var _ToonPass2=_interopRequireDefault(_ToonPass);var _BrightnessContrastPass=require("./post/BrightnessContrastPass");var _BrightnessContrastPass2=_interopRequireDefault(_BrightnessContrastPass);var _DofPass=require("./post/DofPass");var _DofPass2=_interopRequireDefault(_DofPass);var _TiltPass=require("./post/TiltPass");var _TiltPass2=_interopRequireDefault(_TiltPass);var _BlendPass=require("./post/BlendPass");var _BlendPass2=_interopRequireDefault(_BlendPass);var _BloomPass=require("./post/BloomPass");var _BloomPass2=_interopRequireDefault(_BloomPass);var _FBOHelper=require("./utils/FBOHelper");var _FBOHelper2=_interopRequireDefault(_FBOHelper);var _glMatrix=require("gl-matrix");var _glMatrix2=_interopRequireDefault(_glMatrix);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var vanilla={glm:_glMatrix2.default,Webgl:_Webgl2.default,Texture:_Texture2.default,TextureCube:_TextureCube2.default,Program:_Program2.default,Object3D:_Object3D2.default,FrameBuffer:_FrameBuffer2.default,IndexBuffer:_IndexBuffer2.default,ArrayBuffer:_ArrayBuffer2.default,OrthographicCamera:_OrthographicCamera2.default,PerspectiveCamera:_PerspectiveCamera2.default,GLNumber:_webglNumber2.default,GLConst:_webglConst2.default,Geometry:_Geometry2.default,Mesh:_Mesh2.default,Shader:_Shader2.default,Primitive:_Primitive2.default,State:_State2.default,BasicMaterial:_BasicMaterial2.default,Utils:_Utils2.default,utils:_Utils2.default,ArrayUtils:_ArrayUtils2.default,Debug:_Debug2.default,debug:_Debug2.default,Vector3:_Vector2.default,Composer:_Composer2.default,Pass:_Pass2.default,NoisePass:_NoisePass2.default,BoxBlurPass:_BoxBlurPass2.default,InvertPass:_InvertPass2.default,FXAAPass:_FXAAPass2.default,ToonPass:_ToonPass2.default,BrightnessContrastPass:_BrightnessContrastPass2.default,DofPass:_DofPass2.default,BloomPass:_BloomPass2.default,TiltPass:_TiltPass2.default,FullBoxBlurPass:_FullBoxBlurPass2.default,BlendPass:_BlendPass2.default,FBOHelper:_FBOHelper2.default,ObjParser:_ObjParser2.default,HitDetect:_HitDetect2.default};exports.default=vanilla},{"./camera/OrthographicCamera":48,"./camera/PerspectiveCamera":49,"./const/webglConst":50,"./const/webglNumber":51,"./core/ArrayBuffer":52,"./core/FrameBuffer":54,"./core/IndexBuffer":55,"./core/Object3D":56,"./core/Program":57,"./core/State":58,"./core/Texture":59,"./core/TextureCube":60,"./core/Webgl":61,"./high/BasicMaterial":62,"./high/Geometry":63,"./high/Mesh":64,"./high/Primitive":65,"./high/Shader":66,"./math/Vector3":69,"./post/BlendPass":70,"./post/BloomPass":71,"./post/BoxBlurPass":72,"./post/BrightnessContrastPass":73,"./post/Composer":74,"./post/DofPass":75,"./post/FXAAPass":76,"./post/FullBoxBlurPass":77,"./post/InvertPass":78,"./post/NoisePass":79,"./post/Pass":80,"./post/TiltPass":81,"./post/ToonPass":82,"./utils/ArrayUtils":83,"./utils/Debug":84,"./utils/FBOHelper":85,"./utils/HitDetect":86,"./utils/ObjParser":87,"./utils/Utils":91,"gl-matrix":14}],68:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _glMatrix=require("gl-matrix");var glm=_interopRequireWildcard(_glMatrix);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var mat4=glm.mat4;var vec3=glm.vec3;var a=vec3.create();var b=vec3.create();var c=vec3.create();var target=vec3.create();var edge1=vec3.create();var edge2=vec3.create();var normal=vec3.create();var diff=vec3.create();var Ray=function(){function Ray(mOrigin,mDirection){_classCallCheck(this,Ray);this.origin=vec3.clone(mOrigin);this.direction=vec3.clone(mDirection)}_createClass(Ray,[{key:"at",value:function at(t){vec3.copy(target,this.direction);vec3.scale(target,target,t);vec3.add(target,target,this.origin);return target}},{key:"lookAt",value:function lookAt(mTarget){vec3.sub(this.direction,mTarget,this.origin);vec3.normalize(this.origin,this.origin)}},{key:"closestPointToPoint",value:function closestPointToPoint(mPoint){var result=vec3.create();vec3.sub(mPoint,this.origin);var directionDistance=vec3.dot(result,this.direction);if(directionDistance<0){return vec3.clone(this.origin)}vec3.copy(result,this.direction);vec3.scale(result,result,directionDistance);vec3.add(result,result,this.origin);return result}},{key:"distanceToPoint",value:function distanceToPoint(mPoint){return Math.sqrt(this.distanceSqToPoint(mPoint))}},{key:"distanceSqToPoint",value:function distanceSqToPoint(mPoint){var v1=vec3.create();vec3.sub(v1,mPoint,this.origin);var directionDistance=vec3.dot(v1,this.direction);if(directionDistance<0){return vec3.squaredDistance(this.origin,mPoint)}vec3.copy(v1,this.direction);vec3.scale(v1,v1,directionDistance);vec3.add(v1,v1,this.origin);return vec3.squaredDistance(v1,mPoint)}},{key:"intersectsSphere",value:function intersectsSphere(mCenter,mRadius){return this.distanceToPoint(mCenter)<=mRadius}},{key:"intersectSphere",value:function intersectSphere(mCenter,mRadius){var v1=vec3.create();vec3.sub(v1,mCenter,this.origin);var tca=vec3.dot(v1,this.direction);var d2=vec3.dot(v1,v1)-tca*tca;var radius2=mRadius*mRadius;if(d2>radius2)return null;var thc=Math.sqrt(radius2-d2);var t0=tca-thc;var t1=tca+thc;if(t0<0&&t1<0)return null;if(t0<0)return this.at(t1);return this.at(t0)}},{key:"distanceToPlane",value:function distanceToPlane(mPlaneCenter,mNormal){var denominator=vec3.dot(mNormal,this.direction);if(denominator===0){}}},{key:"intersectTriangle",value:function intersectTriangle(mPA,mPB,mPC){var backfaceCulling=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;vec3.copy(a,mPA);vec3.copy(b,mPB);vec3.copy(c,mPC);vec3.sub(edge1,b,a);vec3.sub(edge2,c,a);vec3.cross(normal,edge1,edge2);var DdN=vec3.dot(this.direction,normal);var sign=void 0;if(DdN>0){if(backfaceCulling){return null}sign=1}else if(DdN<0){sign=-1;DdN=-DdN}else{return null}vec3.sub(diff,this.origin,a);vec3.cross(edge2,diff,edge2);var DdQxE2=sign*vec3.dot(this.direction,edge2);if(DdQxE2<0){return null}vec3.cross(edge1,edge1,diff);var DdE1xQ=sign*vec3.dot(this.direction,edge1);if(DdE1xQ<0){return null}if(DdQxE2+DdE1xQ>DdN){return null}var Qdn=-sign*vec3.dot(diff,normal);if(Qdn<0){return null}return this.at(Qdn/DdN)}}]);return Ray}();exports.default=Ray},{"gl-matrix":14}],69:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _glMatrix=require("gl-matrix");var glm=_interopRequireWildcard(_glMatrix);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var Vector3=function(){function Vector3(){var x=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var y=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var z=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;_classCallCheck(this,Vector3);this._xyz=glm.vec3.fromValues(x,y,z)}_createClass(Vector3,[{key:"get",value:function get(){return this._xyz}},{key:"set",value:function set(x,y,z){if(arguments.length>1){this._xyz[0]=x;this._xyz[1]=y;this._xyz[2]=z}else{this._xyz[0]=x;this._xyz[1]=x;this._xyz[2]=x}this.onChangeCallback();return this}},{key:"toString",value:function toString(){return"x: "+this.x+", y: "+this.y+", z: "+this.z}},{key:"x",get:function get(){return this._xyz[0]},set:function set(value){this._xyz[0]=value;this.onChangeCallback()}},{key:"y",get:function get(){return this._xyz[1]},set:function set(value){this._xyz[1]=value;this.onChangeCallback()}},{key:"z",get:function get(){return this._xyz[2]},set:function set(value){this._xyz[2]=value;this.onChangeCallback()}}]);return Vector3}();Object.assign(Vector3.prototype,{onChange:function onChange(fn){this.onChangeCallback=fn},onChangeCallback:function onChangeCallback(){}});exports.default=Vector3},{"gl-matrix":14}],70:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _Pass2=require("./Pass");var _Pass3=_interopRequireDefault(_Pass2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var glslify=require("glslify");var BlendPass=function(_Pass){_inherits(BlendPass,_Pass);function BlendPass(){var config=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,BlendPass);var uniforms={};uniforms.mode=config.mode||1;uniforms.opacity=config.opacity||1;uniforms.tInput2=config.tInput2||null;uniforms.sizeMode=config.sizeMode||1;uniforms.aspectRatio=config.aspectRatio||1;uniforms.aspectRatio2=config.aspectRatio2||1;return _possibleConstructorReturn(this,(BlendPass.__proto__||Object.getPrototypeOf(BlendPass)).call(this,glslify(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec2 vUv;\nuniform sampler2D uTexture;\nuniform sampler2D tInput2;\nuniform vec2 resolution;\nuniform vec2 resolution2;\nuniform float aspectRatio;\nuniform float aspectRatio2;\nuniform int mode;\nuniform int sizeMode;\nuniform float opacity;\n\nvec2 vUv2;\n\nfloat applyOverlayToChannel( float base, float blend ) {\n\n  return (base < 0.5 ? (2.0 * base * blend) : (1.0 - 2.0 * (1.0 - base) * (1.0 - blend)));\n\n}\n\nfloat applySoftLightToChannel( float base, float blend ) {\n\n  return ((blend < 0.5) ? (2.0 * base * blend + base * base * (1.0 - 2.0 * blend)) : (sqrt(base) * (2.0 * blend - 1.0) + 2.0 * base * (1.0 - blend)));\n\n}\n\nfloat applyColorBurnToChannel( float base, float blend ) {\n\n  return ((blend == 0.0) ? blend : max((1.0 - ((1.0 - base) / blend)), 0.0));\n\n}\n\nfloat applyColorDodgeToChannel( float base, float blend ) {\n\n  return ((blend == 1.0) ? blend : min(base / (1.0 - blend), 1.0));\n\n}\n\nfloat applyLinearBurnToChannel( float base, float blend ) {\n\n  return max(base + blend - 1., 0.0 );\n\n}\n\nfloat applyLinearDodgeToChannel( float base, float blend ) {\n\n  return min( base + blend, 1. );\n\n}\n\nfloat applyLinearLightToChannel( float base, float blend ) {\n\n  return ( blend < .5 ) ? applyLinearBurnToChannel( base, 2. * blend ) : applyLinearDodgeToChannel( base, 2. * ( blend - .5 ) );\n\n}\n\nvoid main() {\n\n  vUv2 = vUv;\n\n  if( sizeMode == 1 ) {\n\n    if( aspectRatio2 > aspectRatio ) {\n      vUv2.x = vUv.x * aspectRatio / aspectRatio2;\n      vUv2.x += .5 * ( 1. - aspectRatio / aspectRatio2 );\n      vUv2.y = vUv.y;\n    }\n\n    if( aspectRatio2 < aspectRatio ) {\n      vUv2.x = vUv.x;\n      vUv2.y = vUv.y * aspectRatio2 / aspectRatio;\n      vUv2.y += .5 * ( 1. - aspectRatio2 / aspectRatio );\n    }\n\n  }\n\n  vec4 base = texture2D( uTexture, vUv );\n  vec4 blend = texture2D( tInput2, vUv2 );\n\n  if( mode == 1 ) { // normal\n\n    gl_FragColor = base;\n    gl_FragColor.a *= opacity;\n    return;\n\n  }\n\n  if( mode == 2 ) { // dissolve\n\n  }\n\n  if( mode == 3 ) { // darken\n\n    gl_FragColor = min( base, blend );\n    return;\n\n  }\n\n  if( mode == 4 ) { // multiply\n\n    gl_FragColor = base * blend;\n    return;\n\n  }\n\n  if( mode == 5 ) { // color burn\n\n    gl_FragColor = vec4(\n      applyColorBurnToChannel( base.r, blend.r ),\n      applyColorBurnToChannel( base.g, blend.g ),\n      applyColorBurnToChannel( base.b, blend.b ),\n      applyColorBurnToChannel( base.a, blend.a )\n    );\n    return;\n\n  }\n\n  if( mode == 6 ) { // linear burn\n\n    gl_FragColor = max(base + blend - 1.0, 0.0);\n    return;\n\n  }\n\n  if( mode == 7 ) { // darker color\n\n  }\n\n  if( mode == 8 ) { // lighten\n\n    gl_FragColor = max( base, blend );\n    return;\n\n  }\n\n  if( mode == 9 ) { // screen\n\n    gl_FragColor = (1.0 - ((1.0 - base) * (1.0 - blend)));\n    gl_FragColor = gl_FragColor * opacity + base * ( 1. - opacity );\n    return;\n\n  }\n\n  if( mode == 10 ) { // color dodge\n\n    gl_FragColor = vec4(\n      applyColorDodgeToChannel( base.r, blend.r ),\n      applyColorDodgeToChannel( base.g, blend.g ),\n      applyColorDodgeToChannel( base.b, blend.b ),\n      applyColorDodgeToChannel( base.a, blend.a )\n    );\n    return;\n\n  }\n\n  if( mode == 11 ) { // linear dodge\n\n    gl_FragColor = min(base + blend, 1.0);\n    return;\n\n  }\n\n  if( mode == 12 ) { // lighter color\n\n  }\n\n  if( mode == 13 ) { // overlay\n\n    gl_FragColor = gl_FragColor = vec4(\n      applyOverlayToChannel( base.r, blend.r ),\n      applyOverlayToChannel( base.g, blend.g ),\n      applyOverlayToChannel( base.b, blend.b ),\n      applyOverlayToChannel( base.a, blend.a )\n    );\n    gl_FragColor = gl_FragColor * opacity + base * ( 1. - opacity );\n\n    return;\n\n  }\n\n  if( mode == 14 ) { // soft light\n\n    gl_FragColor = vec4(\n      applySoftLightToChannel( base.r, blend.r ),\n      applySoftLightToChannel( base.g, blend.g ),\n      applySoftLightToChannel( base.b, blend.b ),\n      applySoftLightToChannel( base.a, blend.a )\n    );\n    return;\n\n  }\n\n  if( mode == 15 ) { // hard light\n\n    gl_FragColor = vec4(\n      applyOverlayToChannel( base.r, blend.r ),\n      applyOverlayToChannel( base.g, blend.g ),\n      applyOverlayToChannel( base.b, blend.b ),\n      applyOverlayToChannel( base.a, blend.a )\n    );\n    gl_FragColor = gl_FragColor * opacity + base * ( 1. - opacity );\n    return;\n\n  }\n\n  if( mode == 16 ) { // vivid light\n\n  }\n\n  if( mode == 17 ) { // linear light\n\n    gl_FragColor = vec4(\n      applyLinearLightToChannel( base.r, blend.r ),\n      applyLinearLightToChannel( base.g, blend.g ),\n      applyLinearLightToChannel( base.b, blend.b ),\n      applyLinearLightToChannel( base.a, blend.a )\n    );\n    return;\n\n  }\n\n  if( mode == 18 ) { // pin light\n\n  }\n\n  if( mode == 19 ) { // hard mix\n\n  }\n\n  if( mode == 20 ) { // difference\n\n    gl_FragColor = abs( base - blend );\n    gl_FragColor.a = base.a + blend.b;\n    return;\n\n  }\n\n  if( mode == 21 ) { // exclusion\n\n    gl_FragColor = base + blend - 2. * base * blend;\n\n  }\n\n  if( mode == 22 ) { // substract\n\n  }\n\n  if( mode == 23 ) { // divide\n\n  }\n\n  gl_FragColor = vec4( 1., 0., 1., 1. );\n\n}\n"]),uniforms,"BlendPass"))}return BlendPass}(_Pass3.default);exports.default=BlendPass},{"./Pass":80,glslify:27}],71:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _Shader=require("../high/Shader");var _Shader2=_interopRequireDefault(_Shader);var _FrameBuffer=require("../core/FrameBuffer");var _FrameBuffer2=_interopRequireDefault(_FrameBuffer);var _FullBoxBlurPass=require("./FullBoxBlurPass");var _FullBoxBlurPass2=_interopRequireDefault(_FullBoxBlurPass);var _BlendPass=require("./BlendPass");var _BlendPass2=_interopRequireDefault(_BlendPass);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var glslify=require("glslify");var BlendMode={Normal:1,Dissolve:2,Darken:3,Multiply:4,ColorBurn:5,LinearBurn:6,DarkerColor:7,Lighten:8,Screen:9,ColorDodge:10,LinearDodge:11,LighterColor:12,Overlay:13,SoftLight:14,HardLight:15,VividLight:16,LinearLight:17,PinLight:18,HardMix:19,Difference:20,Exclusion:21,Substract:22,Divide:23};var Pass=function(){function Pass(){var config=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,Pass);this.amount=config.amount||2}_createClass(Pass,[{key:"initialize",value:function initialize(composer){if(!this.fbo){this.fbo=new _FrameBuffer2.default(gl,composer.width,composer.height)}this.composer=composer;this.fullBoxBlurPass=new _FullBoxBlurPass2.default({uAmount:this.amount});this.fullBoxBlurPass.initialize(composer);this.blendPass=new _BlendPass2.default;this.blendPass.initialize(composer)}},{key:"process",value:function process(inputTexture,cb){var touput=void 0;this.fullBoxBlurPass.process(inputTexture,function(ouput){touput=ouput});this.blendPass.shader.uniforms.mode=9;this.blendPass.shader.uniforms.resolution=[this.composer.width,this.composer.height];this.blendPass.shader.uniforms.resolution2=[this.composer.width,this.composer.height];this.blendPass.shader.uniforms.tInput2=inputTexture;this.blendPass.process(touput,function(ouput){cb(ouput)})}}]);return Pass}();exports.default=Pass},{"../core/FrameBuffer":54,"../high/Shader":66,"./BlendPass":70,"./FullBoxBlurPass":77,glslify:27}],72:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _Shader=require("../high/Shader");var _Shader2=_interopRequireDefault(_Shader);var _FrameBuffer=require("../core/FrameBuffer");var _FrameBuffer2=_interopRequireDefault(_FrameBuffer);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var glslify=require("glslify");var BoxBlur=function(){function BoxBlur(){var config=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,BoxBlur);var uniforms={};uniforms.uDelta=config.uDelta||[0,0];this.shader=new _Shader2.default(glslify(["#define GLSLIFY 1\nattribute vec2 aPosition;\nattribute vec2 aUv;\n\nvarying vec2 vUv;\nvarying vec2 blurTexCoords[9];\n\nuniform vec2 uResolution;\nuniform vec2 uDelta;\n\nvoid main() {\n\n  vec2 inc = uDelta / uResolution;\n\n  vec4 p = vec4(aPosition,0.0, 1.0);\n  gl_Position = p;\n  vUv =  aPosition * .5 + .5;\n\n  blurTexCoords[ 0 ] = vUv - inc * 4.;\n  blurTexCoords[ 1 ] = vUv - inc * 3.;\n  blurTexCoords[ 2 ] = vUv - inc * 2.;\n  blurTexCoords[ 3 ] = vUv - inc * 1.;\n  blurTexCoords[ 4 ] = vUv;\n  blurTexCoords[ 5 ] = vUv + inc * 1.;\n  blurTexCoords[ 6 ] = vUv + inc * 2.;\n  blurTexCoords[ 7 ] = vUv + inc * 3.;\n  blurTexCoords[ 8 ] = vUv + inc * 4.;\n}\n"]),glslify(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D uTexture;\nvarying vec2 blurTexCoords[9];\n\nvoid main() {\n\n  vec4 sum = vec4( 0. );\n\n  sum += texture2D( uTexture, blurTexCoords[0] ) * 0.051;\n  sum += texture2D( uTexture, blurTexCoords[1] ) * 0.0918;\n  sum += texture2D( uTexture, blurTexCoords[2] ) * 0.12245;\n  sum += texture2D( uTexture, blurTexCoords[3] ) * 0.1531;\n  sum += texture2D( uTexture, blurTexCoords[4] ) * 0.1633;\n  sum += texture2D( uTexture, blurTexCoords[5] ) * 0.1531;\n  sum += texture2D( uTexture, blurTexCoords[6] ) * 0.12245;\n  sum += texture2D( uTexture, blurTexCoords[7] ) * 0.0918;\n  sum += texture2D( uTexture, blurTexCoords[8] ) * 0.051;\n\n  gl_FragColor = sum;\n\n}\n"]),uniforms,"BoxBlurPass");this.enable=true;this.fbo=null}_createClass(BoxBlur,[{key:"process",value:function process(composer,cb){if(!this.fbo){this.fbo=new _FrameBuffer2.default(gl,composer.width,composer.height)}this.fbo.bind();this.shader.uniforms.uTexture=composer.outputTexture;this.shader.uniforms.uResolution=[composer.width,composer.height];composer.bigTriangle.shader=this.shader;composer.renderer.render(composer.bigTriangle,composer.camera);this.fbo.unbind();cb(this.fbo.colors)}}]);return BoxBlur}();exports.default=BoxBlur},{"../core/FrameBuffer":54,"../high/Shader":66,glslify:27}],73:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _Pass2=require("./Pass");var _Pass3=_interopRequireDefault(_Pass2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var glslify=require("glslify");var BrightnessContrastPass=function(_Pass){_inherits(BrightnessContrastPass,_Pass);function BrightnessContrastPass(){var config=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,BrightnessContrastPass);var uniforms={};uniforms.uBrightness=config.uBrightness||1;uniforms.uContrast=config.uContrast||1;return _possibleConstructorReturn(this,(BrightnessContrastPass.__proto__||Object.getPrototypeOf(BrightnessContrastPass)).call(this,glslify(["precision highp float;\n#define GLSLIFY 1\n\nuniform float uBrightness;\nuniform float uContrast;\nuniform sampler2D uTexture;\n\nvarying vec2 vUv;\n\nvoid main() {\n\n  vec3 color = texture2D(uTexture, vUv).rgb;\n  vec3 colorContrasted = (color) * uContrast;\n  vec3 bright = colorContrasted + vec3(uBrightness,uBrightness,uBrightness);\n  gl_FragColor.rgb = bright;\n  gl_FragColor.a = 1.;\n\n}\n"]),uniforms,"BrightnessContrastPass"))}return BrightnessContrastPass}(_Pass3.default);exports.default=BrightnessContrastPass},{"./Pass":80,glslify:27}],74:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _Mesh=require("../high/Mesh");var _Mesh2=_interopRequireDefault(_Mesh);var _Geometry=require("../high/Geometry");var _Geometry2=_interopRequireDefault(_Geometry);var _Shader=require("../high/Shader");var _Shader2=_interopRequireDefault(_Shader);var _Primitive=require("../high/Primitive");var _Primitive2=_interopRequireDefault(_Primitive);var _FrameBuffer=require("../core/FrameBuffer");var _FrameBuffer2=_interopRequireDefault(_FrameBuffer);var _FBOHelper=require("../utils/FBOHelper");var _FBOHelper2=_interopRequireDefault(_FBOHelper);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var glslify=require("glslify");var Composer=function(){function Composer(renderer,width,height){var debug=arguments.length>3&&arguments[3]!==undefined?arguments[3]:true;_classCallCheck(this,Composer);this.renderer=renderer;this.passes=[];if(debug)this.helper=new _FBOHelper2.default(renderer);this.shader=new _Shader2.default(glslify(["#define GLSLIFY 1\nattribute vec2 aPosition;\nattribute vec2 aUv;\n\nvarying vec3 vNormal;\nvarying vec2 vUv;\n\nvoid main() {\n  vec4 p = vec4(aPosition,0.0, 1.0);\n  gl_Position = p;\n  vUv =  aPosition * .5 + .5;\n}\n"]),glslify(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D uTexture;\nvarying vec2 vUv;\n\nvoid main() {\n  vec4 base = texture2D(uTexture,vUv);\n  gl_FragColor = vec4(base.rgb, 1.0);\n}\n"]),{},"Composer");this.geo=new _Geometry2.default(_Primitive2.default.bigTriangle(1,1));this.bigTriangle=new _Mesh2.default(this.geo,this.shader);this.setSize(width,height)}_createClass(Composer,[{key:"add",value:function add(pass){this.passes.push(pass);pass.initialize(this)}},{key:"render",value:function render(scene,camera){var _this=this;this.camera=camera;this.fboIn.bind();this.fboIn.clear();this.renderer.render(scene,camera);this.fboIn.unbind();this.outputTexture=this.fboIn.colors;this.outputTextureDepth=this.fboIn.depth;var count=0;this.passes.forEach(function(pass){if(pass.enable){if(pass.shader){if(pass.shader.uniforms){pass.shader.uniforms.uResolution=[_this.width,_this.height]}}pass.process(_this.outputTexture,function(ouput){_this.outputTexture=ouput;count++;if(_this.helper)_this.helper.renderImediate(ouput,count)})}});this.toScreen()}},{key:"pass",value:function pass(fbo,shader){fbo.bind();this.bigTriangle.shader=shader;this.renderer.render(this.bigTriangle,this.camera);fbo.unbind()}},{key:"toScreen",value:function toScreen(){this.bigTriangle.shader=this.shader;this.shader.uniforms.uTexture=this.outputTexture;this.renderer.render(this.bigTriangle)}},{key:"swap",value:function swap(){var tmp=this.fboIn;this.fboIn=this.fboOut;this.fboOut=tmp}},{key:"setSize",value:function setSize(width,height){this.fboIn=new _FrameBuffer2.default(gl,width,height,{depth:true});this.fboOut=new _FrameBuffer2.default(gl,width,height,{depth:true});this.width=width;this.height=height;this.outputTexture=this.fboIn.colors}}]);return Composer}();exports.default=Composer},{"../core/FrameBuffer":54,"../high/Geometry":63,"../high/Mesh":64,"../high/Primitive":65,"../high/Shader":66,"../utils/FBOHelper":85,glslify:27}],75:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _Pass2=require("./Pass");var _Pass3=_interopRequireDefault(_Pass2);var _FrameBuffer=require("../core/FrameBuffer");var _FrameBuffer2=_interopRequireDefault(_FrameBuffer);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var glslify=require("glslify");var DofPass=function(_Pass){_inherits(DofPass,_Pass);function DofPass(){var config=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,DofPass);var uniforms={};uniforms.uFocalDistance=config.uFocalDistance||.01;uniforms.uAperture=config.uAperture||.005;return _possibleConstructorReturn(this,(DofPass.__proto__||Object.getPrototypeOf(DofPass)).call(this,glslify(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec2 vUv;\nuniform sampler2D uTexture;\nuniform sampler2D uDepth;\nuniform float uFocalDistance;\nuniform float uAperture;\nuniform vec2 uDelta;\n\nfloat random(vec3 scale,float seed){return fract(sin(dot(gl_FragCoord.xyz+seed,scale))*43758.5453+seed);}\n\nfloat unpack_depth(const in vec4 color) {\n  return ( color.r * 256. * 256. * 256. + color.g * 256. * 256. + color.b * 256. + color.a ) / ( 256. * 256. * 256. );\n}\n\nfloat sampleBias( vec2 uv ) {\n  float d = abs( texture2D( uDepth, uv ).r - uFocalDistance );\n  return min( d * uAperture, .005 );\n  //return unpack_depth( texture2D( uDepth, uv ) );\n}\n\nvoid main() {\n\n  vec4 sum = vec4( 0. );\n  float bias = sampleBias( vUv );\n\n  sum += texture2D( uTexture, ( vUv - bias * uDelta * 4. ) ) * 0.051;\n  sum += texture2D( uTexture, ( vUv - bias * uDelta * 3. ) ) * 0.0918;\n  sum += texture2D( uTexture, ( vUv - bias * uDelta * 2. ) ) * 0.12245;\n  sum += texture2D( uTexture, ( vUv - bias * uDelta * 1. ) ) * 0.1531;\n  sum += texture2D( uTexture, ( vUv + bias * uDelta * 0. ) ) * 0.1633;\n  sum += texture2D( uTexture, ( vUv + bias * uDelta * 1. ) ) * 0.1531;\n  sum += texture2D( uTexture, ( vUv + bias * uDelta * 2. ) ) * 0.12245;\n  sum += texture2D( uTexture, ( vUv + bias * uDelta * 3. ) ) * 0.0918;\n  sum += texture2D( uTexture, ( vUv + bias * uDelta * 4. ) ) * 0.051;\n\n  gl_FragColor = sum;\n\n}\n"]),uniforms,"DofPass"))}_createClass(DofPass,[{key:"process",value:function process(composer,cb){if(!this.fboX){this.fboX=new _FrameBuffer2.default(gl,composer.width,composer.height);this.fboY=new _FrameBuffer2.default(gl,composer.width,composer.height)}this.fboX.bind();this.shader.uniforms.uTexture=composer.outputTexture;this.shader.uniforms.uDelta=[1,0];composer.bigTriangle.shader=this.shader;composer.renderer.render(composer.bigTriangle,composer.camera);this.fboX.unbind();this.fboY.bind();this.shader.uniforms.uTexture=this.fboX.colors;this.shader.uniforms.uDelta=[0,1];composer.bigTriangle.shader=this.shader;composer.renderer.render(composer.bigTriangle,composer.camera);this.fboY.unbind();cb(this.fboY.colors)}}]);return DofPass}(_Pass3.default);exports.default=DofPass},{"../core/FrameBuffer":54,"./Pass":80,glslify:27}],76:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _Pass2=require("./Pass");var _Pass3=_interopRequireDefault(_Pass2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var glslify=require("glslify");var FXAAPass=function(_Pass){_inherits(FXAAPass,_Pass);function FXAAPass(){var config=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,FXAAPass);var uniforms={};uniforms.uResolution=config.uResolution||[1,1];return _possibleConstructorReturn(this,(FXAAPass.__proto__||Object.getPrototypeOf(FXAAPass)).call(this,glslify(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D uTexture;\nuniform vec2 uResolution;\nvarying vec2 vUv;\n\n#define FXAA_REDUCE_MIN   (1.0/128.0)\n#define FXAA_REDUCE_MUL   (1.0/8.0)\n#define FXAA_SPAN_MAX     8.0\n\nvoid main() {\n\n    vec2 res = 1. / uResolution;\n\n    vec3 rgbNW = texture2D( uTexture, ( vUv.xy + vec2( -1.0, -1.0 ) * res ) ).xyz;\n    vec3 rgbNE = texture2D( uTexture, ( vUv.xy + vec2( 1.0, -1.0 ) * res ) ).xyz;\n    vec3 rgbSW = texture2D( uTexture, ( vUv.xy + vec2( -1.0, 1.0 ) * res ) ).xyz;\n    vec3 rgbSE = texture2D( uTexture, ( vUv.xy + vec2( 1.0, 1.0 ) * res ) ).xyz;\n    vec4 rgbaM  = texture2D( uTexture,  vUv.xy  * res );\n    vec3 rgbM  = rgbaM.xyz;\n    vec3 luma = vec3( 0.299, 0.587, 0.114 );\n\n    float lumaNW = dot( rgbNW, luma );\n    float lumaNE = dot( rgbNE, luma );\n    float lumaSW = dot( rgbSW, luma );\n    float lumaSE = dot( rgbSE, luma );\n    float lumaM  = dot( rgbM,  luma );\n    float lumaMin = min( lumaM, min( min( lumaNW, lumaNE ), min( lumaSW, lumaSE ) ) );\n    float lumaMax = max( lumaM, max( max( lumaNW, lumaNE) , max( lumaSW, lumaSE ) ) );\n\n    vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max( ( lumaNW + lumaNE + lumaSW + lumaSE ) * ( 0.25 * FXAA_REDUCE_MUL ), FXAA_REDUCE_MIN );\n\n    float rcpDirMin = 1.0 / ( min( abs( dir.x ), abs( dir.y ) ) + dirReduce );\n    dir = min( vec2( FXAA_SPAN_MAX,  FXAA_SPAN_MAX),\n          max( vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                dir * rcpDirMin)) * res;\n    vec4 rgbA = (1.0/2.0) * (\n    texture2D(uTexture,  vUv.xy + dir * (1.0/3.0 - 0.5)) +\n    texture2D(uTexture,  vUv.xy + dir * (2.0/3.0 - 0.5)));\n    vec4 rgbB = rgbA * (1.0/2.0) + (1.0/4.0) * (\n    texture2D(uTexture,  vUv.xy + dir * (0.0/3.0 - 0.5)) +\n    texture2D(uTexture,  vUv.xy + dir * (3.0/3.0 - 0.5)));\n    float lumaB = dot(rgbB, vec4(luma, 0.0));\n\n    if ( ( lumaB < lumaMin ) || ( lumaB > lumaMax ) ) {\n        gl_FragColor = rgbA;\n        // gl_FragColor = vec4(1.0,0.0,0.0,1.0);\n    } else {\n        gl_FragColor = rgbB;\n        // gl_FragColor = vec4(0.0,1.0,0.0,1.0);\n    }\n\n    // gl_FragColor = vec4( texture2D( uTexture,vUv ).xyz, 1. );\n}\n"]),uniforms,"FXAAPass"))}return FXAAPass}(_Pass3.default);exports.default=FXAAPass},{"./Pass":80,glslify:27}],77:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _Shader=require("../high/Shader");var _Shader2=_interopRequireDefault(_Shader);var _FrameBuffer=require("../core/FrameBuffer");var _FrameBuffer2=_interopRequireDefault(_FrameBuffer);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var glslify=require("glslify");var Pass=function(){function Pass(){var config=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,Pass);var uniforms={};this.uAmount=config.uAmount||2;this.shader=new _Shader2.default(glslify(["#define GLSLIFY 1\nattribute vec2 aPosition;\nattribute vec2 aUv;\n\nvarying vec2 vUv;\nvarying vec2 blurTexCoords[9];\n\nuniform vec2 uResolution;\nuniform vec2 uDelta;\n\nvoid main() {\n\n  vec2 inc = uDelta / uResolution;\n\n  vec4 p = vec4(aPosition,0.0, 1.0);\n  gl_Position = p;\n  vUv =  aPosition * .5 + .5;\n\n  blurTexCoords[ 0 ] = vUv - inc * 4.;\n  blurTexCoords[ 1 ] = vUv - inc * 3.;\n  blurTexCoords[ 2 ] = vUv - inc * 2.;\n  blurTexCoords[ 3 ] = vUv - inc * 1.;\n  blurTexCoords[ 4 ] = vUv;\n  blurTexCoords[ 5 ] = vUv + inc * 1.;\n  blurTexCoords[ 6 ] = vUv + inc * 2.;\n  blurTexCoords[ 7 ] = vUv + inc * 3.;\n  blurTexCoords[ 8 ] = vUv + inc * 4.;\n}\n"]),glslify(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D uTexture;\nvarying vec2 blurTexCoords[9];\n\nvoid main() {\n\n  vec4 sum = vec4( 0. );\n\n  sum += texture2D( uTexture, blurTexCoords[0] ) * 0.051;\n  sum += texture2D( uTexture, blurTexCoords[1] ) * 0.0918;\n  sum += texture2D( uTexture, blurTexCoords[2] ) * 0.12245;\n  sum += texture2D( uTexture, blurTexCoords[3] ) * 0.1531;\n  sum += texture2D( uTexture, blurTexCoords[4] ) * 0.1633;\n  sum += texture2D( uTexture, blurTexCoords[5] ) * 0.1531;\n  sum += texture2D( uTexture, blurTexCoords[6] ) * 0.12245;\n  sum += texture2D( uTexture, blurTexCoords[7] ) * 0.0918;\n  sum += texture2D( uTexture, blurTexCoords[8] ) * 0.051;\n\n  gl_FragColor = sum;\n\n}\n"]),uniforms,"FullBoxBlurPass");this.enable=true;this.fbo=null}_createClass(Pass,[{key:"initialize",value:function initialize(composer){if(!this.fboX){this.fboX=new _FrameBuffer2.default(gl,composer.width,composer.height);this.fboY=new _FrameBuffer2.default(gl,composer.width,composer.height)}this.composer=composer}},{key:"process",value:function process(inputTexture,cb){this.shader.uniforms.uTexture=inputTexture;this.shader.uniforms.uResolution=[this.composer.width,this.composer.height];this.shader.uniforms.uDelta=[this.uAmount,0];this.composer.pass(this.fboX,this.shader);this.shader.uniforms.uTexture=this.fboX.colors;this.shader.uniforms.uResolution=[this.composer.width,this.composer.height];this.shader.uniforms.uDelta=[0,this.uAmount];this.composer.pass(this.fboY,this.shader);cb(this.fboY.colors)}}]);return Pass}();exports.default=Pass},{"../core/FrameBuffer":54,"../high/Shader":66,glslify:27}],78:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _Pass2=require("./Pass");var _Pass3=_interopRequireDefault(_Pass2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var glslify=require("glslify");var NoisePass=function(_Pass){_inherits(NoisePass,_Pass);function NoisePass(){_classCallCheck(this,NoisePass);return _possibleConstructorReturn(this,(NoisePass.__proto__||Object.getPrototypeOf(NoisePass)).call(this,glslify(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D uTexture;\nvarying vec2 vUv;\n\nvoid main() {\n	vec4 base = texture2D(uTexture,vUv);\n	gl_FragColor = vec4(base.rgb, 1.0);\n	gl_FragColor.rgb = 1.0 - gl_FragColor.rgb;\n}\n"]),{},"InvertPass"))}return NoisePass}(_Pass3.default);exports.default=NoisePass},{"./Pass":80,glslify:27}],79:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _Pass2=require("./Pass");var _Pass3=_interopRequireDefault(_Pass2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var glslify=require("glslify");var NoisePass=function(_Pass){_inherits(NoisePass,_Pass);function NoisePass(){var config=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,NoisePass);var uniforms={};uniforms.uAmount=config.uAmount||.3;uniforms.uSpeed=config.uSpeed||0;return _possibleConstructorReturn(this,(NoisePass.__proto__||Object.getPrototypeOf(NoisePass)).call(this,glslify(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D uTexture;\nuniform float uAmount;\nuniform float uSpeed;\nuniform float uTime;\nvarying vec2 vUv;\n\nfloat random(vec2 n, float offset ){\n	return .5 - fract(sin(dot(n.xy + vec2( offset, 0. ), vec2(12.9898, 78.233)))* 43758.5453);\n}\n\nvoid main() {\n\n	vec4 color = texture2D(uTexture, vUv);\n	color += vec4( vec3( uAmount * random( vUv, .00001 * uSpeed * uTime ) ), 1. );\n\n	gl_FragColor = color;\n\n}\n"]),uniforms,"NoisePass"))}return NoisePass}(_Pass3.default);exports.default=NoisePass},{"./Pass":80,glslify:27}],80:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _Shader=require("../high/Shader");var _Shader2=_interopRequireDefault(_Shader);var _FrameBuffer=require("../core/FrameBuffer");var _FrameBuffer2=_interopRequireDefault(_FrameBuffer);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var glslify=require("glslify");var Pass=function(){function Pass(fs){var uniforms=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var name=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"Postpro pass";_classCallCheck(this,Pass);this.shader=new _Shader2.default(glslify(["#define GLSLIFY 1\nattribute vec2 aPosition;\nattribute vec2 aUv;\n\nvarying vec3 vNormal;\nvarying vec2 vUv;\n\nvoid main() {\n  vec4 p = vec4(aPosition,0.0, 1.0);\n  gl_Position = p;\n  vUv =  aPosition * .5 + .5;\n}\n"]),fs,uniforms,name);this.shader.uniforms.uTime=0;this.enable=true;this.fbo=null}_createClass(Pass,[{key:"initialize",value:function initialize(composer){if(!this.fbo){this.fbo=new _FrameBuffer2.default(gl,composer.width,composer.height)}this.composer=composer}},{key:"process",value:function process(inputTexture,cb){this.shader.uniforms.uTexture=inputTexture;this.shader.uniforms.uTime+=.0025;this.composer.pass(this.fbo,this.shader);cb(this.fbo.colors)}}]);return Pass}();exports.default=Pass},{"../core/FrameBuffer":54,"../high/Shader":66,glslify:27}],81:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _Pass2=require("./Pass");var _Pass3=_interopRequireDefault(_Pass2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var glslify=require("glslify");var TiltPass=function(_Pass){_inherits(TiltPass,_Pass);function TiltPass(){var config=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,TiltPass);var uniforms={};uniforms.uBlurAmount=config.uBlurAmount||1;uniforms.uCenter=config.uCenter||1.1;uniforms.uStepSize=config.uStepSize||5e-4;return _possibleConstructorReturn(this,(TiltPass.__proto__||Object.getPrototypeOf(TiltPass)).call(this,glslify(["precision highp float;\n#define GLSLIFY 1\nuniform sampler2D uTexture;\nvarying vec2 vUv;\n\nuniform float uBlurAmount;\nuniform float uCenter;\nuniform float uStepSize;\n\nconst float steps       = 3.0;\n\nconst float minOffs     = (float(steps-1.0)) / -2.0;\nconst float maxOffs     = (float(steps-1.0)) / +2.0;\n\nvoid main() {\n\n    float amount;\n    vec4 blurred;\n\n        //Work out how much to blur based on the mid point\n    amount = pow((vUv.y * uCenter) * 2.0 - 1.0, 2.0) * uBlurAmount;\n\n        //This is the accumulation of color from the surrounding pixels in the texture\n    blurred = vec4(0.0, 0.0, 0.0, 1.0);\n\n        //From minimum offset to maximum offset\n    for (float offsX = minOffs; offsX <= maxOffs; ++offsX) {\n        for (float offsY = minOffs; offsY <= maxOffs; ++offsY) {\n\n                //copy the coord so we can mess with it\n            vec2 temp_vUv = vUv.xy;\n\n                //work out which uv we want to sample now\n            temp_vUv.x += offsX * amount * uStepSize;\n            temp_vUv.y += offsY * amount * uStepSize;\n\n                //accumulate the sample\n            blurred += texture2D(uTexture, temp_vUv);\n\n        } //for y\n    } //for x\n\n    blurred /= float(steps * steps);\n    gl_FragColor = blurred;\n\n}\n"]),uniforms,"TiltPass"))}return TiltPass}(_Pass3.default);exports.default=TiltPass},{"./Pass":80,glslify:27}],82:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _Pass2=require("./Pass");var _Pass3=_interopRequireDefault(_Pass2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var glslify=require("glslify");var ToonPass=function(_Pass){_inherits(ToonPass,_Pass);function ToonPass(){var config=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,ToonPass);var uniforms={};uniforms.uAmount=config.uResolution||[1,1];return _possibleConstructorReturn(this,(ToonPass.__proto__||Object.getPrototypeOf(ToonPass)).call(this,glslify(["// Based on http://coding-experiments.blogspot.sg/2011/01/toon-pixel-shader.html\nprecision highp float;\n#define GLSLIFY 1\n\nuniform vec3 uResolution;\nuniform sampler2D uTexture;\nvarying vec2 vUv;\n\n#define HueLevCount 6\n#define SatLevCount 7\n#define ValLevCount 4\nfloat HueLevels[HueLevCount];\nfloat SatLevels[SatLevCount];\nfloat ValLevels[ValLevCount];\n\nvec3 RGBtoHSV( float r, float g, float b) {\n   float minv, maxv, delta;\n   vec3 res;\n\n   minv = min(min(r, g), b);\n   maxv = max(max(r, g), b);\n   res.z = maxv;            // v\n\n   delta = maxv - minv;\n\n   if( maxv != 0.0 )\n      res.y = delta / maxv;      // s\n   else {\n      // r = g = b = 0      // s = 0, v is undefined\n      res.y = 0.0;\n      res.x = -1.0;\n      return res;\n   }\n\n   if( r == maxv )\n      res.x = ( g - b ) / delta;      // between yellow & magenta\n   else if( g == maxv )\n      res.x = 2.0 + ( b - r ) / delta;   // between cyan & yellow\n   else\n      res.x = 4.0 + ( r - g ) / delta;   // between magenta & cyan\n\n   res.x = res.x * 60.0;            // degrees\n   if( res.x < 0.0 )\n      res.x = res.x + 360.0;\n\n   return res;\n}\n\nvec3 HSVtoRGB(float h, float s, float v ) {\n   int i;\n   float f, p, q, t;\n   vec3 res;\n\n   if( s == 0.0 ) {\n      // achromatic (grey)\n      res.x = v;\n      res.y = v;\n      res.z = v;\n      return res;\n   }\n\n   h /= 60.0;         // sector 0 to 5\n   i = int(floor( h ));\n   f = h - float(i);         // factorial part of h\n   p = v * ( 1.0 - s );\n   q = v * ( 1.0 - s * f );\n   t = v * ( 1.0 - s * ( 1.0 - f ) );\n\n   if (i==0) {\n		res.x = v;\n		res.y = t;\n		res.z = p;\n   	} else if (i==1) {\n         res.x = q;\n         res.y = v;\n         res.z = p;\n	} else if (i==2) {\n         res.x = p;\n         res.y = v;\n         res.z = t;\n	} else if (i==3) {\n         res.x = p;\n         res.y = q;\n         res.z = v;\n	} else if (i==4) {\n         res.x = t;\n         res.y = p;\n         res.z = v;\n	} else if (i==5) {\n         res.x = v;\n         res.y = p;\n         res.z = q;\n   }\n\n   return res;\n}\n\nfloat nearestLevel(float col, int mode) {\n\n   if (mode==0) {\n   		for (int i =0; i<HueLevCount-1; i++ ) {\n		    if (col >= HueLevels[i] && col <= HueLevels[i+1]) {\n		      return HueLevels[i+1];\n		    }\n		}\n	 }\n\n	if (mode==1) {\n		for (int i =0; i<SatLevCount-1; i++ ) {\n			if (col >= SatLevels[i] && col <= SatLevels[i+1]) {\n	          return SatLevels[i+1];\n	        }\n		}\n	}\n\n	if (mode==2) {\n		for (int i =0; i<ValLevCount-1; i++ ) {\n			if (col >= ValLevels[i] && col <= ValLevels[i+1]) {\n	          return ValLevels[i+1];\n	        }\n		}\n	}\n\n}\n\n// averaged pixel intensity from 3 color channels\nfloat avg_intensity(vec4 pix) {\n return (pix.r + pix.g + pix.b)/3.;\n}\n\nvec4 get_pixel(vec2 coords, float dx, float dy) {\n return texture2D(uTexture,coords + vec2(dx, dy));\n}\n\n// returns pixel color\nfloat IsEdge(in vec2 coords){\n  float dxtex = 1.0 / uResolution.x ;\n  float dytex = 1.0 / uResolution.y ;\n\n  float pix[9];\n\n  int k = -1;\n  float delta;\n\n  // read neighboring pixel intensities\nfloat pix0 = avg_intensity(get_pixel(coords,-1.0*dxtex, -1.0*dytex));\nfloat pix1 = avg_intensity(get_pixel(coords,-1.0*dxtex, 0.0*dytex));\nfloat pix2 = avg_intensity(get_pixel(coords,-1.0*dxtex, 1.0*dytex));\nfloat pix3 = avg_intensity(get_pixel(coords,0.0*dxtex, -1.0*dytex));\nfloat pix4 = avg_intensity(get_pixel(coords,0.0*dxtex, 0.0*dytex));\nfloat pix5 = avg_intensity(get_pixel(coords,0.0*dxtex, 1.0*dytex));\nfloat pix6 = avg_intensity(get_pixel(coords,1.0*dxtex, -1.0*dytex));\nfloat pix7 = avg_intensity(get_pixel(coords,1.0*dxtex, 0.0*dytex));\nfloat pix8 = avg_intensity(get_pixel(coords,1.0*dxtex, 1.0*dytex));\n  // average color differences around neighboring pixels\n  delta = (abs(pix1-pix7)+\n          abs(pix5-pix3) +\n          abs(pix0-pix8)+\n          abs(pix2-pix6)\n           )/4.;\n\n  return clamp(5.5*delta,0.0,1.0);\n}\n\nvoid main(void)\n{\n\n	HueLevels[0] = 0.0;\n	HueLevels[1] = 80.0;\n	HueLevels[2] = 160.0;\n	HueLevels[3] = 240.0;\n	HueLevels[4] = 320.0;\n	HueLevels[5] = 360.0;\n\n	SatLevels[0] = 0.0;\n	SatLevels[1] = 0.1;\n	SatLevels[2] = 0.3;\n	SatLevels[3] = 0.5;\n	SatLevels[4] = 0.6;\n	SatLevels[5] = 0.8;\n	SatLevels[6] = 1.0;\n\n	ValLevels[0] = 0.0;\n	ValLevels[1] = 0.3;\n	ValLevels[2] = 0.6;\n	ValLevels[3] = 1.0;\n\n    vec4 colorOrg = texture2D( uTexture, vUv );\n    vec3 vHSV =  RGBtoHSV(colorOrg.r,colorOrg.g,colorOrg.b);\n    vHSV.x = nearestLevel(vHSV.x, 0);\n    vHSV.y = nearestLevel(vHSV.y, 1);\n    vHSV.z = nearestLevel(vHSV.z, 2);\n    float edg = IsEdge(vUv);\n    vec3 vRGB = (edg >= 0.3)? vec3(0.0,0.0,0.0):HSVtoRGB(vHSV.x,vHSV.y,vHSV.z);\n    gl_FragColor = vec4(vRGB.x,vRGB.y,vRGB.z,1.0);\n}\n"]),uniforms,"ToonPass"))}return ToonPass}(_Pass3.default);exports.default=ToonPass},{"./Pass":80,glslify:27}],83:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _glMatrix=require("gl-matrix");var glm=_interopRequireWildcard(_glMatrix);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}var mat4=glm.mat4;var vec3=glm.vec3;var vec2=glm.vec2;function flatten(arr){return arr.reduce(function(flat,toFlatten){return flat.concat(Array.isArray(toFlatten)?flatten(toFlatten):toFlatten)},[])}function generateFaces(vertices,indices){var _vertices=[];var index=0;for(var i=0;i<vertices.length;i+=3){_vertices.push([vertices[i],vertices[i+1],vertices[i+2]])}var ia=void 0,ib=void 0,ic=void 0;var a=void 0,b=void 0,c=void 0;var vba=vec3.create(),vca=vec3.create();var faces=[];for(var _i=0;_i<indices.length;_i+=3){if(_i%2==0)index+=10;ia=indices[_i];ib=indices[_i+1];ic=indices[_i+2];a=_vertices[ia];b=_vertices[ib];c=_vertices[ic];var face={indices:[ia,ib,ic],index:index,vertices:[a,b,c]};faces.push(face)}return faces}function randomPointInGeometry(geometry,nbPoints){}function generateTangents(vertices,uvs){var tangents=[];var bitangents=[];var v0=vec3.create();var v1=vec3.create();var v2=vec3.create();var uv0=vec3.create();var uv1=vec3.create();var uv2=vec3.create();var deltaPos1=vec3.create();var deltaPos2=vec3.create();var deltaUV1=vec2.create();var deltaUV2=vec2.create();for(var i=0;i<vertices.length;i+=3){var _v0=vertices[i];var _v1=vertices[i+1];var _v2=vertices[i+2];vec3.set(v0,_v0[0],_v0[1],_v0[2]);vec3.set(v1,_v1[0],_v1[1],_v1[2]);vec3.set(v2,_v2[0],_v2[1],_v2[2]);var _uv0=uvs[i];var _uv1=uvs[i+1];var _uv2=uvs[i+2];vec2.set(uv0,_uv0[0],_uv0[1]);vec2.set(uv1,_uv1[0],_uv1[1]);vec2.set(uv2,_uv2[0],_uv2[1]);vec3.subtract(deltaPos1,v1,v0);vec3.subtract(deltaPos2,v2,v0);vec3.subtract(deltaUV1,uv0,uv1);vec3.subtract(deltaUV2,uv0,uv2);var delta=deltaUV1[0]*deltaUV2[1]-deltaUV1[1]*deltaUV2[0];var r=1/delta;var scalePos1x=scalar(deltaPos1,deltaUV2[0]);var scalePos1y=scalar(deltaPos1,deltaUV2[1]);var scalePos2x=scalar(deltaPos2,deltaUV1[0]);var scalePos2y=scalar(deltaPos2,deltaUV1[1]);var tangent=scalar(sub(scalePos1y,scalePos2y),r);var bitangent=scalar(sub(scalePos2x,scalePos1x),r);tangents.push(tangent);tangents.push(tangent);tangents.push(tangent);bitangents.push(bitangent);bitangents.push(bitangent);bitangents.push(bitangent);return{tangents:tangents,bitangents:bitangents}}return{tangents:tangents,bitangents:bitangents};console.log("tangent")}function scalar(vec,scalar){var _vec=[];for(var i=0;i<vec.length;i++){_vec[i]=vec[i]*scalar}return _vec}function sub(b,a){var _vec=[];for(var i=0;i<a.length;i++){_vec[i]=a[i]-b[i]}return _vec}exports.default={flatten:flatten,generateFaces:generateFaces,generateTangents:generateTangents,randomPointInGeometry:randomPointInGeometry}},{"gl-matrix":14}],84:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var Debug=function(){function Debug(){_classCallCheck(this,Debug);this.verbose=false}_createClass(Debug,[{key:"group",value:function group(message){if(!this.verbose)return;console.group("%c "+message+" ","color: #262626")}},{key:"groupEnd",value:function groupEnd(){if(!this.verbose)return;console.groupEnd()}},{key:"print",value:function print(message){console.log("%c "+message+" ","background: #222; color: #ffffff")}},{key:"info",value:function info(message){if(!this.verbose)return;console.log("%c "+message+" ","color: #106bba")}},{key:"log",value:function log(message){if(!this.verbose)return;console.log("%c "+message+" ","color: #1ca51c")}},{key:"error",value:function error(message){var obj=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";console.log("%c "+message+" ","background: #f65959; color: #ffffff",obj)}}]);return Debug}();var debug=new Debug;exports.default=debug},{}],85:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _Mesh=require("../high/Mesh");var _Mesh2=_interopRequireDefault(_Mesh);var _Geometry=require("../high/Geometry");var _Geometry2=_interopRequireDefault(_Geometry);var _Shader=require("../high/Shader");var _Shader2=_interopRequireDefault(_Shader);var _Primitive=require("../high/Primitive");var _Primitive2=_interopRequireDefault(_Primitive);var _FrameBuffer=require("../core/FrameBuffer");var _FrameBuffer2=_interopRequireDefault(_FrameBuffer);var _OrthographicCamera=require("../camera/OrthographicCamera");var _OrthographicCamera2=_interopRequireDefault(_OrthographicCamera);var _PerspectiveCamera=require("../camera/PerspectiveCamera");var _PerspectiveCamera2=_interopRequireDefault(_PerspectiveCamera);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var glslify=require("glslify");var FBOHelper=function(){function FBOHelper(renderer){var size=arguments.length>1&&arguments[1]!==undefined?arguments[1]:256;_classCallCheck(this,FBOHelper);this.renderer=renderer;this.size=size;this.camera=new _OrthographicCamera2.default(-1,1,-1,1,.1,100);this.textures=[];this.shader=new _Shader2.default("\n      attribute vec2 aPosition;\n      attribute vec2 aUv;\n\n      varying vec3 vNormal;\n      varying vec2 vUv;\n\n      void main() {\n        vec4 p = vec4(aPosition,0.0, 1.0);\n        gl_Position = p;\n        vUv =  aPosition * .5 + .5;\n      }\n\n\n      ","\n        precision highp float;\n\n        uniform sampler2D uTexture;\n        varying vec2 vUv;\n\n        void main() {\n          vec4 base = texture2D(uTexture,vec2(vUv.x, 1.0-vUv.y));\n          gl_FragColor = vec4(base.rgb, 1.0);\n        }\n      ",{},"FBO helper");this.geo=new _Geometry2.default(_Primitive2.default.bigTriangle(1,1));this.mesh=new _Mesh2.default(this.geo,this.shader)}_createClass(FBOHelper,[{key:"attach",value:function attach(texture){this.textures.push(texture)}},{key:"render",value:function render(){if(this.textures.length<1)return;for(var i=0;i<this.textures.length;i++){this.shader.uniforms.uTexture=this.textures[i];this.renderer.gl.viewport(0,i*this.size,this.size,this.size);this.renderer.render(this.mesh,this.camera)}this.renderer.gl.viewport(0,0,this.renderer.canvas.width,this.renderer.canvas.height)}},{key:"renderImediate",value:function renderImediate(texture,index){this.shader.uniforms.uTexture=texture;this.renderer.gl.viewport(index*this.size,0,this.size,this.size);this.renderer.render(this.mesh,this.camera);this.renderer.gl.viewport(0,0,this.renderer.canvas.width,this.renderer.canvas.height)}}]);return FBOHelper}();exports.default=FBOHelper},{"../camera/OrthographicCamera":48,"../camera/PerspectiveCamera":49,"../core/FrameBuffer":54,"../high/Geometry":63,"../high/Mesh":64,"../high/Primitive":65,"../high/Shader":66,glslify:27}],86:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _Ray=require("../math/Ray");var _Ray2=_interopRequireDefault(_Ray);var _events=require("events");var _glMatrix=require("gl-matrix");var glm=_interopRequireWildcard(_glMatrix);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var mat4=glm.mat4;var vec3=glm.vec3;var v0=vec3.create(),v1=vec3.create(),v2=vec3.create();function getMouse(e){var x=void 0,y=void 0;if(e.touches){x=e.touches[0].pageX;y=e.touches[0].pageY}else{x=e.clientX;y=e.clientY}return{x:x,y:y}}var t=mat4.create();var getVector=function getVector(target,v,modelMatrix){vec3.transformMat4(target,v,modelMatrix)};var HitDetect=function(_EventEmitter){_inherits(HitDetect,_EventEmitter);function HitDetect(){var objects=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var camera=arguments[1];_classCallCheck(this,HitDetect);var _this=_possibleConstructorReturn(this,(HitDetect.__proto__||Object.getPrototypeOf(HitDetect)).call(this));_this.objects=objects.length?objects:[objects];_this.camera=camera;_this.ray=new _Ray2.default([0,0,0],[0,0,0]);_this.hit=vec3.fromValues(0,0,0);_this.b_onDown=_this._onDown.bind(_this);_this.b_onUp=_this._onUp.bind(_this);_this.b_onMove=_this._onMove.bind(_this);_this._posDown={x:-9999,y:-9999};_this._posLast={x:-9999,y:-9999};_this.connect();return _this}_createClass(HitDetect,[{key:"connect",value:function connect(){window.addEventListener("mousedown",this.b_onDown);window.addEventListener("mouseup",this.b_onUp);window.addEventListener("mousemove",this.b_onMove);window.addEventListener("touchstart",this.b_onDown);window.addEventListener("touchend",this.b_onUp);window.addEventListener("touchmove",this.b_onMove)}},{key:"disconnect",value:function disconnect(){window.removeEventListener("mousedown",this.b_onDown);window.removeEventListener("mouseup",this.b_onUp);window.removeEventListener("mousemove",this.b_onMove);window.removeEventListener("touchstart",this.b_onDown);window.removeEventListener("touchend",this.b_onUp);window.removeEventListener("touchmove",this.b_onMove);this._objectHit=null;this._posDown.x=-999;this._posDown.y=-999;this.objects=[]}},{key:"_onUp",value:function _onUp(e){}},{key:"_onMove",value:function _onMove(e){var mouse=getMouse(e);this._posDown.x=mouse.x;this._posDown.y=mouse.y;this._posLast.x=mouse.x;this._posLast.y=mouse.y;this._checkHit()}},{key:"_onDown",value:function _onDown(e){var mouse=getMouse(e);this._posDown.x=mouse.x;this._posDown.y=mouse.y;this._posLast.x=mouse.x;this._posLast.y=mouse.y;this._checkHit()}},{key:"_checkHit",value:function _checkHit(){var mx=0,my=0;var _posLast=this._posLast,x=_posLast.x,y=_posLast.y;mx=x/window.innerWidth*2-1;my=-(y/window.innerHeight)*2+1;this.camera.generateRay([mx,my,0],this.ray);var hit=void 0;for(var i=0;i<this.objects.length;i++){var object=void 0;object=this.objects[i];object._needUpdate=true;if(!object.geometry.faces){object.geometry.generateFaces()}var faces=object.geometry.faces;for(var j=0;j<faces.length;j++){var vertices=void 0;vertices=faces[j].vertices;getVector(v0,vertices[0],object.matrixWorld);getVector(v1,vertices[1],object.matrixWorld);getVector(v2,vertices[2],object.matrixWorld);hit=this.ray.intersectTriangle(v0,v1,v2);if(hit){this.hit[0]=hit[0];this.hit[1]=hit[1];this.hit[2]=hit[2];break}}}}}]);return HitDetect}(_events.EventEmitter);exports.default=HitDetect},{"../math/Ray":68,events:9,"gl-matrix":14}],87:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function flatten(array){var size=arguments.length>1&&arguments[1]!==undefined?arguments[1]:3;var flat=[];for(var i=0;i<array.length;i++){for(var j=0;j<size;j++){flat[i*size+j]=array[i][j]}}return new Float32Array(flat)}function _generateMeshes(o){var coords=flatten(o.coords,2);var positions=flatten(o.positions);var normals=flatten(o.normals);var indices=new Uint16Array(o.indices);return{uvs:coords,positions:positions,normals:normals,indices:indices,flat:true}}function parseObj(objStr){var lines=objStr.split("\n");var positions=[];var coords=[];var finalNormals=[];var vertices=[];var normals=[];var uvs=[];var indices=[];var count=0;var result=void 0;var vertexPattern=/v( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/;var normalPattern=/vn( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/;var uvPattern=/vt( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/;var facePattern1=/f( +-?\d+)( +-?\d+)( +-?\d+)( +-?\d+)?/;var facePattern2=/f( +(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+))?/;var facePattern3=/f( +(-?\d+)\/(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+)\/(-?\d+))?/;var facePattern4=/f( +(-?\d+)\/\/(-?\d+))( +(-?\d+)\/\/(-?\d+))( +(-?\d+)\/\/(-?\d+))( +(-?\d+)\/\/(-?\d+))?/;function parseVertexIndex(value){var index=parseInt(value);return(index>=0?index-1:index+vertices.length/3)*3}function parseNormalIndex(value){var index=parseInt(value);return(index>=0?index-1:index+normals.length/3)*3}function parseUVIndex(value){var index=parseInt(value);return(index>=0?index-1:index+uvs.length/2)*2}function addVertex(a,b,c){positions.push([vertices[a],vertices[a+1],vertices[a+2]]);positions.push([vertices[b],vertices[b+1],vertices[b+2]]);positions.push([vertices[c],vertices[c+1],vertices[c+2]]);indices.push(count*3+0);indices.push(count*3+1);indices.push(count*3+2);count++}function addUV(a,b,c){coords.push([uvs[a],uvs[a+1]]);coords.push([uvs[b],uvs[b+1]]);coords.push([uvs[c],uvs[c+1]])}function addNormal(a,b,c){finalNormals.push([normals[a],normals[a+1],normals[a+2]]);finalNormals.push([normals[b],normals[b+1],normals[b+2]]);finalNormals.push([normals[c],normals[c+1],normals[c+2]])}function addFace(a,b,c,d,ua,ub,uc,ud,na,nb,nc,nd){var ia=parseVertexIndex(a);var ib=parseVertexIndex(b);var ic=parseVertexIndex(c);var id=void 0;if(d===undefined){addVertex(ia,ib,ic)}else{id=parseVertexIndex(d);addVertex(ia,ib,id);addVertex(ib,ic,id)}if(ua!==undefined){ia=parseUVIndex(ua);ib=parseUVIndex(ub);ic=parseUVIndex(uc);if(d===undefined){addUV(ia,ib,ic)}else{id=parseUVIndex(ud);addUV(ia,ib,id);addUV(ib,ic,id)}}if(na!==undefined){ia=parseNormalIndex(na);ib=parseNormalIndex(nb);ic=parseNormalIndex(nc);if(d===undefined){addNormal(ia,ib,ic)}else{id=parseNormalIndex(nd);addNormal(ia,ib,id);addNormal(ib,ic,id)}}}for(var i=0;i<lines.length;i++){var line=lines[i];line=line.trim();if(line.length===0||line.charAt(0)==="#"){continue}else if((result=vertexPattern.exec(line))!==null){vertices.push(parseFloat(result[1]),parseFloat(result[2]),parseFloat(result[3]))}else if((result=normalPattern.exec(line))!==null){normals.push(parseFloat(result[1]),parseFloat(result[2]),parseFloat(result[3]))}else if((result=uvPattern.exec(line))!==null){uvs.push(parseFloat(result[1]),1-parseFloat(result[2]))}else if((result=facePattern1.exec(line))!==null){addFace(result[1],result[2],result[3],result[4])}else if((result=facePattern2.exec(line))!==null){addFace(result[2],result[5],result[8],result[11],result[3],result[6],result[9],result[12])}else if((result=facePattern3.exec(line))!==null){addFace(result[2],result[6],result[10],result[14],result[3],result[7],result[11],result[15],result[4],result[8],result[12],result[16])}else if((result=facePattern4.exec(line))!==null){addFace(result[2],result[5],result[8],result[11],undefined,undefined,undefined,undefined,result[3],result[6],result[9],result[12])}}return _generateMeshes({positions:positions,coords:coords,normals:finalNormals,indices:indices})}exports.default=parseObj},{}],88:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _glMatrix=require("gl-matrix");function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var getCursorPos=function getCursorPos(e){if(e.touches){return{x:e.touches[0].pageX,y:e.touches[0].pageY}}else{return{x:e.clientX,y:e.clientY}}};var UP=_glMatrix.vec3.fromValues(0,1,0);var ANGLE_LIMIT=Math.PI/2-.01;var OrbitalCameraControl=function(){function OrbitalCameraControl(camera){var mRadius=arguments.length>1&&arguments[1]!==undefined?arguments[1]:5;var mListenerTarget=arguments.length>2&&arguments[2]!==undefined?arguments[2]:window;
_classCallCheck(this,OrbitalCameraControl);this.camera=camera;this._mtxTarget=camera.view;this._radius=mRadius;this._targetRadius=mRadius;this._listenerTarget=mListenerTarget;this._isDown=false;this._rotation=_glMatrix.mat4.create();this.center=_glMatrix.vec3.create();this.easing=.1;this.senstivity=1;this.senstivityRotation=1;this._isLocked=false;this._isZoomLocked=false;this._rx=0;this._trx=0;this._prevx=0;this._ry=0;this._try=0;this._prevy=0;this._quat=_glMatrix.quat.create();this._vec=_glMatrix.vec3.create();this._mtx=_glMatrix.mat4.create();this._mouseDown={x:0,y:0};this._mouse={x:0,y:0};this._init()}_createClass(OrbitalCameraControl,[{key:"_init",value:function _init(){var _this=this;this._listenerTarget.addEventListener("mousedown",function(e){return _this._onDown(e)});this._listenerTarget.addEventListener("mouseup",function(){return _this._onUp()});this._listenerTarget.addEventListener("mousemove",function(e){return _this._onMove(e)});this._listenerTarget.addEventListener("touchstart",function(e){return _this._onDown(e)});this._listenerTarget.addEventListener("touchend",function(){return _this._onUp()});this._listenerTarget.addEventListener("touchmove",function(e){return _this._onMove(e)});this._listenerTarget.addEventListener("mousewheel",function(e){return _this._onWheel(e)});this._listenerTarget.addEventListener("DOMMouseScroll",function(e){return _this._onWheel(e)})}},{key:"lock",value:function lock(mValue){this._isLocked=mValue}},{key:"lockZoom",value:function lockZoom(mValue){this._isZoomLocked=mValue}},{key:"_onWheel",value:function _onWheel(e){if(this._isZoomLocked){return}var w=e.wheelDelta;var d=e.detail;var value=0;if(d){if(w){value=w/d/40*d>0?1:-1}else{value=-d/3}}else{value=w/120}this._targetRadius+=-value*2*this.senstivity;if(this._targetRadius<.01){this._targetRadius=.01}}},{key:"_onDown",value:function _onDown(e){if(this._isLocked){return}this._isDown=true;this._mouseDown=getCursorPos(e);this._mouse=getCursorPos(e);this._prevx=this._trx=this._rx;this._prevy=this._try=this._ry}},{key:"_onMove",value:function _onMove(e){if(this._isLocked){return}if(!this._isDown){return}this._mouse=getCursorPos(e)}},{key:"_onUp",value:function _onUp(){if(this._isLocked){return}this._isDown=false}},{key:"update",value:function update(){var dx=this._mouse.x-this._mouseDown.x;var dy=this._mouse.y-this._mouseDown.y;var senstivity=.02*this.senstivityRotation;this._try=this._prevy-dx*senstivity;this._trx=this._prevx-dy*senstivity;if(this._trx<-Math.PI/2+.01){this._trx=-Math.PI/2+.01}else if(this._trx>Math.PI/2-.01){this._trx=Math.PI/2-.01}this._rx+=(this._trx-this._rx)*this.easing;this._ry+=(this._try-this._ry)*this.easing;this._radius+=(this._targetRadius-this._radius)*this.easing;_glMatrix.quat.identity(this._quat);_glMatrix.quat.rotateY(this._quat,this._quat,this._ry);_glMatrix.quat.rotateX(this._quat,this._quat,this._rx);_glMatrix.vec3.set(this._vec,0,0,this._radius);_glMatrix.vec3.transformQuat(this._vec,this._vec,this._quat);_glMatrix.mat4.identity(this._mtx);if(this._mtxTarget){_glMatrix.mat4.copy(this._mtxTarget,this._mtx)}this.camera.lookAt(this._vec,this.center,UP)}}]);return OrbitalCameraControl}();exports.default=OrbitalCameraControl},{"gl-matrix":14}],89:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _=require("../");var _2=_interopRequireDefault(_);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var glslify=require("glslify");var Pingpong=function(){function Pingpong(_ref){var data=_ref.data,width=_ref.width,height=_ref.height,renderer=_ref.renderer,camera=_ref.camera,fs=_ref.fs,vs=_ref.vs,uniforms=_ref.uniforms;_classCallCheck(this,Pingpong);this.renderer=renderer;this.camera=camera;this.uniforms=uniforms;this.uniforms.uTime=0;this.uniforms.uTexture=data;this.uniforms.uOrigin=data;this.quad=new _2.default.Mesh(new _2.default.Geometry(_2.default.Primitive.quad(1,1)),new _2.default.Shader(vs,fs,this.uniforms,"Simulation"));this.fboIn=new _2.default.FrameBuffer(gl,width,height);this.fboOut=new _2.default.FrameBuffer(gl,width,height);this.fboOutO=this.fboOut;this.fboIn.bind();this.renderer.render(this.quad,this.camera);this.fboIn.unbind();this.fboOut.bind();this.renderer.render(this.quad,this.camera);this.fboOut.unbind();this.width=width;this.height=height;this.time=0}_createClass(Pingpong,[{key:"update",value:function update(){this.time+=.01;this.quad.shader.uniforms.uTime=this.time;this.quad.shader.uniforms.width=this.width;this.quad.shader.uniforms.height=this.height;this.fboOut.bind();this.quad.shader.uniforms.uTexture=this.fboIn.colors;this.quad.shader.uniforms.uTextureOld=this.fboOut.colors;this.renderer.render(this.quad,this.camera);this.fboOut.unbind();var temp=this.fboIn;this.fboIn=this.fboOut;this.fboOut=temp}}]);return Pingpong}();exports.default=Pingpong},{"../":67,glslify:27}],90:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function uuid(){function s4(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}return s4()+s4()+"-"+s4()+"-"+s4()+"-"+s4()+"-"+s4()+s4()+s4()}exports.default=uuid},{}],91:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function hexToRgb(hex){var result=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);return result?[parseInt(result[1],16)/255,parseInt(result[2],16)/255,parseInt(result[3],16)/255]:null}function numberToRgb(hex){hex=parseInt(hex);var hex=Math.floor(hex);return hex?[(hex>>16&255)/255,(hex>>8&255)/255,(hex&255)/255]:null}exports.default={hexToRgb:hexToRgb,numberToRgb:numberToRgb}},{}],92:[function(require,module,exports){"use strict";module.exports=function fallback(message){if(!message)message="Webgl 2 not supported by your browser";var el=document.createElement("div");el.classList="fallback";el.style.position="absolute";el.style.backgroundColor="black";el.style.top=0;el.style.left=0;el.style.width="100%";el.style.height="100%";el.style.textAlign="center";el.style.zIndex="99";var p=document.createElement("p");p.style.position="absolute";p.style.top="50%";p.style.left="50%";p.style.color="white";p.style.transform="translate(-50%,-50%)";p.style.color="white";p.innerHTML=message;el.appendChild(p);document.body.appendChild(el)}},{}],93:[function(require,module,exports){"use strict";var _raf=require("raf");var _raf2=_interopRequireDefault(_raf);var _assetsLoader=require("assets-loader");var _assetsLoader2=_interopRequireDefault(_assetsLoader);var _domready=require("domready");var _domready2=_interopRequireDefault(_domready);var _Query=require("./dev/Query");var _Query2=_interopRequireDefault(_Query);var _SuperConfig=require("./dev/SuperConfig");var _SuperConfig2=_interopRequireDefault(_SuperConfig);var _AssetManifest=require("./AssetManifest");var _AssetManifest2=_interopRequireDefault(_AssetManifest);var _Scene=require("./Scene");var _Scene2=_interopRequireDefault(_Scene);var _SceneDev=require("./SceneDev");var _SceneDev2=_interopRequireDefault(_SceneDev);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}var loader=(0,_assetsLoader2.default)({assets:_AssetManifest2.default});window.getAsset=function(id){return loader.get("assets/"+id)};(0,_domready2.default)(function(){if(_AssetManifest2.default.length>0){document.body.classList.add("loading");loader.on("complete",function(assets){document.body.classList.remove("loading");window.assets=assets;init();if(_Query2.default.debug)console.table(assets)}).start()}else{init()}});var scene=void 0;function init(){document.title=_SuperConfig2.default.config.name;if(_Query2.default.develop){scene=new _SceneDev2.default}else{scene=new _Scene2.default}render();window.addEventListener("resize",resize)}function resize(){scene.resize()}function render(){(0,_raf2.default)(render);scene.render()}},{"./AssetManifest":40,"./Scene":43,"./SceneDev":44,"./dev/Query":45,"./dev/SuperConfig":47,"assets-loader":4,domready:8,raf:38}]},{},[93]);